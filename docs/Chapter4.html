<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>5 Dynamic World izpēte | Putnu sugu izplatības modelēšana biodaudzveidības aizsardzībai: materiāli reproducēšanai</title>
  <meta name="description" content="Putnu sugu izplatības modelēšana biodaudzveidības aizsardzībai: materiāli reproducējamības nodrošināšanai." />
  <meta name="generator" content="bookdown 0.39 and GitBook 2.6.7" />

  <meta property="og:title" content="5 Dynamic World izpēte | Putnu sugu izplatības modelēšana biodaudzveidības aizsardzībai: materiāli reproducēšanai" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="Putnu sugu izplatības modelēšana biodaudzveidības aizsardzībai: materiāli reproducējamības nodrošināšanai." />
  <meta name="github-repo" content="rstudio/bookdown-demo" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="5 Dynamic World izpēte | Putnu sugu izplatības modelēšana biodaudzveidības aizsardzībai: materiāli reproducēšanai" />
  
  <meta name="twitter:description" content="Putnu sugu izplatības modelēšana biodaudzveidības aizsardzībai: materiāli reproducējamības nodrošināšanai." />
  

<meta name="author" content="Andris Avotiņš" />


<meta name="date" content="2024-10-28" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="Chapter3.html"/>
<link rel="next" href="Chapter5.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<link href="libs/htmltools-fill-0.5.8.1/fill.css" rel="stylesheet" />
<script src="libs/htmlwidgets-1.6.4/htmlwidgets.js"></script>
<script src="libs/viz-1.8.2/viz.js"></script>
<link href="libs/DiagrammeR-styles-0.2/styles.css" rel="stylesheet" />
<script src="libs/grViz-binding-1.0.11/grViz.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>
<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Putnu SDMs</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Par šo materiālu</a>
<ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#kas-nav-šis-materiāls"><i class="fa fa-check"></i><b>1.1</b> Kas nav šis materiāls?</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#kas-ir-šis-materiāls-un-kā-to-lietot"><i class="fa fa-check"></i><b>1.2</b> Kas ir šis materiāls un kā to lietot?</a></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#satura-izklāsts-orientācijai"><i class="fa fa-check"></i><b>1.3</b> Satura izklāsts (orientācijai)</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="Chapter1.html"><a href="Chapter1.html"><i class="fa fa-check"></i><b>2</b> Sugu saraksts un pamata apraksti</a>
<ul>
<li class="chapter" data-level="2.1" data-path="Chapter1.html"><a href="Chapter1.html#analizējamo-sugu-izvēle"><i class="fa fa-check"></i><b>2.1</b> Analizējamo sugu izvēle</a></li>
<li class="chapter" data-level="2.2" data-path="Chapter1.html"><a href="Chapter1.html#pamata-apraksti-analīzei"><i class="fa fa-check"></i><b>2.2</b> Pamata apraksti analīzei</a></li>
<li class="chapter" data-level="2.3" data-path="Chapter1.html"><a href="Chapter1.html#pamata-apraksti-novērojumu-atlasei"><i class="fa fa-check"></i><b>2.3</b> Pamata apraksti novērojumu atlasei</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="Chapter1.html"><a href="Chapter1.html#nepiemērota-vide"><i class="fa fa-check"></i><b>2.3.1</b> Nepiemērota vide</a></li>
<li class="chapter" data-level="2.3.2" data-path="Chapter1.html"><a href="Chapter1.html#Chapter1.3.2"><i class="fa fa-check"></i><b>2.3.2</b> Ligzdošanas sezona</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="Chapter1.html"><a href="Chapter1.html#pamata-apraksti-starpsugu-svarošanai"><i class="fa fa-check"></i><b>2.4</b> Pamata apraksti starpsugu svarošanai</a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="Chapter1.html"><a href="Chapter1.html#populācijas-lielums-un-pārmaiņas"><i class="fa fa-check"></i><b>2.4.1</b> Populācijas lielums un pārmaiņas</a></li>
<li class="chapter" data-level="2.4.2" data-path="Chapter1.html"><a href="Chapter1.html#mūža-reproduktīvais-ieguldījums"><i class="fa fa-check"></i><b>2.4.2</b> Mūža reproduktīvais ieguldījums</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="Chapter2.html"><a href="Chapter2.html"><i class="fa fa-check"></i><b>3</b> Ar modeļiem aptveramā (analīzes) telpa un standartizācijas faili</a>
<ul>
<li class="chapter" data-level="3.1" data-path="Chapter2.html"><a href="Chapter2.html#Chapter2.1"><i class="fa fa-check"></i><b>3.1</b> 100 m režģis Latvijā</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="Chapter2.html"><a href="Chapter2.html#Chapter2.2"><i class="fa fa-check"></i><b>3.1.1</b> Stratificēšana ģeoprocesēšanas paralelizācijai</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="Chapter2.html"><a href="Chapter2.html#Chapter2.3"><i class="fa fa-check"></i><b>3.2</b> References rastri</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="Chapter3.html"><a href="Chapter3.html"><i class="fa fa-check"></i><b>4</b> Ievades ģeodati</a>
<ul>
<li class="chapter" data-level="4.1" data-path="Chapter3.html"><a href="Chapter3.html#Chapter3.1"><i class="fa fa-check"></i><b>4.1</b> Ievades jēldati</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="Chapter3.html"><a href="Chapter3.html#Chapter3.1.1"><i class="fa fa-check"></i><b>4.1.1</b> Meža Valsts reģistrs</a></li>
<li class="chapter" data-level="4.1.2" data-path="Chapter3.html"><a href="Chapter3.html#Chapter3.1.2"><i class="fa fa-check"></i><b>4.1.2</b> Lauku atbalsts dienesta lauku informācija</a></li>
<li class="chapter" data-level="4.1.3" data-path="Chapter3.html"><a href="Chapter3.html#Chapter3.1.3"><i class="fa fa-check"></i><b>4.1.3</b> LĢIA topogrāfiskā karte</a></li>
<li class="chapter" data-level="4.1.4" data-path="Chapter3.html"><a href="Chapter3.html#Chapter3.1.4"><i class="fa fa-check"></i><b>4.1.4</b> MKIS</a></li>
<li class="chapter" data-level="4.1.5" data-path="Chapter3.html"><a href="Chapter3.html#Chapter3.1.5"><i class="fa fa-check"></i><b>4.1.5</b> LVM atvērtie dati</a></li>
<li class="chapter" data-level="4.1.6" data-path="Chapter3.html"><a href="Chapter3.html#Chapter3.1.6"><i class="fa fa-check"></i><b>4.1.6</b> Corine Land Cover</a></li>
<li class="chapter" data-level="4.1.7" data-path="Chapter3.html"><a href="Chapter3.html#Chapter3.1.7"><i class="fa fa-check"></i><b>4.1.7</b> Sentinel-2</a></li>
<li class="chapter" data-level="4.1.8" data-path="Chapter3.html"><a href="Chapter3.html#Chapter3.1.8"><i class="fa fa-check"></i><b>4.1.8</b> <em>Dynamic World</em></a></li>
<li class="chapter" data-level="4.1.9" data-path="Chapter3.html"><a href="Chapter3.html#Chapter3.1.9"><i class="fa fa-check"></i><b>4.1.9</b> <em>The Global Forest Watch</em></a></li>
<li class="chapter" data-level="4.1.10" data-path="Chapter3.html"><a href="Chapter3.html#Chapter3.1.10"><i class="fa fa-check"></i><b>4.1.10</b> Palsar Forests</a></li>
<li class="chapter" data-level="4.1.11" data-path="Chapter3.html"><a href="Chapter3.html#Chapter3.1.11"><i class="fa fa-check"></i><b>4.1.11</b> ERA-5 Land</a></li>
<li class="chapter" data-level="4.1.12" data-path="Chapter3.html"><a href="Chapter3.html#Chapter3.1.12"><i class="fa fa-check"></i><b>4.1.12</b> Augsnes auglīgums</a></li>
<li class="chapter" data-level="4.1.13" data-path="Chapter3.html"><a href="Chapter3.html#Chapter3.1.13"><i class="fa fa-check"></i><b>4.1.13</b> Digitālie reljefa modeļi</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="Chapter3.html"><a href="Chapter3.html#Chapter3.2"><i class="fa fa-check"></i><b>4.2</b> Ievades produkti</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="Chapter3.html"><a href="Chapter3.html#Chapter3.2.1"><i class="fa fa-check"></i><b>4.2.1</b> Reljefs</a></li>
<li class="chapter" data-level="4.2.2" data-path="Chapter3.html"><a href="Chapter3.html#Chapter3.2.2"><i class="fa fa-check"></i><b>4.2.2</b> Ainava</a></li>
<li class="chapter" data-level="4.2.3" data-path="Chapter3.html"><a href="Chapter3.html#Chapter3.2.3"><i class="fa fa-check"></i><b>4.2.3</b> Vides pārmaiņas</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="Chapter4.html"><a href="Chapter4.html"><i class="fa fa-check"></i><b>5</b> <em>Dynamic World</em> izpēte</a>
<ul>
<li class="chapter" data-level="5.1" data-path="Chapter4.html"><a href="Chapter4.html#q0-dw-nosegums"><i class="fa fa-check"></i><b>5.1</b> Q0: DW nosegums</a></li>
<li class="chapter" data-level="5.2" data-path="Chapter4.html"><a href="Chapter4.html#q1-lauksaimniecības-kultūras"><i class="fa fa-check"></i><b>5.2</b> Q1: Lauksaimniecības kultūras</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="Chapter4.html"><a href="Chapter4.html#q1.1-ziemāji-aramzemēs"><i class="fa fa-check"></i><b>5.2.1</b> Q1.1: Ziemāji aramzemēs</a></li>
<li class="chapter" data-level="5.2.2" data-path="Chapter4.html"><a href="Chapter4.html#q1.2-ziemas-rapsis"><i class="fa fa-check"></i><b>5.2.2</b> Q1.2: Ziemas rapsis</a></li>
<li class="chapter" data-level="5.2.3" data-path="Chapter4.html"><a href="Chapter4.html#q1.3-vasarāji-aramzemēs"><i class="fa fa-check"></i><b>5.2.3</b> Q1.3: Vasarāji aramzemēs</a></li>
<li class="chapter" data-level="5.2.4" data-path="Chapter4.html"><a href="Chapter4.html#q1.4-vasaras-rapsis"><i class="fa fa-check"></i><b>5.2.4</b> Q1.4: Vasaras rapsis</a></li>
<li class="chapter" data-level="5.2.5" data-path="Chapter4.html"><a href="Chapter4.html#q1.5-auzas"><i class="fa fa-check"></i><b>5.2.5</b> Q1.5: Auzas</a></li>
<li class="chapter" data-level="5.2.6" data-path="Chapter4.html"><a href="Chapter4.html#q1.6-kukurūza"><i class="fa fa-check"></i><b>5.2.6</b> Q1.6: Kukurūza</a></li>
<li class="chapter" data-level="5.2.7" data-path="Chapter4.html"><a href="Chapter4.html#q1.7-papuves"><i class="fa fa-check"></i><b>5.2.7</b> Q1.7: Papuves</a></li>
<li class="chapter" data-level="5.2.8" data-path="Chapter4.html"><a href="Chapter4.html#q1.8-ilggadīgie-zālāji"><i class="fa fa-check"></i><b>5.2.8</b> Q1.8: Ilggadīgie zālāji</a></li>
<li class="chapter" data-level="5.2.9" data-path="Chapter4.html"><a href="Chapter4.html#q1.9-kultivētie-zālāji"><i class="fa fa-check"></i><b>5.2.9</b> Q1.9: Kultivētie zālāji</a></li>
<li class="chapter" data-level="5.2.10" data-path="Chapter4.html"><a href="Chapter4.html#q1.10-agļukoki"><i class="fa fa-check"></i><b>5.2.10</b> Q1.10: Agļukoki</a></li>
<li class="chapter" data-level="5.2.11" data-path="Chapter4.html"><a href="Chapter4.html#q1.11-ogu-krūmi"><i class="fa fa-check"></i><b>5.2.11</b> Q1.11: Ogu-krūmi</a></li>
<li class="chapter" data-level="5.2.12" data-path="Chapter4.html"><a href="Chapter4.html#q1.12-zemās-ogas"><i class="fa fa-check"></i><b>5.2.12</b> Q1.12: Zemās ogas</a></li>
<li class="chapter" data-level="5.2.13" data-path="Chapter4.html"><a href="Chapter4.html#q1.13-bezatbalsta-platība"><i class="fa fa-check"></i><b>5.2.13</b> Q1.13: Bezatbalsta platība</a></li>
<li class="chapter" data-level="5.2.14" data-path="Chapter4.html"><a href="Chapter4.html#q1.14-vagu-un-rušināmkultūras"><i class="fa fa-check"></i><b>5.2.14</b> Q1.14: Vagu un rušināmkultūras</a></li>
<li class="chapter" data-level="5.2.15" data-path="Chapter4.html"><a href="Chapter4.html#q1.15-īscirtmeta-atvasāji-un-enerģijas-kultūras"><i class="fa fa-check"></i><b>5.2.15</b> Q1.15: Īscirtmeta atvasāji un enerģijas kultūras</a></li>
<li class="chapter" data-level="5.2.16" data-path="Chapter4.html"><a href="Chapter4.html#q1-lad-kultūru-stratificēšanai"><i class="fa fa-check"></i><b>5.2.16</b> Q1: LAD kultūru stratificēšanai</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="Chapter4.html"><a href="Chapter4.html#q2-mežaudzes-augstums-sugu-grupās"><i class="fa fa-check"></i><b>5.3</b> Q2: Mežaudzes augstums sugu grupās</a></li>
<li class="chapter" data-level="5.4" data-path="Chapter4.html"><a href="Chapter4.html#q3-topogrāfiskās-kartes-mitrāji"><i class="fa fa-check"></i><b>5.4</b> Q3: Topogrāfiskās kartes mitrāji</a></li>
<li class="chapter" data-level="5.5" data-path="Chapter4.html"><a href="Chapter4.html#q4-karjeri-kūdras-ieguves-vietas-un-ceļi"><i class="fa fa-check"></i><b>5.5</b> Q4: Karjeri, kūdras ieguves vietas un ceļi</a></li>
<li class="chapter" data-level="5.6" data-path="Chapter4.html"><a href="Chapter4.html#q5-izcirtuma-izmērs-un-forma"><i class="fa fa-check"></i><b>5.6</b> Q5: Izcirtuma izmērs un forma</a>
<ul>
<li class="chapter" data-level="5.6.1" data-path="Chapter4.html"><a href="Chapter4.html#q5.1-2022.-gada-izcirtumi"><i class="fa fa-check"></i><b>5.6.1</b> Q5.1: 2022. gada izcirtumi</a></li>
<li class="chapter" data-level="5.6.2" data-path="Chapter4.html"><a href="Chapter4.html#q5.2-senākas-kailcirtes-bet-vēl-joprojām-izcirtumi"><i class="fa fa-check"></i><b>5.6.2</b> Q5.2: senākas kailcirtes, bet vēl joprojām izcirtumi</a></li>
</ul></li>
<li class="chapter" data-level="5.7" data-path="Chapter4.html"><a href="Chapter4.html#q6-zālāju-transformācija-uz-aramzemēm"><i class="fa fa-check"></i><b>5.7</b> Q6: Zālāju transformācija uz aramzemēm</a></li>
<li class="chapter" data-level="5.8" data-path="Chapter4.html"><a href="Chapter4.html#secinājumi"><i class="fa fa-check"></i><b>5.8</b> Secinājumi</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="Chapter5.html"><a href="Chapter5.html"><i class="fa fa-check"></i><b>6</b> Ekoģeogrāfiskie mainīgie</a>
<ul>
<li class="chapter" data-level="6.1" data-path="Chapter5.html"><a href="Chapter5.html#Chapter5.1"><i class="fa fa-check"></i><b>6.1</b> Reljefs</a>
<ul>
<li class="chapter" data-level="6.1.1" data-path="Chapter5.html"><a href="Chapter5.html#dis_area_r500"><i class="fa fa-check"></i><b>6.1.1</b> DiS_area_r500</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="Chapter5.html"><a href="Chapter5.html#Chapter5.2"><i class="fa fa-check"></i><b>6.2</b> Klimats</a></li>
<li class="chapter" data-level="6.3" data-path="Chapter5.html"><a href="Chapter5.html#Chapter5.3"><i class="fa fa-check"></i><b>6.3</b> Satelītindeksi</a></li>
<li class="chapter" data-level="6.4" data-path="Chapter5.html"><a href="Chapter5.html#Chapter5.4"><i class="fa fa-check"></i><b>6.4</b> Augsne</a></li>
<li class="chapter" data-level="6.5" data-path="Chapter5.html"><a href="Chapter5.html#Chapter5.5"><i class="fa fa-check"></i><b>6.5</b> Ceļi</a></li>
<li class="chapter" data-level="6.6" data-path="Chapter5.html"><a href="Chapter5.html#Chapter5.6"><i class="fa fa-check"></i><b>6.6</b> Eiklīda distances</a></li>
<li class="chapter" data-level="6.7" data-path="Chapter5.html"><a href="Chapter5.html#Chapter5.7"><i class="fa fa-check"></i><b>6.7</b> Malas</a></li>
<li class="chapter" data-level="6.8" data-path="Chapter5.html"><a href="Chapter5.html#Chapter5.8"><i class="fa fa-check"></i><b>6.8</b> Ūdeņi</a></li>
<li class="chapter" data-level="6.9" data-path="Chapter5.html"><a href="Chapter5.html#Chapter5.9"><i class="fa fa-check"></i><b>6.9</b> Lauki</a></li>
<li class="chapter" data-level="6.10" data-path="Chapter5.html"><a href="Chapter5.html#Chapter5.10"><i class="fa fa-check"></i><b>6.10</b> Meži</a></li>
<li class="chapter" data-level="6.11" data-path="Chapter5.html"><a href="Chapter5.html#Chapter5.11"><i class="fa fa-check"></i><b>6.11</b> Citi</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="Chapter6.html"><a href="Chapter6.html"><i class="fa fa-check"></i><b>7</b> Novērojumu atlase</a>
<ul>
<li class="chapter" data-level="7.1" data-path="Chapter6.html"><a href="Chapter6.html#Chapter6.1"><i class="fa fa-check"></i><b>7.1</b> Datu avoti</a></li>
<li class="chapter" data-level="7.2" data-path="Chapter6.html"><a href="Chapter6.html#Chapter6.2"><i class="fa fa-check"></i><b>7.2</b> Nomenklatūra</a></li>
<li class="chapter" data-level="7.3" data-path="Chapter6.html"><a href="Chapter6.html#Chapter6.3"><i class="fa fa-check"></i><b>7.3</b> Atrašanās Latvijā</a></li>
<li class="chapter" data-level="7.4" data-path="Chapter6.html"><a href="Chapter6.html#Chapter6.4"><i class="fa fa-check"></i><b>7.4</b> Datums un laiks</a></li>
<li class="chapter" data-level="7.5" data-path="Chapter6.html"><a href="Chapter6.html#Chapter6.5"><i class="fa fa-check"></i><b>7.5</b> Ligzdošanas pazīmes</a></li>
<li class="chapter" data-level="7.6" data-path="Chapter6.html"><a href="Chapter6.html#Chapter6.6"><i class="fa fa-check"></i><b>7.6</b> Dublieri</a></li>
<li class="chapter" data-level="7.7" data-path="Chapter6.html"><a href="Chapter6.html#Chapter6.7"><i class="fa fa-check"></i><b>7.7</b> Novietojums</a></li>
<li class="chapter" data-level="7.8" data-path="Chapter6.html"><a href="Chapter6.html#Chapter6.8"><i class="fa fa-check"></i><b>7.8</b> Sezonalitāte</a></li>
<li class="chapter" data-level="7.9" data-path="Chapter6.html"><a href="Chapter6.html#Chapter6.9"><i class="fa fa-check"></i><b>7.9</b> Vides pārmaiņas</a></li>
<li class="chapter" data-level="7.10" data-path="Chapter6.html"><a href="Chapter6.html#Chapter6.10"><i class="fa fa-check"></i><b>7.10</b> Papildkritēriji</a></li>
<li class="chapter" data-level="7.11" data-path="Chapter6.html"><a href="Chapter6.html#Chapter6.11"><i class="fa fa-check"></i><b>7.11</b> Ligzdošanas ticamība</a></li>
<li class="chapter" data-level="7.12" data-path="Chapter6.html"><a href="Chapter6.html#Chapter6.12"><i class="fa fa-check"></i><b>7.12</b> Kvadrātu skaits</a></li>
<li class="chapter" data-level="7.13" data-path="Chapter6.html"><a href="Chapter6.html#Chapter6.13"><i class="fa fa-check"></i><b>7.13</b> Rezultāti</a></li>
<li class="chapter" data-level="7.14" data-path="Chapter6.html"><a href="Chapter6.html#Chapter6.14"><i class="fa fa-check"></i><b>7.14</b> Uzticamās klātbūtnes vietas</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="Chapter7.html"><a href="Chapter7.html"><i class="fa fa-check"></i><b>8</b> Sugu izplatības (dzīvotņu piemērotības) modeļi</a>
<ul>
<li class="chapter" data-level="8.1" data-path="Chapter7.html"><a href="Chapter7.html#sākotnēji-izvēlēto-pazīmju-neatkarība-un-egv-atlases-otrā-kārta-vif"><i class="fa fa-check"></i><b>8.1</b> Sākotnēji izvēlēto pazīmju neatkarība un EGV atlases otrā kārta (VIF)</a></li>
<li class="chapter" data-level="8.2" data-path="Chapter7.html"><a href="Chapter7.html#vidi-kopumā-raksturojoši-fona-punkti"><i class="fa fa-check"></i><b>8.2</b> Vidi kopumā raksturojoši fona punkti</a></li>
<li class="chapter" data-level="8.3" data-path="Chapter7.html"><a href="Chapter7.html#vienkāršots-modelis-egv-noslēguma-atlasei"><i class="fa fa-check"></i><b>8.3</b> Vienkāršots modelis EGV noslēguma atlasei</a></li>
<li class="chapter" data-level="8.4" data-path="Chapter7.html"><a href="Chapter7.html#modeļa-parametrizācija"><i class="fa fa-check"></i><b>8.4</b> Modeļa parametrizācija</a></li>
<li class="chapter" data-level="8.5" data-path="Chapter7.html"><a href="Chapter7.html#labākās-parametrizācijas-izvēle"><i class="fa fa-check"></i><b>8.5</b> Labākās parametrizācijas izvēle</a></li>
<li class="chapter" data-level="8.6" data-path="Chapter7.html"><a href="Chapter7.html#labākā-modeļa-rezultāti"><i class="fa fa-check"></i><b>8.6</b> Labākā modeļa rezultāti</a></li>
<li class="chapter" data-level="8.7" data-path="Chapter7.html"><a href="Chapter7.html#rezultāta-uzticamības-izvērtējums"><i class="fa fa-check"></i><b>8.7</b> Rezultāta uzticamības izvērtējums</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="Chapter8.html"><a href="Chapter8.html"><i class="fa fa-check"></i><b>9</b> SDM pēcapstrāde</a>
<ul>
<li class="chapter" data-level="9.1" data-path="Chapter8.html"><a href="Chapter8.html#ekoloģiskās-nišas-dziļumi"><i class="fa fa-check"></i><b>9.1</b> Ekoloģiskās nišas dziļumi</a></li>
<li class="chapter" data-level="9.2" data-path="Chapter8.html"><a href="Chapter8.html#saistība-ar-aizsargājamām-teritorijām"><i class="fa fa-check"></i><b>9.2</b> Saistība ar aizsargājamām teritorijām</a></li>
<li class="chapter" data-level="9.3" data-path="Chapter8.html"><a href="Chapter8.html#saistība-ar-aizsardzības-režīmiem"><i class="fa fa-check"></i><b>9.3</b> Saistība ar aizsardzības režīmiem</a></li>
<li class="chapter" data-level="9.4" data-path="Chapter8.html"><a href="Chapter8.html#saistība-ar-ekosistēmām"><i class="fa fa-check"></i><b>9.4</b> Saistība ar ekosistēmām</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="Chapter9.html"><a href="Chapter9.html"><i class="fa fa-check"></i><b>10</b> Vietu prioritizēšana aizsardzībai</a>
<ul>
<li class="chapter" data-level="10.1" data-path="Chapter9.html"><a href="Chapter9.html#ik-sugas-aizsardzībai-prioritārās-vietas"><i class="fa fa-check"></i><b>10.1</b> Ik sugas aizsardzībai prioritārās vietas</a></li>
<li class="chapter" data-level="10.2" data-path="Chapter9.html"><a href="Chapter9.html#daudzsugu-pieeja-dabas-aizsardzības-plānošanai"><i class="fa fa-check"></i><b>10.2</b> Daudzsugu pieeja dabas aizsardzības plānošanai</a>
<ul>
<li class="chapter" data-level="10.2.1" data-path="Chapter9.html"><a href="Chapter9.html#mežu-putnu-aizsardzībai-prioritārās-vietas"><i class="fa fa-check"></i><b>10.2.1</b> Mežu (putnu) aizsardzībai prioritārās vietas</a></li>
<li class="chapter" data-level="10.2.2" data-path="Chapter9.html"><a href="Chapter9.html#lauku-putnu-aizsardzībai-prioritārās-vietas"><i class="fa fa-check"></i><b>10.2.2</b> Lauku (putnu) aizsardzībai prioritārās vietas</a></li>
<li class="chapter" data-level="10.2.3" data-path="Chapter9.html"><a href="Chapter9.html#mitrāju-putnu-aizsardzībai-prioritārās-vietas"><i class="fa fa-check"></i><b>10.2.3</b> Mitrāju (putnu) aizsardzībai prioritārās vietas</a></li>
<li class="chapter" data-level="10.2.4" data-path="Chapter9.html"><a href="Chapter9.html#ūdeņu-putnu-aizsardzībai-prioritārās-vietas"><i class="fa fa-check"></i><b>10.2.4</b> Ūdeņu (putnu) aizsardzībai prioritārās vietas</a></li>
<li class="chapter" data-level="10.2.5" data-path="Chapter9.html"><a href="Chapter9.html#vietu-ar-skraju-veģetāciju-putnu-aizsardzībai-prioritārās-vietas"><i class="fa fa-check"></i><b>10.2.5</b> Vietu ar skraju veģetāciju (putnu) aizsardzībai prioritārās vietas</a></li>
<li class="chapter" data-level="10.2.6" data-path="Chapter9.html"><a href="Chapter9.html#valstī-kopumā"><i class="fa fa-check"></i><b>10.2.6</b> Valstī kopumā</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="11" data-path="Chapter10.html"><a href="Chapter10.html"><i class="fa fa-check"></i><b>11</b> Rezultāti</a>
<ul>
<li class="chapter" data-level="11.1" data-path="Chapter10.html"><a href="Chapter10.html#Chapter10.1"><i class="fa fa-check"></i><b>11.1</b> Individuālu sugu rezultāti</a>
<ul>
<li class="chapter" data-level="11.1.1" data-path="Chapter10.html"><a href="Chapter10.html#cotcot---paipala-coturnix-coturnix"><i class="fa fa-check"></i><b>11.1.1</b> (1) COTCOT - paipala <em>Coturnix coturnix</em></a></li>
<li class="chapter" data-level="11.1.2" data-path="Chapter10.html"><a href="Chapter10.html#perper---laukirbe-perdix-perdix"><i class="fa fa-check"></i><b>11.1.2</b> (2) PERPER - laukirbe <em>Perdix perdix</em></a></li>
</ul></li>
<li class="chapter" data-level="11.2" data-path="Chapter10.html"><a href="Chapter10.html#Chapter10.2"><i class="fa fa-check"></i><b>11.2</b> Kopējie valsts līmeņa rezultāti</a>
<ul>
<li class="chapter" data-level="11.2.1" data-path="Chapter10.html"><a href="Chapter10.html#Chapter10.2.1"><i class="fa fa-check"></i><b>11.2.1</b> Mežu (putnu) aizsardzībai prioritārās vietas</a></li>
<li class="chapter" data-level="11.2.2" data-path="Chapter10.html"><a href="Chapter10.html#Chapter10.2.2"><i class="fa fa-check"></i><b>11.2.2</b> Lauku (putnu) aizsardzībai prioritārās vietas</a></li>
<li class="chapter" data-level="11.2.3" data-path="Chapter10.html"><a href="Chapter10.html#Chapter10.2.3"><i class="fa fa-check"></i><b>11.2.3</b> Mitrāju (putnu) aizsardzībai prioritārās vietas</a></li>
<li class="chapter" data-level="11.2.4" data-path="Chapter10.html"><a href="Chapter10.html#Chapter10.2.4"><i class="fa fa-check"></i><b>11.2.4</b> Ūdeņu (putnu) aizsardzībai prioritārās vietas</a></li>
<li class="chapter" data-level="11.2.5" data-path="Chapter10.html"><a href="Chapter10.html#Chapter10.2.5"><i class="fa fa-check"></i><b>11.2.5</b> Vietu ar skraju veģetāciju (putnu) aizsardzībai prioritārās vietas</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="chapter" data-level="12" data-path="hello-bookdown.html"><a href="hello-bookdown.html"><i class="fa fa-check"></i><b>12</b> Hello bookdown</a>
<ul>
<li class="chapter" data-level="12.1" data-path="hello-bookdown.html"><a href="hello-bookdown.html#a-section"><i class="fa fa-check"></i><b>12.1</b> A section</a>
<ul>
<li class="chapter" data-level="" data-path="hello-bookdown.html"><a href="hello-bookdown.html#an-unnumbered-section"><i class="fa fa-check"></i>An unnumbered section</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="13" data-path="cross.html"><a href="cross.html"><i class="fa fa-check"></i><b>13</b> Cross-references</a>
<ul>
<li class="chapter" data-level="13.1" data-path="cross.html"><a href="cross.html#chapters-and-sub-chapters"><i class="fa fa-check"></i><b>13.1</b> Chapters and sub-chapters</a></li>
<li class="chapter" data-level="13.2" data-path="cross.html"><a href="cross.html#captioned-figures-and-tables"><i class="fa fa-check"></i><b>13.2</b> Captioned figures and tables</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="parts.html"><a href="parts.html"><i class="fa fa-check"></i><b>14</b> Parts</a></li>
<li class="chapter" data-level="15" data-path="footnotes-and-citations.html"><a href="footnotes-and-citations.html"><i class="fa fa-check"></i><b>15</b> Footnotes and citations</a>
<ul>
<li class="chapter" data-level="15.1" data-path="footnotes-and-citations.html"><a href="footnotes-and-citations.html#footnotes"><i class="fa fa-check"></i><b>15.1</b> Footnotes</a></li>
<li class="chapter" data-level="15.2" data-path="footnotes-and-citations.html"><a href="footnotes-and-citations.html#citations"><i class="fa fa-check"></i><b>15.2</b> Citations</a></li>
</ul></li>
<li class="chapter" data-level="16" data-path="blocks.html"><a href="blocks.html"><i class="fa fa-check"></i><b>16</b> Blocks</a>
<ul>
<li class="chapter" data-level="16.1" data-path="blocks.html"><a href="blocks.html#equations"><i class="fa fa-check"></i><b>16.1</b> Equations</a></li>
<li class="chapter" data-level="16.2" data-path="blocks.html"><a href="blocks.html#theorems-and-proofs"><i class="fa fa-check"></i><b>16.2</b> Theorems and proofs</a></li>
<li class="chapter" data-level="16.3" data-path="blocks.html"><a href="blocks.html#callout-blocks"><i class="fa fa-check"></i><b>16.3</b> Callout blocks</a></li>
</ul></li>
<li class="chapter" data-level="17" data-path="sharing-your-book.html"><a href="sharing-your-book.html"><i class="fa fa-check"></i><b>17</b> Sharing your book</a>
<ul>
<li class="chapter" data-level="17.1" data-path="sharing-your-book.html"><a href="sharing-your-book.html#publishing"><i class="fa fa-check"></i><b>17.1</b> Publishing</a></li>
<li class="chapter" data-level="17.2" data-path="sharing-your-book.html"><a href="sharing-your-book.html#pages"><i class="fa fa-check"></i><b>17.2</b> 404 pages</a></li>
<li class="chapter" data-level="17.3" data-path="sharing-your-book.html"><a href="sharing-your-book.html#metadata-for-sharing"><i class="fa fa-check"></i><b>17.3</b> Metadata for sharing</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="references-1.html"><a href="references-1.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Putnu sugu izplatības modelēšana biodaudzveidības aizsardzībai: materiāli reproducēšanai</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="Chapter4" class="section level1 hasAnchor" number="5">
<h1><span class="header-section-number">5</span> <em>Dynamic World</em> izpēte<a href="Chapter4.html#Chapter4" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p><em>Dynamic World</em> (DW) ir relatīvi nesens Zemes novērošanas sistēmu produkts, kurš klasificē zemes segumu un lietojumu (LULC) deviņās kategorijās (0=water, 1=trees, 2=grass, 3=flooded_vegetation, 4=crops, 5=shrub_and_scrub, 6=built, 7=bare, 8=snow_and_ice), katram ESA Copernicus Sentinel-2 attēlam ar identificēto mākoņainību <span class="math inline">\(\le35%\)</span>, pieļaujot filtrēšanu un dažādu agregāciju veidošanu <span class="citation">(<a href="#ref-DynWorld">Brown et al., 2022</a>)</span>. Salīdzinot ar dažādiem statiskākiem (produktu veidā sagatavotiem konkrētiem gadiem ar smagnēju projicēšanu citiem gadiem) un/vai konkrētu ekosistēmas daļu raksturošanai paredzētiem, piemēram <em>EU Crop Map</em> <span class="citation">(<a href="#ref-CropMap2022">Ghassemi et al., 2024</a>)</span> un <em>ELULC-10</em> <span class="citation">(<a href="#ref-ELULC10">Mirmazloumi et al., 2022</a>)</span>, DW neapšaubāmi ir ar lielākām sagaidāmajām kļūdām pie klašu (gēotelpiskajām) robežām, tomēr labāku telpisko (klasificēti ir visas izmantojamās satelītainas, nevis vadoties pēc kādas vidi atpazīstošas maskas) un temporālo pārklājumu (dinamiska un tuvu reāllaikam klasifikācijas pieejamība ik satelītainai, nevis atsevišķas projekcijas laikā). Dažādu nesen radīto augstas izšķirtspējas LULC klasifikatoru salīdzinājumos, piemēram, <span class="citation">(<a href="#ref-LULC10salidzinajums_Venter">Venter et al., 2022</a>)</span> un <span class="citation">(<a href="#ref-LULC10salidzinajums_Xu">Xu et al., 2024</a>)</span>, ir konstatētas dažādas atšķirības starp tiem, turklāt DW nav bijis uzskatāms par precīzāko, jo sevišķi spējā detektēt relatīvi šaurus līnijaveida objektus un saistībā ar neironu tīklos balstīto pieeju tieksmi pārspīlēt vertikāli strukturētās klases, tomēr tam ir augstākā temporālā pieejamība. Par šajos salīdzinājumos precīzāko uzskatāmajam <em>ESA WorldCover</em> brīvi pieejama ir informācijai tikai par 2020. un 2021. gadiem (<a href="https://collections.sentinel-hub.com/worldcover/" class="uri">https://collections.sentinel-hub.com/worldcover/</a>). Augstās temporālās pieejamības dēļ, DW izpēte turpināta, jo pat, ja klases nav vienmēr korekti atpazītas, ir vērts izpētīt spēju atpazīt pārmaiņas to sastopamībā.</p>
<p>Tā kā šī projekta komandai nav zināmi izsekojami (caurspīdīgi, reproducējami) Latvijā veikti DW klasifikācijas un tās pārmaiņu uzticamības pētījumi, šī resursa izpēte veikta projekta ietvaros. Izpētei ir sekojoši <strong>mērķi</strong>:</p>
<ol style="list-style-type: decimal">
<li><p>noskaidrot DW izmantošanas iespējas LĢIA topogrāfiskās kartes (un citu ierobežotas pieejamības resursu) aizstāšanai sugu izplatības modelēšanai;</p></li>
<li><p>noskaidrot labāko sezonu (mēnešu griezumā) Latvijas ainavas (un tās pārmaiņu) raksturošanai dzīvnieku vairošanās un veģetācijas sezonā;</p></li>
<li><p>iegūt informāciju par DW spēju raksturot ainavas pārmaiņas starp gadiem.</p></li>
</ol>
<p>Izpēti fokusējām dzīvnieku vairošanās sezonai, kuras plaši pārklājas ar veģetācijas sezonu, kurā ir sagaidāma augstākā klasifikatoru spēja sniegt informatīvu rezultātu. <strong>Sezonas sākums: aprīlis</strong>, jo:</p>
<ul>
<li><p>šis ir mēnesis, kurā daļa valsts teritorijas vēl var būt zem sniega segas, bet lielākajā teritorijas daļā tas jau būs nokusis;</p></li>
<li><p>šajā mēnesī sākas lapu koku plaukšana, bet tikai sākas, tomēr visbiežāk jau visā valsts teritorijā;</p></li>
<li><p>lakstaugu veģetācija būs sazaļojusi galvenokārt ziemājos, bet ne dabiskajā veģetācijā; protams, uz mēneša beigām dažādi mauriņi u. tml., bet tas vēl nebūs noticis mēneša sākumā;</p></li>
<li><p>vajadzētu būt vēl saglabājušamies sniega kušanas ūdeņiem, ja tādi bija uzkrājušies;</p></li>
</ul>
<p><strong>Sezonas beigas: augusts</strong>, jo:</p>
<ul>
<li><p>tas labi sakrīt ar laiku, kad ligzdošanas un vairošanās sezona ir noslēgusies <em>vairumam</em> dzīvnieku sugu;</p></li>
<li><p>sākas migrāciju sezona, kas gan ierosina, ka jūlijs varētu būt labāks beigu punkts, bet ir vērts pārbaudīt dažādas kombinācijas;</p></li>
<li><p>intensīvi sākas rudens aršanas darbi, kas veido (t.sk. iznīcina) dzīvotnes nākošajai sezonai (pat, ja ietekmēta ziemošana, tās reproduktīvā vai teritoriju aizņemtības izpausme būs novērojama nākošajā sezonā); arī šis sliecas ierosināt, ka jūlijs būtu labāks beigu punkts, bet ir vērts pārbaudīt dažādas kombinācijas;</p></li>
<li><p>šis mēnesis vēl ir svarīgs daudzām bezmugurkaulnieku sugām, to konstatēšanai;</p></li>
</ul>
<p><strong>Soļa garums analīzēm: 2-5 secīgi mēneši</strong>, jo</p>
<ul>
<li><p>tikai viena mēneša izmantošana nebūtu sevišķi laba doma, ja tas ir, piemēram, tikai viens aprīļa mēnesis, varētu būt problēmas ar jebkādu veģetāciju, bet vasaras mēnešos ar ūdeņainajām vietām utml.;</p></li>
<li><p>secīgi, jo savādāk nav loģiski;</p></li>
<li><p>pieci, jo periodā ir tikai pieci;</p></li>
<li><p>kopējais kombināciju skaits sezonalitātes pārbaudēm sanāk desmit (turpmākajos apzīmējumos lietots pirmā un pēdējā mēneša trīs burtu saīsinājumu angļu valodā apvienojums bez atdalītājiem):</p>
<ul>
<li><p>apr-may;</p></li>
<li><p>apr-may-jun;</p></li>
<li><p>apr-may-jun-jul;</p></li>
<li><p>apr-may-jun-jul-aug;</p></li>
<li><p>may-jun;</p></li>
<li><p>may-jun-jul;</p></li>
<li><p>may-jun-jul-aug;</p></li>
<li><p>jun-jul;</p></li>
<li><p>jun-jul-aug;</p></li>
<li><p>jul-aug</p></li>
</ul></li>
</ul>
<p>Mērķa sasniegšanai ir izvirzāmi vairāki <strong>izpētes jautājumi</strong>, kuri ir risināti šīs nodaļas sekojošajās daļās:</p>
<ol start="0" style="list-style-type: decimal">
<li><p>Kuros gados un kādos griezumos DW slāņi nosedz visu Latviju, kāda ir datu multi-temporālā un telpiskā pieejamība?;</p></li>
<li><p>Cik labi tiek atpazītas lauksaimniecības kultūras plašās grupās - nepieciešams, lai šo izmantotu par pamatu turpmākam darbam ainavas klasificēšanā par kultūrām, par kurām nav izpratnes, un vietām, par kurām nav pieejama reģistru informācija, raksturošanai;</p></li>
<li><p>Kāda ir mežaudzes augstuma (atkarībā no valdošās koku sugas) saistība ar DW mežu/koku un krūmu klasēm - nepieciešama, lai veiktu ainavas klasifikāciju par vietām, kurām nav reģistru, izdalītu koku un krūmu pudurus;</p></li>
<li><p>Kāds ir topogrāfiskās kartes ar mitrājiem saistāmo klašu sadalījums DW klasēs, kad ir labākā saistība ar vēlamo klasi (un kura tad tā būtu augstajiem purviem un ūdeņu veģetācijai) - nepieciešams gan ainavas, gan pārmaiņu raksturošanai;</p></li>
<li><p>Kāda ir topogrāfiskās kartes karjeru un kūdras ieguves vietu, kā arī dažādu ceļu saistība ar DW klasēm - nepieciešams gan ainavas, gan pārmaiņu raksturošanai;</p></li>
<li><p>Kāda ir izcirtuma izmēra (un formas) saistība ar DW klasēm - nepieciešams gan ainavas, gan pārmaiņu raksturošanai;</p></li>
<li><p>Kāda DW klase tiek piešķirta aramzemēm, kuras pirms gada transformētas no zālājiem - nepieciešams ainavas pārmaiņām.</p></li>
</ol>
<p><strong>Kopējie uzstādījumi analīžu veikšanai</strong></p>
<ul>
<li><p>poligonu atlasei izmantojam ‘set.seed(0)’, lai nodrošinātu rezultātu reproducējamību;</p></li>
<li><p>laika taupīšanai, ik analizei nejauši izlozējam 999 vai izmantojam visus pieejamos poligonus;</p></li>
<li><p>ik analīzi veicam kā zonālo statistiku, aptverot visu pētāmo plankumu;</p></li>
<li><p>DW ik periodam ir resamplēts sakritībai ar references 10 m šūnu un ietver tikai Latvijas teritoriju.</p></li>
</ul>
<p>DW ievades informācija - rastra slānis katrai sezonai katrā gadā - sagtavots Google Earth Engine (GEE) platformā <span class="citation">(<a href="#ref-GEEpaper">Gorelick et al., 2017</a>)</span>, izmantojot <a href="https://code.earthengine.google.com/941bb1a16331727787bb3fc1bbbda95b?noload=true">replicēšanas skriptu</a>. Lai izmantotu šo skriptu, ir nepieciešams <a href="https://code.earthengine.google.com/register">GEE konts un projekts</a> un pietiekošs apjoms vietas Google Drive diskā. Izpildot komandrindas tiks piedāvāta lejuplāde failam, kas aptver laika periodu no vērtības 7. rindā līdz vērtībai 8. rindā (faila nosaukums norādāms 32. rindā, tā apraksts - 33. rindā un direktorija Google diskā - 31. rindā vai tas viss norādāms apstiprinot saglabāšanau) - šis skripts nav optimizēts visu sezonālo griezumu visiem gadiem sagatavošanai, lai reproducētu vai paplašinātu šo izpēti, tās nepieciešams manuāli izmainīt.</p>
<p>Pēc komandrindu izpildes un rezultātu sagatavošanas Google Drive diskā, ir redzams, ka katrs visu Latviju aptverošais slānis ir sadalīts vairākās lapās. Tas ir tādēļ, ka, lai nodrošinātu nulles patieso vērtību (klase “water”, nevis fons), slāņi kodēti kā <em>Float</em>, nevis veselie skaitļi. Visas šīs lapas ir nepieciešams lejuplādēt, sekojošās R komandrindas tās apvieno, nodrošinot koordinātu sistēmas un pikseļu atbilstību references rastram.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="Chapter4.html#cb11-1" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb11-2"><a href="Chapter4.html#cb11-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb11-3"><a href="Chapter4.html#cb11-3" tabindex="-1"></a></span>
<span id="cb11-4"><a href="Chapter4.html#cb11-4" tabindex="-1"></a><span class="co"># reference</span></span>
<span id="cb11-5"><a href="Chapter4.html#cb11-5" tabindex="-1"></a>paraugs<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./LV10m_10km.tif&quot;</span>)</span>
<span id="cb11-6"><a href="Chapter4.html#cb11-6" tabindex="-1"></a></span>
<span id="cb11-7"><a href="Chapter4.html#cb11-7" tabindex="-1"></a><span class="co"># saraksts ar lejupielādētajiem failiem, pieņemot, ka tie atrodas direktorijā </span></span>
<span id="cb11-8"><a href="Chapter4.html#cb11-8" tabindex="-1"></a><span class="co"># &quot;DWE_float&quot;</span></span>
<span id="cb11-9"><a href="Chapter4.html#cb11-9" tabindex="-1"></a>faili<span class="ot">=</span><span class="fu">data.frame</span>(<span class="at">faili=</span><span class="fu">list.files</span>(<span class="st">&quot;./DWE_float/&quot;</span>))</span>
<span id="cb11-10"><a href="Chapter4.html#cb11-10" tabindex="-1"></a>faili<span class="sc">$</span>celi_sakums<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./DWE_float/&quot;</span>,faili<span class="sc">$</span>faili)</span>
<span id="cb11-11"><a href="Chapter4.html#cb11-11" tabindex="-1"></a></span>
<span id="cb11-12"><a href="Chapter4.html#cb11-12" tabindex="-1"></a><span class="co"># Korekti projicētu mozaīku sagatavošana</span></span>
<span id="cb11-13"><a href="Chapter4.html#cb11-13" tabindex="-1"></a><span class="co"># failu nosaukumi un ceļš saglabāšanai</span></span>
<span id="cb11-14"><a href="Chapter4.html#cb11-14" tabindex="-1"></a>faili<span class="ot">=</span>faili <span class="sc">%&gt;%</span> </span>
<span id="cb11-15"><a href="Chapter4.html#cb11-15" tabindex="-1"></a>  <span class="fu">separate</span>(faili,<span class="at">into=</span><span class="fu">c</span>(<span class="st">&quot;DW&quot;</span>,<span class="st">&quot;gads&quot;</span>,<span class="st">&quot;periods&quot;</span>,<span class="st">&quot;parejais&quot;</span>),<span class="at">sep=</span><span class="st">&quot;_&quot;</span>,<span class="at">remove =</span> <span class="cn">FALSE</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb11-16"><a href="Chapter4.html#cb11-16" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">unikalais=</span><span class="fu">paste0</span>(DW,<span class="st">&quot;_&quot;</span>,gads,<span class="st">&quot;_&quot;</span>,periods),</span>
<span id="cb11-17"><a href="Chapter4.html#cb11-17" tabindex="-1"></a>         <span class="at">mosaic_name=</span><span class="fu">paste0</span>(unikalais,<span class="st">&quot;.tif&quot;</span>),</span>
<span id="cb11-18"><a href="Chapter4.html#cb11-18" tabindex="-1"></a>         <span class="at">masaic_cels=</span><span class="fu">paste0</span>(<span class="st">&quot;./DWE_mosaic/&quot;</span>,mosaic_name))</span>
<span id="cb11-19"><a href="Chapter4.html#cb11-19" tabindex="-1"></a></span>
<span id="cb11-20"><a href="Chapter4.html#cb11-20" tabindex="-1"></a><span class="co"># unikālie failu nosaukumi cikla vadībai</span></span>
<span id="cb11-21"><a href="Chapter4.html#cb11-21" tabindex="-1"></a>unikalie<span class="ot">=</span><span class="fu">levels</span>(<span class="fu">factor</span>(faili<span class="sc">$</span>unikalais))</span>
<span id="cb11-22"><a href="Chapter4.html#cb11-22" tabindex="-1"></a></span>
<span id="cb11-23"><a href="Chapter4.html#cb11-23" tabindex="-1"></a><span class="co"># cikls uzdevuma veikšanai</span></span>
<span id="cb11-24"><a href="Chapter4.html#cb11-24" tabindex="-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="fu">seq_along</span>(unikalie)){</span>
<span id="cb11-25"><a href="Chapter4.html#cb11-25" tabindex="-1"></a>  unikalais<span class="ot">=</span>faili <span class="sc">%&gt;%</span> <span class="fu">filter</span>(unikalais<span class="sc">==</span>unikalie[i])</span>
<span id="cb11-26"><a href="Chapter4.html#cb11-26" tabindex="-1"></a>  beigu_cels<span class="ot">=</span><span class="fu">unique</span>(unikalais<span class="sc">$</span>masaic_cels)</span>
<span id="cb11-27"><a href="Chapter4.html#cb11-27" tabindex="-1"></a>  </span>
<span id="cb11-28"><a href="Chapter4.html#cb11-28" tabindex="-1"></a>  <span class="co"># ik slānis sastāv no divām lapām</span></span>
<span id="cb11-29"><a href="Chapter4.html#cb11-29" tabindex="-1"></a>  viens<span class="ot">=</span><span class="fu">rast</span>(unikalais<span class="sc">$</span>celi_sakums[<span class="dv">1</span>])</span>
<span id="cb11-30"><a href="Chapter4.html#cb11-30" tabindex="-1"></a>  divi<span class="ot">=</span><span class="fu">rast</span>(unikalais<span class="sc">$</span>celi_sakums[<span class="dv">2</span>])</span>
<span id="cb11-31"><a href="Chapter4.html#cb11-31" tabindex="-1"></a>  </span>
<span id="cb11-32"><a href="Chapter4.html#cb11-32" tabindex="-1"></a>  viens2<span class="ot">=</span><span class="fu">project</span>(viens,paraugs)</span>
<span id="cb11-33"><a href="Chapter4.html#cb11-33" tabindex="-1"></a>  divi2<span class="ot">=</span><span class="fu">project</span>(divi,paraugs)</span>
<span id="cb11-34"><a href="Chapter4.html#cb11-34" tabindex="-1"></a>  </span>
<span id="cb11-35"><a href="Chapter4.html#cb11-35" tabindex="-1"></a>  mozaika<span class="ot">=</span><span class="fu">mosaic</span>(viens2,divi2,<span class="at">fun=</span><span class="st">&quot;first&quot;</span>)</span>
<span id="cb11-36"><a href="Chapter4.html#cb11-36" tabindex="-1"></a>  maskets<span class="ot">=</span><span class="fu">mask</span>(mozaika,paraugs,<span class="at">filename=</span>beigu_cels,<span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb11-37"><a href="Chapter4.html#cb11-37" tabindex="-1"></a>}</span></code></pre></div>
<div id="q0-dw-nosegums" class="section level2 hasAnchor" number="5.1">
<h2><span class="header-section-number">5.1</span> Q0: DW nosegums<a href="Chapter4.html#q0-dw-nosegums" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Katram gadam (2015-2023) ik iepriekš minētajam sezonas griezumam DW datu pārklājum ir apskatāmi zemāk esošajā attēlā <a href="Chapter4.html#fig:DWq00">5.1</a>. Kā jau sagaidāms, 2015. gadā ir trūcīgs nosegums. Pārskata periodā resurss ir samērā droši izmantojams kopš 2018. gada, kopš 2016. gada pielietojamība ir vērtējama, atkarībā no mērķiem un vērtējama saistībā ar sezonas griezumiem.</p>
<div class="figure"><span style="display:block;" id="fig:DWq00"></span>
<img src="Atteli/ch004_missings.png" alt="DW rezultātu pieejamība dažādos sezonālajos griezumos kopš Sentinel-2 programmas datu pieejamības. Pikseļu krāsa attēla daļās raksturo 1 km šūnās esošo klasifikācijas iztrūkumu īpatsvaru, savukārt skaitļi attēla daļās - kopējo klasifikācijas robu īpatsvaru procentos (%)." width="100%" />
<p class="caption">
Figure 5.1: DW rezultātu pieejamība dažādos sezonālajos griezumos kopš Sentinel-2 programmas datu pieejamības. Pikseļu krāsa attēla daļās raksturo 1 km šūnās esošo klasifikācijas iztrūkumu īpatsvaru, savukārt skaitļi attēla daļās - kopējo klasifikācijas robu īpatsvaru procentos (%).
</p>
</div>
<p><br></p>
<p>Komandu rindas reproducēšanai:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="Chapter4.html#cb12-1" tabindex="-1"></a><span class="co"># libs</span></span>
<span id="cb12-2"><a href="Chapter4.html#cb12-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb12-3"><a href="Chapter4.html#cb12-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb12-4"><a href="Chapter4.html#cb12-4" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(arrow)) {<span class="fu">install.packages</span>(<span class="st">&quot;arrow&quot;</span>); <span class="fu">require</span>(arrow)}</span>
<span id="cb12-5"><a href="Chapter4.html#cb12-5" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(sfarrow)) {<span class="fu">install.packages</span>(<span class="st">&quot;sfarrow&quot;</span>); <span class="fu">require</span>(sfarrow)}</span>
<span id="cb12-6"><a href="Chapter4.html#cb12-6" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(exactextractr)) {<span class="fu">install.packages</span>(<span class="st">&quot;exactextractr&quot;</span>); <span class="fu">require</span>(exactextractr)}</span>
<span id="cb12-7"><a href="Chapter4.html#cb12-7" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(openxlsx)) {<span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>); <span class="fu">require</span>(openxlsx)}</span>
<span id="cb12-8"><a href="Chapter4.html#cb12-8" tabindex="-1"></a></span>
<span id="cb12-9"><a href="Chapter4.html#cb12-9" tabindex="-1"></a><span class="co"># 10 m rastra template</span></span>
<span id="cb12-10"><a href="Chapter4.html#cb12-10" tabindex="-1"></a>paraugs<span class="ot">=</span><span class="fu">rast</span>(<span class="st">&quot;./LV10m_10km.tif&quot;</span>)</span>
<span id="cb12-11"><a href="Chapter4.html#cb12-11" tabindex="-1"></a></span>
<span id="cb12-12"><a href="Chapter4.html#cb12-12" tabindex="-1"></a><span class="co"># 100 m režģis</span></span>
<span id="cb12-13"><a href="Chapter4.html#cb12-13" tabindex="-1"></a>kvadrati<span class="ot">=</span><span class="fu">st_read_parquet</span>(<span class="st">&quot;./tikls1k_sauzeme.parquet&quot;</span>)</span>
<span id="cb12-14"><a href="Chapter4.html#cb12-14" tabindex="-1"></a></span>
<span id="cb12-15"><a href="Chapter4.html#cb12-15" tabindex="-1"></a><span class="co"># robu analīze</span></span>
<span id="cb12-16"><a href="Chapter4.html#cb12-16" tabindex="-1"></a>failu_objekts2<span class="ot">=</span><span class="fu">data.frame</span>(<span class="at">faili=</span><span class="fu">list.files</span>(<span class="st">&quot;./DWE_mosaic/&quot;</span>))</span>
<span id="cb12-17"><a href="Chapter4.html#cb12-17" tabindex="-1"></a>failu_objekts2<span class="sc">$</span>celi_sakums<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./DWE_mosaic/&quot;</span>,failu_objekts2<span class="sc">$</span>faili)</span>
<span id="cb12-18"><a href="Chapter4.html#cb12-18" tabindex="-1"></a>failu_objekts2<span class="sc">$</span>celi_beigas<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./DWEm_missing/&quot;</span>,<span class="st">&quot;missing_&quot;</span>,failu_objekts2<span class="sc">$</span>faili)</span>
<span id="cb12-19"><a href="Chapter4.html#cb12-19" tabindex="-1"></a>failu_objekts2<span class="ot">=</span>failu_objekts2 <span class="sc">%&gt;%</span> </span>
<span id="cb12-20"><a href="Chapter4.html#cb12-20" tabindex="-1"></a>  <span class="fu">separate</span>(faili,<span class="at">into=</span><span class="fu">c</span>(<span class="st">&quot;DW&quot;</span>,<span class="st">&quot;gads&quot;</span>,<span class="st">&quot;sezona&quot;</span>,<span class="st">&quot;ext&quot;</span>),<span class="at">remove =</span> <span class="cn">FALSE</span>)</span>
<span id="cb12-21"><a href="Chapter4.html#cb12-21" tabindex="-1"></a>failu_objekts2<span class="sc">$</span>celi_parquet<span class="ot">=</span><span class="fu">paste0</span>(<span class="st">&quot;./DWEm_missing/&quot;</span>,<span class="st">&quot;missing_&quot;</span>,<span class="st">&quot;DW_&quot;</span>,</span>
<span id="cb12-22"><a href="Chapter4.html#cb12-22" tabindex="-1"></a>                                   failu_objekts2<span class="sc">$</span>gads,<span class="st">&quot;_&quot;</span>,</span>
<span id="cb12-23"><a href="Chapter4.html#cb12-23" tabindex="-1"></a>                                   failu_objekts2<span class="sc">$</span>sezona,</span>
<span id="cb12-24"><a href="Chapter4.html#cb12-24" tabindex="-1"></a>                                   <span class="st">&quot;.parquet&quot;</span>)</span>
<span id="cb12-25"><a href="Chapter4.html#cb12-25" tabindex="-1"></a>failu_objekts2<span class="sc">$</span>missings<span class="ot">=</span><span class="cn">NA_real_</span></span>
<span id="cb12-26"><a href="Chapter4.html#cb12-26" tabindex="-1"></a><span class="cf">for</span>(j <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(failu_objekts2<span class="sc">$</span>faili)){</span>
<span id="cb12-27"><a href="Chapter4.html#cb12-27" tabindex="-1"></a>    <span class="fu">print</span>(j)</span>
<span id="cb12-28"><a href="Chapter4.html#cb12-28" tabindex="-1"></a>  cels<span class="ot">=</span>failu_objekts2<span class="sc">$</span>celi_sakums[j]</span>
<span id="cb12-29"><a href="Chapter4.html#cb12-29" tabindex="-1"></a>  cels_beigas<span class="ot">=</span>failu_objekts2<span class="sc">$</span>celi_beigas[j]</span>
<span id="cb12-30"><a href="Chapter4.html#cb12-30" tabindex="-1"></a>  cels_parquet<span class="ot">=</span>failu_objekts2<span class="sc">$</span>celi_parquet[j]</span>
<span id="cb12-31"><a href="Chapter4.html#cb12-31" tabindex="-1"></a>  gads<span class="ot">=</span>failu_objekts2<span class="sc">$</span>gads[j]</span>
<span id="cb12-32"><a href="Chapter4.html#cb12-32" tabindex="-1"></a>  sezona<span class="ot">=</span>failu_objekts2<span class="sc">$</span>sezona[j]</span>
<span id="cb12-33"><a href="Chapter4.html#cb12-33" tabindex="-1"></a>  <span class="fu">print</span>(cels)</span>
<span id="cb12-34"><a href="Chapter4.html#cb12-34" tabindex="-1"></a>  <span class="fu">print</span>(cels_beigas)</span>
<span id="cb12-35"><a href="Chapter4.html#cb12-35" tabindex="-1"></a>  dw1<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">rast</span>(cels)</span>
<span id="cb12-36"><a href="Chapter4.html#cb12-36" tabindex="-1"></a>  dw2<span class="ot">=</span><span class="fu">classify</span>(dw1,<span class="fu">cbind</span>(<span class="dv">0</span>,<span class="dv">10</span>,<span class="dv">0</span>))</span>
<span id="cb12-37"><a href="Chapter4.html#cb12-37" tabindex="-1"></a>  dw3<span class="ot">=</span>terra<span class="sc">::</span><span class="fu">cover</span>(dw2,paraugs,<span class="at">filename=</span>cels_beigas,<span class="at">overwrite=</span><span class="cn">TRUE</span>)</span>
<span id="cb12-38"><a href="Chapter4.html#cb12-38" tabindex="-1"></a>  iztrukumi<span class="ot">=</span><span class="fu">global</span>(dw3, <span class="st">&quot;mean&quot;</span>, <span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb12-39"><a href="Chapter4.html#cb12-39" tabindex="-1"></a>  failu_objekts2<span class="sc">$</span>missings[j]<span class="ot">=</span><span class="fu">round</span>(iztrukumi<span class="sc">$</span>mean<span class="sc">*</span><span class="dv">100</span>,<span class="dv">2</span>)</span>
<span id="cb12-40"><a href="Chapter4.html#cb12-40" tabindex="-1"></a>  robi_tikla<span class="ot">=</span><span class="fu">exact_extract</span>(dw3,kvadrati,<span class="st">&quot;mean&quot;</span>,<span class="at">max_cells_in_memory=</span><span class="dv">1300000000</span>)</span>
<span id="cb12-41"><a href="Chapter4.html#cb12-41" tabindex="-1"></a>  kvadrati2<span class="ot">=</span>kvadrati</span>
<span id="cb12-42"><a href="Chapter4.html#cb12-42" tabindex="-1"></a>  kvadrati2<span class="sc">$</span>robi_tikla<span class="ot">=</span>robi_tikla</span>
<span id="cb12-43"><a href="Chapter4.html#cb12-43" tabindex="-1"></a>  kvadrati2<span class="sc">$</span>gads<span class="ot">=</span>gads</span>
<span id="cb12-44"><a href="Chapter4.html#cb12-44" tabindex="-1"></a>  kvadrati2<span class="sc">$</span>sezona<span class="ot">=</span>sezona</span>
<span id="cb12-45"><a href="Chapter4.html#cb12-45" tabindex="-1"></a>  <span class="fu">st_write_parquet</span>(kvadrati2,cels_parquet)</span>
<span id="cb12-46"><a href="Chapter4.html#cb12-46" tabindex="-1"></a>}</span>
<span id="cb12-47"><a href="Chapter4.html#cb12-47" tabindex="-1"></a><span class="fu">write.xlsx</span>(failu_objekts2,<span class="st">&quot;./DWmc_missing.xlsx&quot;</span>)</span>
<span id="cb12-48"><a href="Chapter4.html#cb12-48" tabindex="-1"></a></span>
<span id="cb12-49"><a href="Chapter4.html#cb12-49" tabindex="-1"></a><span class="co"># parquet savienošana</span></span>
<span id="cb12-50"><a href="Chapter4.html#cb12-50" tabindex="-1"></a>robu_kvadrati <span class="ot">&lt;-</span> <span class="fu">map_dfr</span>(<span class="fu">list.files</span>(<span class="st">&quot;./DWEm_missing/&quot;</span>,<span class="at">pattern=</span><span class="st">&quot;.parquet&quot;</span>,</span>
<span id="cb12-51"><a href="Chapter4.html#cb12-51" tabindex="-1"></a>                                    <span class="at">full.names =</span> <span class="cn">TRUE</span>), </span>
<span id="cb12-52"><a href="Chapter4.html#cb12-52" tabindex="-1"></a>                 sfarrow<span class="sc">::</span>st_read_parquet, <span class="at">show_col_types =</span> <span class="cn">FALSE</span>)</span>
<span id="cb12-53"><a href="Chapter4.html#cb12-53" tabindex="-1"></a></span>
<span id="cb12-54"><a href="Chapter4.html#cb12-54" tabindex="-1"></a>robu_kvadrati2<span class="ot">=</span>robu_kvadrati <span class="sc">%&gt;%</span> </span>
<span id="cb12-55"><a href="Chapter4.html#cb12-55" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">gads2=</span><span class="fu">as.numeric</span>(gads),</span>
<span id="cb12-56"><a href="Chapter4.html#cb12-56" tabindex="-1"></a>         <span class="at">sezona2=</span><span class="fu">factor</span>(sezona,<span class="at">ordered=</span><span class="cn">TRUE</span>,</span>
<span id="cb12-57"><a href="Chapter4.html#cb12-57" tabindex="-1"></a>                        <span class="at">levels=</span><span class="fu">c</span>(<span class="st">&quot;aprmay&quot;</span>,<span class="st">&quot;aprjun&quot;</span>,<span class="st">&quot;aprjul&quot;</span>,<span class="st">&quot;apraug&quot;</span>,<span class="st">&quot;mayjun&quot;</span>,</span>
<span id="cb12-58"><a href="Chapter4.html#cb12-58" tabindex="-1"></a>                                 <span class="st">&quot;mayjul&quot;</span>,<span class="st">&quot;mayaug&quot;</span>,<span class="st">&quot;junjul&quot;</span>,<span class="st">&quot;junaug&quot;</span>,<span class="st">&quot;julaug&quot;</span>)))</span>
<span id="cb12-59"><a href="Chapter4.html#cb12-59" tabindex="-1"></a></span>
<span id="cb12-60"><a href="Chapter4.html#cb12-60" tabindex="-1"></a>failu_objekts2<span class="ot">=</span>failu_objekts2 <span class="sc">%&gt;%</span> </span>
<span id="cb12-61"><a href="Chapter4.html#cb12-61" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">gads2=</span><span class="fu">as.numeric</span>(gads),</span>
<span id="cb12-62"><a href="Chapter4.html#cb12-62" tabindex="-1"></a>         <span class="at">sezona2=</span><span class="fu">factor</span>(sezona,<span class="at">ordered=</span><span class="cn">TRUE</span>,</span>
<span id="cb12-63"><a href="Chapter4.html#cb12-63" tabindex="-1"></a>                        <span class="at">levels=</span><span class="fu">c</span>(<span class="st">&quot;aprmay&quot;</span>,<span class="st">&quot;aprjun&quot;</span>,<span class="st">&quot;aprjul&quot;</span>,<span class="st">&quot;apraug&quot;</span>,<span class="st">&quot;mayjun&quot;</span>,</span>
<span id="cb12-64"><a href="Chapter4.html#cb12-64" tabindex="-1"></a>                                 <span class="st">&quot;mayjul&quot;</span>,<span class="st">&quot;mayaug&quot;</span>,<span class="st">&quot;junjul&quot;</span>,<span class="st">&quot;junaug&quot;</span>,<span class="st">&quot;julaug&quot;</span>))) <span class="sc">%&gt;%</span> </span>
<span id="cb12-65"><a href="Chapter4.html#cb12-65" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">x=</span><span class="dv">410000</span>,<span class="at">y=</span><span class="dv">210000</span>,</span>
<span id="cb12-66"><a href="Chapter4.html#cb12-66" tabindex="-1"></a>         <span class="at">missings2=</span><span class="fu">paste0</span>(missings,<span class="st">&quot; %&quot;</span>))</span>
<span id="cb12-67"><a href="Chapter4.html#cb12-67" tabindex="-1"></a></span>
<span id="cb12-68"><a href="Chapter4.html#cb12-68" tabindex="-1"></a><span class="co"># rezultāta vizualizācija</span></span>
<span id="cb12-69"><a href="Chapter4.html#cb12-69" tabindex="-1"></a><span class="fu">ggplot</span>()<span class="sc">+</span></span>
<span id="cb12-70"><a href="Chapter4.html#cb12-70" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data=</span>robu_kvadrati2,<span class="fu">aes</span>(<span class="at">fill=</span>robi_tikla,<span class="at">col=</span>robi_tikla))<span class="sc">+</span></span>
<span id="cb12-71"><a href="Chapter4.html#cb12-71" tabindex="-1"></a>  <span class="fu">facet_grid</span>(gads2<span class="sc">~</span>sezona2)<span class="sc">+</span></span>
<span id="cb12-72"><a href="Chapter4.html#cb12-72" tabindex="-1"></a>  <span class="fu">theme_bw</span>()<span class="sc">+</span></span>
<span id="cb12-73"><a href="Chapter4.html#cb12-73" tabindex="-1"></a>  <span class="fu">coord_sf</span>(<span class="at">datum=</span>sf<span class="sc">::</span><span class="fu">st_crs</span>(<span class="dv">3059</span>))<span class="sc">+</span></span>
<span id="cb12-74"><a href="Chapter4.html#cb12-74" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="at">data=</span>failu_objekts2,<span class="fu">aes</span>(<span class="at">x=</span>x,<span class="at">y=</span>y,<span class="at">label=</span>missings2),<span class="at">size=</span><span class="fl">2.5</span>)<span class="sc">+</span></span>
<span id="cb12-75"><a href="Chapter4.html#cb12-75" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">fill=</span><span class="st">&quot;Missing&quot;</span>,<span class="at">col=</span><span class="st">&quot;Missing&quot;</span>)<span class="sc">+</span></span>
<span id="cb12-76"><a href="Chapter4.html#cb12-76" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.ticks =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb12-77"><a href="Chapter4.html#cb12-77" tabindex="-1"></a>        <span class="at">axis.text =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb12-78"><a href="Chapter4.html#cb12-78" tabindex="-1"></a>        <span class="at">axis.title =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb12-79"><a href="Chapter4.html#cb12-79" tabindex="-1"></a>        <span class="at">panel.grid.major =</span> <span class="fu">element_blank</span>())</span>
<span id="cb12-80"><a href="Chapter4.html#cb12-80" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="st">&quot;./pic_missings.png&quot;</span>,<span class="at">height =</span> <span class="dv">3000</span>,<span class="at">width=</span><span class="dv">5000</span>,<span class="at">units=</span><span class="st">&quot;px&quot;</span>)</span></code></pre></div>
</div>
<div id="q1-lauksaimniecības-kultūras" class="section level2 hasAnchor" number="5.2">
<h2><span class="header-section-number">5.2</span> Q1: Lauksaimniecības kultūras<a href="Chapter4.html#q1-lauksaimniecības-kultūras" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Ir tādas kultūras, par kurām ir skaidrs, ka tām ir jāsakrīt ar DW klasēm, tās ir apskatāmas, lai pārbaudītu šīs Zemes novērošanas sistēmu (EO) klasifikācijas korektumu.</p>
<p>Ir tādas kultūras, par kurām nav īsti skaidra šī atbilstība, to ir jānoskaidro pēc pirmās grupas izpētes rezultāta.</p>
<p>Bet ir arī tādas kultūras, par kurām ir zināmas bažas par EO datu klasifikācijas rezultātu precizitātes iespējamību, piemēram, kukurūza un auzas.</p>
<p>Aplūkojam sekojošas izpētes grupas:</p>
<ul>
<li><p>ziemāji aramzemēs, kur nav sagaidāmas problēmas, piemēram, rudzi, ziemas mieži, ziemas kvieši, ziemas tritikāle;</p></li>
<li><p>ziemas rapsis;</p></li>
<li><p>vasarāji aramzemēs, kur nav sagaidāmas problēmas, piemēram, vasaras mieži, vasaras kvieši, vasaras tritikāle;</p></li>
<li><p>vasaras rapsis;</p></li>
<li><p>auzas, jo dažādā izpratnē un pētījumos sarežģīti klasificējas EO datos;</p></li>
<li><p>kukurūza, jo tur ir visādi jautājumi ar augšanu, augstumu un novākšanu - katrā no trim veidiem, lai labāk saprastu šo ainavā un dabas aizsardzībā nozīmīgo grupu;</p></li>
<li><p>papuves, lai labāk izprastu šo klasi;</p></li>
<li><p>ilggadīgi zālāji;</p></li>
<li><p>kultivētās pļavas, lai labāk saprastu šo klasi;</p></li>
<li><p>augļukoki, kur apvieno, augļu koki, ābeles, bumbieres, lai labāk saprastu šo klasi;</p></li>
<li><p>ogu-krūmi, kur apvieno avenes, upenes, jāņogas, ērkšķogas, krūmcidonijas, kazenes, lai labāk saprastu šo klasi;</p></li>
<li><p>zemās ogas, kur apvieno krūmmellenes un lieogu dzērvenes,</p></li>
<li><p>bezatbalsta platības, kur apvieno kodus 620 un 792</p></li>
<li><p>vagu un rušināmkultūras, kuru ilustrēšanai izmantošu kodus 821, 825, 843, 844</p></li>
<li><p>īscirtmeta atvasāji un enerģijas augi, kurā apvienoti kodi 644, 645, 646, 641, 642</p></li>
</ul>
<p>Izmantojam 2023. gada DW sezonālos slāņus. Lai gan šajā izpētes solī fokuss ir uz augstāk minētajām grupām, sugu izplatības modelēšanai ir nepieciešams klasificēt visas kultūras, tādēļ jau uzreiz skatām visas kultūras.</p>
<p>Komandu rindas DW klašu sastopamības izpētei ir zemāk. To ietvaros izmantota <a href="Chapter3.html#Chapter3.1.2">LAD lauku informācija</a> un šajā nodaļā (augstāk) sagatavotās 2023. gada DW sezonālās mozaīkas.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="Chapter4.html#cb13-1" tabindex="-1"></a><span class="co"># libs</span></span>
<span id="cb13-2"><a href="Chapter4.html#cb13-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb13-3"><a href="Chapter4.html#cb13-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb13-4"><a href="Chapter4.html#cb13-4" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(arrow)) {<span class="fu">install.packages</span>(<span class="st">&quot;arrow&quot;</span>); <span class="fu">require</span>(arrow)}</span>
<span id="cb13-5"><a href="Chapter4.html#cb13-5" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(sfarrow)) {<span class="fu">install.packages</span>(<span class="st">&quot;sfarrow&quot;</span>); <span class="fu">require</span>(sfarrow)}</span>
<span id="cb13-6"><a href="Chapter4.html#cb13-6" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(exactextractr)) {<span class="fu">install.packages</span>(<span class="st">&quot;exactextractr&quot;</span>); <span class="fu">require</span>(exactextractr)}</span>
<span id="cb13-7"><a href="Chapter4.html#cb13-7" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(ggview)) {<span class="fu">install.packages</span>(<span class="st">&quot;ggview&quot;</span>); <span class="fu">require</span>(ggview)}</span>
<span id="cb13-8"><a href="Chapter4.html#cb13-8" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb13-9"><a href="Chapter4.html#cb13-9" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(ggrepel)) {<span class="fu">install.packages</span>(<span class="st">&quot;ggrepel&quot;</span>); <span class="fu">require</span>(ggrepel)}</span>
<span id="cb13-10"><a href="Chapter4.html#cb13-10" tabindex="-1"></a></span>
<span id="cb13-11"><a href="Chapter4.html#cb13-11" tabindex="-1"></a><span class="co"># ievades dati</span></span>
<span id="cb13-12"><a href="Chapter4.html#cb13-12" tabindex="-1"></a>LAD <span class="ot">&lt;-</span> <span class="fu">st_read_parquet</span>(<span class="st">&quot;./LAD_lauki.parquet&quot;</span>)</span>
<span id="cb13-13"><a href="Chapter4.html#cb13-13" tabindex="-1"></a></span>
<span id="cb13-14"><a href="Chapter4.html#cb13-14" tabindex="-1"></a>AprAug <span class="ot">&lt;-</span> <span class="fu">rast</span>(<span class="st">&quot;./DW_2023_apraug.tif&quot;</span>)</span>
<span id="cb13-15"><a href="Chapter4.html#cb13-15" tabindex="-1"></a>AprJul <span class="ot">&lt;-</span> <span class="fu">rast</span>(<span class="st">&quot;./DW_2023_aprjul.tif&quot;</span>)</span>
<span id="cb13-16"><a href="Chapter4.html#cb13-16" tabindex="-1"></a>AprJun <span class="ot">&lt;-</span> <span class="fu">rast</span>(<span class="st">&quot;./DW_2023_aprjun.tif&quot;</span>)</span>
<span id="cb13-17"><a href="Chapter4.html#cb13-17" tabindex="-1"></a>AprMay <span class="ot">&lt;-</span> <span class="fu">rast</span>(<span class="st">&quot;./DW_2023_aprmay.tif&quot;</span>)</span>
<span id="cb13-18"><a href="Chapter4.html#cb13-18" tabindex="-1"></a>JulAug <span class="ot">&lt;-</span> <span class="fu">rast</span>(<span class="st">&quot;./DW_2023_julaug.tif&quot;</span>)</span>
<span id="cb13-19"><a href="Chapter4.html#cb13-19" tabindex="-1"></a>JunAug <span class="ot">&lt;-</span> <span class="fu">rast</span>(<span class="st">&quot;./DW_2023_julaug.tif&quot;</span>)</span>
<span id="cb13-20"><a href="Chapter4.html#cb13-20" tabindex="-1"></a>JunJul <span class="ot">&lt;-</span> <span class="fu">rast</span>(<span class="st">&quot;./DW_2023_junjul.tif&quot;</span>)</span>
<span id="cb13-21"><a href="Chapter4.html#cb13-21" tabindex="-1"></a>MayAug <span class="ot">&lt;-</span> <span class="fu">rast</span>(<span class="st">&quot;./DW_2023_mayaug.tif&quot;</span>)</span>
<span id="cb13-22"><a href="Chapter4.html#cb13-22" tabindex="-1"></a>MayJul <span class="ot">&lt;-</span> <span class="fu">rast</span>(<span class="st">&quot;./DW_2023_mayjul.tif&quot;</span>)</span>
<span id="cb13-23"><a href="Chapter4.html#cb13-23" tabindex="-1"></a>MayJun <span class="ot">&lt;-</span> <span class="fu">rast</span>(<span class="st">&quot;./DW_2023_mayjun.tif&quot;</span>)</span>
<span id="cb13-24"><a href="Chapter4.html#cb13-24" tabindex="-1"></a></span>
<span id="cb13-25"><a href="Chapter4.html#cb13-25" tabindex="-1"></a><span class="co"># utility</span></span>
<span id="cb13-26"><a href="Chapter4.html#cb13-26" tabindex="-1"></a>darbiba <span class="ot">&lt;-</span> <span class="cf">function</span>(raster, vector, period) {</span>
<span id="cb13-27"><a href="Chapter4.html#cb13-27" tabindex="-1"></a>  <span class="fu">exact_extract</span>(raster, vector, <span class="cf">function</span>(value, coverage_fraction) {</span>
<span id="cb13-28"><a href="Chapter4.html#cb13-28" tabindex="-1"></a>    <span class="fu">data.frame</span>(<span class="at">value =</span> value,</span>
<span id="cb13-29"><a href="Chapter4.html#cb13-29" tabindex="-1"></a>               <span class="at">frac =</span> coverage_fraction <span class="sc">/</span> <span class="fu">sum</span>(coverage_fraction, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb13-30"><a href="Chapter4.html#cb13-30" tabindex="-1"></a>      <span class="fu">group_by</span>(value) <span class="sc">%&gt;%</span></span>
<span id="cb13-31"><a href="Chapter4.html#cb13-31" tabindex="-1"></a>      <span class="fu">summarize</span>(<span class="at">freq =</span> <span class="fu">sum</span>(frac, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="at">.groups =</span> <span class="st">&#39;drop&#39;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb13-32"><a href="Chapter4.html#cb13-32" tabindex="-1"></a>      <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> <span class="st">&#39;value&#39;</span>,</span>
<span id="cb13-33"><a href="Chapter4.html#cb13-33" tabindex="-1"></a>                  <span class="at">names_prefix =</span> <span class="st">&#39;freq_&#39;</span>,</span>
<span id="cb13-34"><a href="Chapter4.html#cb13-34" tabindex="-1"></a>                  <span class="at">values_from =</span> <span class="st">&#39;freq&#39;</span>)</span>
<span id="cb13-35"><a href="Chapter4.html#cb13-35" tabindex="-1"></a>  }) <span class="sc">%&gt;%</span></span>
<span id="cb13-36"><a href="Chapter4.html#cb13-36" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">starts_with</span>(<span class="st">&#39;freq&#39;</span>), <span class="sc">~</span><span class="fu">replace_na</span>(., <span class="dv">0</span>))) <span class="sc">%&gt;%</span></span>
<span id="cb13-37"><a href="Chapter4.html#cb13-37" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">periods =</span> period) </span>
<span id="cb13-38"><a href="Chapter4.html#cb13-38" tabindex="-1"></a>}</span>
<span id="cb13-39"><a href="Chapter4.html#cb13-39" tabindex="-1"></a></span>
<span id="cb13-40"><a href="Chapter4.html#cb13-40" tabindex="-1"></a></span>
<span id="cb13-41"><a href="Chapter4.html#cb13-41" tabindex="-1"></a><span class="co"># DW klašu ekstrakcija ik lauka kultūru nejauši izlozētiem plankumiem</span></span>
<span id="cb13-42"><a href="Chapter4.html#cb13-42" tabindex="-1"></a><span class="co"># kultūru kodi</span></span>
<span id="cb13-43"><a href="Chapter4.html#cb13-43" tabindex="-1"></a>kodi<span class="ot">=</span><span class="fu">data.frame</span>(<span class="at">kodi=</span><span class="fu">levels</span>(<span class="fu">factor</span>(LAD<span class="sc">$</span>PRODUCT_CODE)))</span>
<span id="cb13-44"><a href="Chapter4.html#cb13-44" tabindex="-1"></a><span class="co"># saglabāšanas datu pamatne</span></span>
<span id="cb13-45"><a href="Chapter4.html#cb13-45" tabindex="-1"></a>dati<span class="ot">=</span>LAD[<span class="dv">1</span>,]</span>
<span id="cb13-46"><a href="Chapter4.html#cb13-46" tabindex="-1"></a>dati<span class="ot">=</span>dati <span class="sc">%&gt;%</span> </span>
<span id="cb13-47"><a href="Chapter4.html#cb13-47" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">periods=</span><span class="cn">NA_character_</span>,</span>
<span id="cb13-48"><a href="Chapter4.html#cb13-48" tabindex="-1"></a>         <span class="at">id=</span><span class="cn">NA_real_</span>,</span>
<span id="cb13-49"><a href="Chapter4.html#cb13-49" tabindex="-1"></a>         <span class="at">freq_0=</span><span class="cn">NA_real_</span>,</span>
<span id="cb13-50"><a href="Chapter4.html#cb13-50" tabindex="-1"></a>         <span class="at">freq_1=</span><span class="cn">NA_real_</span>,</span>
<span id="cb13-51"><a href="Chapter4.html#cb13-51" tabindex="-1"></a>         <span class="at">freq_2=</span><span class="cn">NA_real_</span>,</span>
<span id="cb13-52"><a href="Chapter4.html#cb13-52" tabindex="-1"></a>         <span class="at">freq_3=</span><span class="cn">NA_real_</span>,</span>
<span id="cb13-53"><a href="Chapter4.html#cb13-53" tabindex="-1"></a>         <span class="at">freq_4=</span><span class="cn">NA_real_</span>,</span>
<span id="cb13-54"><a href="Chapter4.html#cb13-54" tabindex="-1"></a>         <span class="at">freq_5=</span><span class="cn">NA_real_</span>,</span>
<span id="cb13-55"><a href="Chapter4.html#cb13-55" tabindex="-1"></a>         <span class="at">freq_6=</span><span class="cn">NA_real_</span>,</span>
<span id="cb13-56"><a href="Chapter4.html#cb13-56" tabindex="-1"></a>         <span class="at">freq_7=</span><span class="cn">NA_real_</span>,</span>
<span id="cb13-57"><a href="Chapter4.html#cb13-57" tabindex="-1"></a>         <span class="at">freq_8=</span><span class="cn">NA_real_</span>,</span>
<span id="cb13-58"><a href="Chapter4.html#cb13-58" tabindex="-1"></a>         <span class="at">freq_NA=</span><span class="cn">NA_real_</span>)</span>
<span id="cb13-59"><a href="Chapter4.html#cb13-59" tabindex="-1"></a><span class="co"># ekstrakcija ik kodams, veicot izlozi</span></span>
<span id="cb13-60"><a href="Chapter4.html#cb13-60" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(kodi<span class="sc">$</span>kodi)){</span>
<span id="cb13-61"><a href="Chapter4.html#cb13-61" tabindex="-1"></a>  kods<span class="ot">=</span>kodi<span class="sc">$</span>kodi[i]</span>
<span id="cb13-62"><a href="Chapter4.html#cb13-62" tabindex="-1"></a>  <span class="co"># nejaušo plankumu izloze</span></span>
<span id="cb13-63"><a href="Chapter4.html#cb13-63" tabindex="-1"></a>  <span class="fu">set.seed</span>(<span class="dv">0</span>)</span>
<span id="cb13-64"><a href="Chapter4.html#cb13-64" tabindex="-1"></a>  lauki <span class="ot">&lt;-</span> LAD <span class="sc">%&gt;%</span> <span class="fu">filter</span>(<span class="st">`</span><span class="at">PRODUCT_CODE</span><span class="st">`</span> <span class="sc">==</span> kods)</span>
<span id="cb13-65"><a href="Chapter4.html#cb13-65" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">nrow</span>(lauki) <span class="sc">&lt;</span> <span class="dv">999</span>) {rand_l <span class="ot">&lt;-</span> lauki} <span class="cf">else</span> {rand_l <span class="ot">&lt;-</span> lauki <span class="sc">%&gt;%</span> <span class="fu">sample_n</span>(<span class="dv">999</span>)}</span>
<span id="cb13-66"><a href="Chapter4.html#cb13-66" tabindex="-1"></a>  rand_l <span class="ot">&lt;-</span> rand_l <span class="sc">%&gt;%</span>  <span class="fu">mutate</span>(<span class="at">id =</span> <span class="fu">row_number</span>())</span>
<span id="cb13-67"><a href="Chapter4.html#cb13-67" tabindex="-1"></a>  <span class="co"># ekstrakcija</span></span>
<span id="cb13-68"><a href="Chapter4.html#cb13-68" tabindex="-1"></a>  a<span class="ot">=</span><span class="fu">cbind</span>(rand_l,<span class="fu">darbiba</span>(AprAug, rand_l, <span class="st">&quot;AprAug&quot;</span>))</span>
<span id="cb13-69"><a href="Chapter4.html#cb13-69" tabindex="-1"></a>  b<span class="ot">=</span><span class="fu">cbind</span>(rand_l,<span class="fu">darbiba</span>(AprJul, rand_l, <span class="st">&quot;AprJul&quot;</span>))</span>
<span id="cb13-70"><a href="Chapter4.html#cb13-70" tabindex="-1"></a>  c<span class="ot">=</span><span class="fu">cbind</span>(rand_l,<span class="fu">darbiba</span>(AprJun, rand_l, <span class="st">&quot;AprJun&quot;</span>))</span>
<span id="cb13-71"><a href="Chapter4.html#cb13-71" tabindex="-1"></a>  d<span class="ot">=</span><span class="fu">cbind</span>(rand_l,<span class="fu">darbiba</span>(AprMay, rand_l, <span class="st">&quot;AprMay&quot;</span>))</span>
<span id="cb13-72"><a href="Chapter4.html#cb13-72" tabindex="-1"></a>  e<span class="ot">=</span><span class="fu">cbind</span>(rand_l,<span class="fu">darbiba</span>(JulAug, rand_l, <span class="st">&quot;JulAug&quot;</span>))</span>
<span id="cb13-73"><a href="Chapter4.html#cb13-73" tabindex="-1"></a>  f<span class="ot">=</span><span class="fu">cbind</span>(rand_l,<span class="fu">darbiba</span>(JunAug, rand_l, <span class="st">&quot;JunAug&quot;</span>))</span>
<span id="cb13-74"><a href="Chapter4.html#cb13-74" tabindex="-1"></a>  g<span class="ot">=</span><span class="fu">cbind</span>(rand_l,<span class="fu">darbiba</span>(JunJul, rand_l, <span class="st">&quot;JunJul&quot;</span>))</span>
<span id="cb13-75"><a href="Chapter4.html#cb13-75" tabindex="-1"></a>  h<span class="ot">=</span><span class="fu">cbind</span>(rand_l,<span class="fu">darbiba</span>(MayAug, rand_l, <span class="st">&quot;MayAug&quot;</span>))</span>
<span id="cb13-76"><a href="Chapter4.html#cb13-76" tabindex="-1"></a>  i<span class="ot">=</span><span class="fu">cbind</span>(rand_l,<span class="fu">darbiba</span>(MayJul, rand_l, <span class="st">&quot;MayJul&quot;</span>))</span>
<span id="cb13-77"><a href="Chapter4.html#cb13-77" tabindex="-1"></a>  j<span class="ot">=</span><span class="fu">cbind</span>(rand_l,<span class="fu">darbiba</span>(MayJun, rand_l, <span class="st">&quot;MayJun&quot;</span>))</span>
<span id="cb13-78"><a href="Chapter4.html#cb13-78" tabindex="-1"></a>  <span class="co"># rezultātu apvienošana</span></span>
<span id="cb13-79"><a href="Chapter4.html#cb13-79" tabindex="-1"></a>  rez<span class="ot">=</span><span class="fu">bind_rows</span>(a,b,c,d,e,f,g,h,i,j)</span>
<span id="cb13-80"><a href="Chapter4.html#cb13-80" tabindex="-1"></a>  dati <span class="ot">&lt;-</span> <span class="fu">bind_rows</span>(dati, rez)</span>
<span id="cb13-81"><a href="Chapter4.html#cb13-81" tabindex="-1"></a>  }</span>
<span id="cb13-82"><a href="Chapter4.html#cb13-82" tabindex="-1"></a><span class="co"># ērtāki lauku nosaukumi</span></span>
<span id="cb13-83"><a href="Chapter4.html#cb13-83" tabindex="-1"></a>dati<span class="ot">=</span>dati <span class="sc">%&gt;%</span> </span>
<span id="cb13-84"><a href="Chapter4.html#cb13-84" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">water=</span>freq_0,</span>
<span id="cb13-85"><a href="Chapter4.html#cb13-85" tabindex="-1"></a>         <span class="at">trees=</span>freq_1,</span>
<span id="cb13-86"><a href="Chapter4.html#cb13-86" tabindex="-1"></a>         <span class="at">grass=</span>freq_2,</span>
<span id="cb13-87"><a href="Chapter4.html#cb13-87" tabindex="-1"></a>         <span class="at">flooded_vegetation=</span>freq_3,</span>
<span id="cb13-88"><a href="Chapter4.html#cb13-88" tabindex="-1"></a>         <span class="at">crops=</span>freq_4,</span>
<span id="cb13-89"><a href="Chapter4.html#cb13-89" tabindex="-1"></a>         <span class="at">shrub_and_scrub=</span>freq_5,</span>
<span id="cb13-90"><a href="Chapter4.html#cb13-90" tabindex="-1"></a>         <span class="at">built=</span>freq_6,</span>
<span id="cb13-91"><a href="Chapter4.html#cb13-91" tabindex="-1"></a>         <span class="at">bare=</span>freq_7,</span>
<span id="cb13-92"><a href="Chapter4.html#cb13-92" tabindex="-1"></a>         <span class="at">snow_and_ice=</span>freq_8)</span>
<span id="cb13-93"><a href="Chapter4.html#cb13-93" tabindex="-1"></a><span class="co"># atbrīvošanās no liekā ieraksta</span></span>
<span id="cb13-94"><a href="Chapter4.html#cb13-94" tabindex="-1"></a>dati_real<span class="ot">=</span>dati[<span class="sc">-</span><span class="dv">1</span>,]</span>
<span id="cb13-95"><a href="Chapter4.html#cb13-95" tabindex="-1"></a><span class="co"># rezultāta saglabāšana</span></span>
<span id="cb13-96"><a href="Chapter4.html#cb13-96" tabindex="-1"></a>sfarrow<span class="sc">::</span><span class="fu">st_write_parquet</span>(dati_real,<span class="st">&quot;./Q1_kulturas.parquet&quot;</span>)</span></code></pre></div>
<div id="q1.1-ziemāji-aramzemēs" class="section level3 hasAnchor" number="5.2.1">
<h3><span class="header-section-number">5.2.1</span> Q1.1: Ziemāji aramzemēs<a href="Chapter4.html#q1.1-ziemāji-aramzemēs" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Sekojošajā attēlā <a href="Chapter4.html#fig:DWq11">5.2</a> ir ilustrēta ziemāju aramzemēs (kultūru kodi “121”,“122”,“132”,“112”,“116”,“151”) saistība ar DW klasēm dažādos temporālajos griezumos. Skaitļi attēlu daļās norāda klases “crops” ar lauka platību svērto vidējo īpatsvaru. Redzams, ka zemākā atbilstība ir izmantojot tikai vasaras mēnešus. Ievērojami zemāka par atlikušajām klasēm ir arī tikai pavasara klasifikācija. Atlikušās ir visai līdzīgas, nedaudz pārāki temporālie griezumi šķiet maijā-jūnijā un maijā-jūlijā.</p>
<div class="figure"><span style="display:block;" id="fig:DWq11"></span>
<img src="Atteli/ch004_q11.png" alt="Lauksaimniecības kultūru grupas &quot;ziemāji&quot; saistība ar DW klasēm." width="100%" />
<p class="caption">
Figure 5.2: Lauksaimniecības kultūru grupas “ziemāji” saistība ar DW klasēm.
</p>
</div>
<p><br></p>
<p>Komandu rindas attēla sagatavošanas reproducēšanai:</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="Chapter4.html#cb14-1" tabindex="-1"></a>dati<span class="ot">=</span>sfarrow<span class="sc">::</span><span class="fu">st_read_parquet</span>(<span class="st">&quot;./Q1_kulturas.parquet&quot;</span>)</span>
<span id="cb14-2"><a href="Chapter4.html#cb14-2" tabindex="-1"></a>dati<span class="ot">=</span>dati <span class="sc">%&gt;%</span> </span>
<span id="cb14-3"><a href="Chapter4.html#cb14-3" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">sezona=</span><span class="fu">factor</span>(periods,<span class="at">ordered=</span><span class="cn">TRUE</span>,</span>
<span id="cb14-4"><a href="Chapter4.html#cb14-4" tabindex="-1"></a>                       <span class="at">levels=</span><span class="fu">c</span>(<span class="st">&quot;AprMay&quot;</span>,<span class="st">&quot;AprJun&quot;</span>,<span class="st">&quot;AprJul&quot;</span>,<span class="st">&quot;AprAug&quot;</span>,<span class="st">&quot;MayJun&quot;</span>,</span>
<span id="cb14-5"><a href="Chapter4.html#cb14-5" tabindex="-1"></a>                                <span class="st">&quot;MayJul&quot;</span>,<span class="st">&quot;MayAug&quot;</span>,<span class="st">&quot;JunJul&quot;</span>,<span class="st">&quot;JunAug&quot;</span>,<span class="st">&quot;JulAug&quot;</span>)))</span>
<span id="cb14-6"><a href="Chapter4.html#cb14-6" tabindex="-1"></a></span>
<span id="cb14-7"><a href="Chapter4.html#cb14-7" tabindex="-1"></a>ziemaji_aramzemes<span class="ot">=</span><span class="fu">c</span>(<span class="st">&quot;121&quot;</span>,<span class="st">&quot;122&quot;</span>,<span class="st">&quot;132&quot;</span>,<span class="st">&quot;112&quot;</span>,<span class="st">&quot;116&quot;</span>,<span class="st">&quot;151&quot;</span>)</span>
<span id="cb14-8"><a href="Chapter4.html#cb14-8" tabindex="-1"></a></span>
<span id="cb14-9"><a href="Chapter4.html#cb14-9" tabindex="-1"></a>q11data<span class="ot">=</span><span class="fu">data.frame</span>(dati) <span class="sc">%&gt;%</span> </span>
<span id="cb14-10"><a href="Chapter4.html#cb14-10" tabindex="-1"></a>  <span class="fu">filter</span>(PRODUCT_CODE <span class="sc">%in%</span> ziemaji_aramzemes) <span class="sc">%&gt;%</span> </span>
<span id="cb14-11"><a href="Chapter4.html#cb14-11" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(PRODUCT_CODE,PRODUCT_DESCRIPTION,SHAPE.AREA,sezona,water<span class="sc">:</span>snow_and_ice) <span class="sc">%&gt;%</span> </span>
<span id="cb14-12"><a href="Chapter4.html#cb14-12" tabindex="-1"></a>  <span class="fu">group_by</span>(PRODUCT_CODE) <span class="sc">%&gt;%</span> </span>
<span id="cb14-13"><a href="Chapter4.html#cb14-13" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">skaits=</span><span class="fu">n</span>()<span class="sc">/</span><span class="dv">10</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb14-14"><a href="Chapter4.html#cb14-14" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb14-15"><a href="Chapter4.html#cb14-15" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">nosaukums=</span><span class="fu">paste0</span>(PRODUCT_DESCRIPTION,<span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span>,<span class="st">&quot;n=&quot;</span>,skaits)) <span class="sc">%&gt;%</span> </span>
<span id="cb14-16"><a href="Chapter4.html#cb14-16" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols=</span>water<span class="sc">:</span>snow_and_ice,<span class="at">names_to =</span> <span class="st">&quot;klase&quot;</span>,<span class="at">values_to =</span> <span class="st">&quot;proporcija&quot;</span>)</span>
<span id="cb14-17"><a href="Chapter4.html#cb14-17" tabindex="-1"></a></span>
<span id="cb14-18"><a href="Chapter4.html#cb14-18" tabindex="-1"></a>q11data2<span class="ot">=</span>q1data <span class="sc">%&gt;%</span> </span>
<span id="cb14-19"><a href="Chapter4.html#cb14-19" tabindex="-1"></a>  <span class="fu">group_by</span>(nosaukums,sezona,klase) <span class="sc">%&gt;%</span> </span>
<span id="cb14-20"><a href="Chapter4.html#cb14-20" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">vertiba=</span><span class="fu">round</span>(<span class="fu">weighted.mean</span>(proporcija,<span class="at">w=</span>SHAPE.AREA,<span class="at">na.rm=</span><span class="cn">TRUE</span>)<span class="sc">*</span><span class="dv">100</span>,<span class="dv">0</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb14-21"><a href="Chapter4.html#cb14-21" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb14-22"><a href="Chapter4.html#cb14-22" tabindex="-1"></a>  <span class="fu">filter</span>(klase<span class="sc">==</span><span class="st">&quot;crops&quot;</span>)</span>
<span id="cb14-23"><a href="Chapter4.html#cb14-23" tabindex="-1"></a></span>
<span id="cb14-24"><a href="Chapter4.html#cb14-24" tabindex="-1"></a><span class="fu">ggplot</span>(q11data,<span class="fu">aes</span>(sezona,proporcija,<span class="at">col=</span>klase))<span class="sc">+</span></span>
<span id="cb14-25"><a href="Chapter4.html#cb14-25" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>nosaukums)<span class="sc">+</span></span>
<span id="cb14-26"><a href="Chapter4.html#cb14-26" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">position=</span><span class="fu">position_dodge</span>(<span class="at">width=</span><span class="fl">0.75</span>),<span class="at">alpha=</span><span class="fl">0.2</span>)<span class="sc">+</span></span>
<span id="cb14-27"><a href="Chapter4.html#cb14-27" tabindex="-1"></a>  <span class="fu">theme_bw</span>()<span class="sc">+</span></span>
<span id="cb14-28"><a href="Chapter4.html#cb14-28" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle=</span><span class="dv">90</span>,<span class="at">vjust=</span><span class="fl">0.5</span>),</span>
<span id="cb14-29"><a href="Chapter4.html#cb14-29" tabindex="-1"></a>        <span class="at">axis.title.y =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb14-30"><a href="Chapter4.html#cb14-30" tabindex="-1"></a>        <span class="at">legend.title =</span> <span class="fu">element_blank</span>())<span class="sc">+</span></span>
<span id="cb14-31"><a href="Chapter4.html#cb14-31" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="at">data=</span>q11data2,<span class="fu">aes</span>(sezona,<span class="at">y=</span><span class="fl">1.1</span>,<span class="at">label=</span>vertiba),<span class="at">size=</span><span class="dv">3</span>)<span class="sc">+</span></span>
<span id="cb14-32"><a href="Chapter4.html#cb14-32" tabindex="-1"></a>  <span class="fu">scale_color_viridis_d</span>()<span class="sc">+</span></span>
<span id="cb14-33"><a href="Chapter4.html#cb14-33" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels=</span>scales<span class="sc">::</span><span class="fu">label_percent</span>(),<span class="at">breaks=</span><span class="fu">seq</span>(<span class="dv">0</span>,<span class="dv">1</span>,<span class="at">by=</span>.<span class="dv">1</span>))<span class="sc">+</span></span>
<span id="cb14-34"><a href="Chapter4.html#cb14-34" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x=</span><span class="st">&quot;Sezona&quot;</span>)</span>
<span id="cb14-35"><a href="Chapter4.html#cb14-35" tabindex="-1"></a><span class="fu">ggview</span>(<span class="at">width=</span><span class="dv">300</span>,<span class="at">height=</span><span class="dv">150</span>,<span class="at">units=</span><span class="st">&quot;mm&quot;</span>,<span class="at">dpi=</span><span class="dv">600</span>,<span class="at">device=</span><span class="st">&quot;png&quot;</span>)</span>
<span id="cb14-36"><a href="Chapter4.html#cb14-36" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="at">filename=</span><span class="st">&quot;./pic_q11.png&quot;</span>,<span class="at">width=</span><span class="dv">300</span>,<span class="at">height=</span><span class="dv">150</span>,<span class="at">units=</span><span class="st">&quot;mm&quot;</span>,<span class="at">dpi=</span><span class="dv">600</span>)</span></code></pre></div>
</div>
<div id="q1.2-ziemas-rapsis" class="section level3 hasAnchor" number="5.2.2">
<h3><span class="header-section-number">5.2.2</span> Q1.2: Ziemas rapsis<a href="Chapter4.html#q1.2-ziemas-rapsis" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Sekojošajā attēlā <a href="Chapter4.html#fig:DWq12">5.3</a> ir ilustrēta ziemas rapša (kultūras kods “212”) saistība ar Dynamic World klasēm dažādos temporālajos griezumos. Skaitļi attēlu daļās norāda klases “crops” ar lauka platību svērto vidējo īpatsvaru. Redzams, ka zemākā atbilstība ir izmantojot tikai vasaras mēnešus.</p>
<div class="figure"><span style="display:block;" id="fig:DWq12"></span>
<img src="Atteli/ch004_q12.png" alt="Lauksaimniecības kultūru grupas &quot;ziemas rapsis&quot; saistība ar DW klasēm." width="60%" />
<p class="caption">
Figure 5.3: Lauksaimniecības kultūru grupas “ziemas rapsis” saistība ar DW klasēm.
</p>
</div>
<p><br></p>
<p>Komandu rindas attēla sagatavošanas reproducēšanai:</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="Chapter4.html#cb15-1" tabindex="-1"></a>dati<span class="ot">=</span>sfarrow<span class="sc">::</span><span class="fu">st_read_parquet</span>(<span class="st">&quot;./Q1_kulturas.parquet&quot;</span>)</span>
<span id="cb15-2"><a href="Chapter4.html#cb15-2" tabindex="-1"></a>dati<span class="ot">=</span>dati <span class="sc">%&gt;%</span> </span>
<span id="cb15-3"><a href="Chapter4.html#cb15-3" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">sezona=</span><span class="fu">factor</span>(periods,<span class="at">ordered=</span><span class="cn">TRUE</span>,</span>
<span id="cb15-4"><a href="Chapter4.html#cb15-4" tabindex="-1"></a>                       <span class="at">levels=</span><span class="fu">c</span>(<span class="st">&quot;AprMay&quot;</span>,<span class="st">&quot;AprJun&quot;</span>,<span class="st">&quot;AprJul&quot;</span>,<span class="st">&quot;AprAug&quot;</span>,<span class="st">&quot;MayJun&quot;</span>,</span>
<span id="cb15-5"><a href="Chapter4.html#cb15-5" tabindex="-1"></a>                                <span class="st">&quot;MayJul&quot;</span>,<span class="st">&quot;MayAug&quot;</span>,<span class="st">&quot;JunJul&quot;</span>,<span class="st">&quot;JunAug&quot;</span>,<span class="st">&quot;JulAug&quot;</span>)))</span>
<span id="cb15-6"><a href="Chapter4.html#cb15-6" tabindex="-1"></a>ziemas_rapsis<span class="ot">=</span><span class="fu">c</span>(<span class="st">&quot;212&quot;</span>)</span>
<span id="cb15-7"><a href="Chapter4.html#cb15-7" tabindex="-1"></a></span>
<span id="cb15-8"><a href="Chapter4.html#cb15-8" tabindex="-1"></a>q12data<span class="ot">=</span><span class="fu">data.frame</span>(dati) <span class="sc">%&gt;%</span> </span>
<span id="cb15-9"><a href="Chapter4.html#cb15-9" tabindex="-1"></a>  <span class="fu">filter</span>(PRODUCT_CODE <span class="sc">%in%</span> ziemas_rapsis) <span class="sc">%&gt;%</span> </span>
<span id="cb15-10"><a href="Chapter4.html#cb15-10" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(PRODUCT_CODE,PRODUCT_DESCRIPTION,SHAPE.AREA,sezona,water<span class="sc">:</span>snow_and_ice) <span class="sc">%&gt;%</span> </span>
<span id="cb15-11"><a href="Chapter4.html#cb15-11" tabindex="-1"></a>  <span class="fu">group_by</span>(PRODUCT_CODE) <span class="sc">%&gt;%</span> </span>
<span id="cb15-12"><a href="Chapter4.html#cb15-12" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">skaits=</span><span class="fu">n</span>()<span class="sc">/</span><span class="dv">10</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb15-13"><a href="Chapter4.html#cb15-13" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb15-14"><a href="Chapter4.html#cb15-14" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">nosaukums=</span><span class="fu">paste0</span>(PRODUCT_DESCRIPTION,<span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span>,<span class="st">&quot;n=&quot;</span>,skaits)) <span class="sc">%&gt;%</span> </span>
<span id="cb15-15"><a href="Chapter4.html#cb15-15" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols=</span>water<span class="sc">:</span>snow_and_ice,<span class="at">names_to =</span> <span class="st">&quot;klase&quot;</span>,<span class="at">values_to =</span> <span class="st">&quot;proporcija&quot;</span>)</span>
<span id="cb15-16"><a href="Chapter4.html#cb15-16" tabindex="-1"></a></span>
<span id="cb15-17"><a href="Chapter4.html#cb15-17" tabindex="-1"></a>q12data2<span class="ot">=</span>q12data <span class="sc">%&gt;%</span> </span>
<span id="cb15-18"><a href="Chapter4.html#cb15-18" tabindex="-1"></a>  <span class="fu">group_by</span>(nosaukums,sezona,klase) <span class="sc">%&gt;%</span> </span>
<span id="cb15-19"><a href="Chapter4.html#cb15-19" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">vertiba=</span><span class="fu">round</span>(<span class="fu">weighted.mean</span>(proporcija,<span class="at">w=</span>SHAPE.AREA,<span class="at">na.rm=</span><span class="cn">TRUE</span>)<span class="sc">*</span><span class="dv">100</span>,<span class="dv">0</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb15-20"><a href="Chapter4.html#cb15-20" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb15-21"><a href="Chapter4.html#cb15-21" tabindex="-1"></a>  <span class="fu">filter</span>(klase<span class="sc">==</span><span class="st">&quot;crops&quot;</span>)</span>
<span id="cb15-22"><a href="Chapter4.html#cb15-22" tabindex="-1"></a></span>
<span id="cb15-23"><a href="Chapter4.html#cb15-23" tabindex="-1"></a><span class="fu">ggplot</span>(q12data,<span class="fu">aes</span>(sezona,proporcija,<span class="at">col=</span>klase))<span class="sc">+</span></span>
<span id="cb15-24"><a href="Chapter4.html#cb15-24" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>nosaukums)<span class="sc">+</span></span>
<span id="cb15-25"><a href="Chapter4.html#cb15-25" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">position=</span><span class="fu">position_dodge</span>(<span class="at">width=</span><span class="fl">0.75</span>),<span class="at">alpha=</span><span class="fl">0.2</span>)<span class="sc">+</span></span>
<span id="cb15-26"><a href="Chapter4.html#cb15-26" tabindex="-1"></a>  <span class="fu">theme_bw</span>()<span class="sc">+</span></span>
<span id="cb15-27"><a href="Chapter4.html#cb15-27" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.title.y =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb15-28"><a href="Chapter4.html#cb15-28" tabindex="-1"></a>        <span class="at">legend.title =</span> <span class="fu">element_blank</span>())<span class="sc">+</span></span>
<span id="cb15-29"><a href="Chapter4.html#cb15-29" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="at">data=</span>q12data2,<span class="fu">aes</span>(sezona,<span class="at">y=</span><span class="fl">1.1</span>,<span class="at">label=</span>vertiba),<span class="at">size=</span><span class="dv">3</span>)<span class="sc">+</span></span>
<span id="cb15-30"><a href="Chapter4.html#cb15-30" tabindex="-1"></a>  <span class="fu">scale_color_viridis_d</span>()<span class="sc">+</span></span>
<span id="cb15-31"><a href="Chapter4.html#cb15-31" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels=</span>scales<span class="sc">::</span><span class="fu">label_percent</span>(),<span class="at">breaks=</span><span class="fu">seq</span>(<span class="dv">0</span>,<span class="dv">1</span>,<span class="at">by=</span>.<span class="dv">1</span>))<span class="sc">+</span></span>
<span id="cb15-32"><a href="Chapter4.html#cb15-32" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x=</span><span class="st">&quot;Sezona&quot;</span>)</span>
<span id="cb15-33"><a href="Chapter4.html#cb15-33" tabindex="-1"></a><span class="fu">ggview</span>(<span class="at">width=</span><span class="dv">200</span>,<span class="at">height=</span><span class="dv">100</span>,<span class="at">units=</span><span class="st">&quot;mm&quot;</span>,<span class="at">dpi=</span><span class="dv">600</span>,<span class="at">device=</span><span class="st">&quot;png&quot;</span>)</span>
<span id="cb15-34"><a href="Chapter4.html#cb15-34" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="at">filename=</span><span class="st">&quot;./pic_q12.png&quot;</span>,<span class="at">width=</span><span class="dv">200</span>,<span class="at">height=</span><span class="dv">100</span>,<span class="at">units=</span><span class="st">&quot;mm&quot;</span>,<span class="at">dpi=</span><span class="dv">600</span>)</span></code></pre></div>
</div>
<div id="q1.3-vasarāji-aramzemēs" class="section level3 hasAnchor" number="5.2.3">
<h3><span class="header-section-number">5.2.3</span> Q1.3: Vasarāji aramzemēs<a href="Chapter4.html#q1.3-vasarāji-aramzemēs" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Sekojošajā attēlā <a href="Chapter4.html#fig:DWq13">5.4</a> ir ilustrēta vasarāju aramzemēs (kultūru kodi “131”,“111”,“150”) saistība ar Dynamic World klasēm dažādos temporālajos griezumos. Skaitļi attēlu daļās norāda klases “crops” ar lauka platību svērto vidējo īpatsvaru. Redzams, ka zemākā atbilstība ir izmantojot tikai vasaras mēnešus.</p>
<div class="figure"><span style="display:block;" id="fig:DWq13"></span>
<img src="Atteli/ch004_q13.png" alt="Lauksaimniecības kultūru grupas &quot;vasarāji aramzemēs&quot; saistība ar DW klasēm." width="100%" />
<p class="caption">
Figure 5.4: Lauksaimniecības kultūru grupas “vasarāji aramzemēs” saistība ar DW klasēm.
</p>
</div>
<p><br></p>
<p>Komandu rindas attēla sagatavošanas reproducēšanai:</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="Chapter4.html#cb16-1" tabindex="-1"></a>dati<span class="ot">=</span>sfarrow<span class="sc">::</span><span class="fu">st_read_parquet</span>(<span class="st">&quot;./Q1_kulturas.parquet&quot;</span>)</span>
<span id="cb16-2"><a href="Chapter4.html#cb16-2" tabindex="-1"></a>dati<span class="ot">=</span>dati <span class="sc">%&gt;%</span> </span>
<span id="cb16-3"><a href="Chapter4.html#cb16-3" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">sezona=</span><span class="fu">factor</span>(periods,<span class="at">ordered=</span><span class="cn">TRUE</span>,</span>
<span id="cb16-4"><a href="Chapter4.html#cb16-4" tabindex="-1"></a>                       <span class="at">levels=</span><span class="fu">c</span>(<span class="st">&quot;AprMay&quot;</span>,<span class="st">&quot;AprJun&quot;</span>,<span class="st">&quot;AprJul&quot;</span>,<span class="st">&quot;AprAug&quot;</span>,<span class="st">&quot;MayJun&quot;</span>,</span>
<span id="cb16-5"><a href="Chapter4.html#cb16-5" tabindex="-1"></a>                                <span class="st">&quot;MayJul&quot;</span>,<span class="st">&quot;MayAug&quot;</span>,<span class="st">&quot;JunJul&quot;</span>,<span class="st">&quot;JunAug&quot;</span>,<span class="st">&quot;JulAug&quot;</span>)))</span>
<span id="cb16-6"><a href="Chapter4.html#cb16-6" tabindex="-1"></a>vasaraji_aramzemes<span class="ot">=</span><span class="fu">c</span>(<span class="st">&quot;131&quot;</span>,<span class="st">&quot;111&quot;</span>,<span class="st">&quot;150&quot;</span>)</span>
<span id="cb16-7"><a href="Chapter4.html#cb16-7" tabindex="-1"></a>q13data<span class="ot">=</span><span class="fu">data.frame</span>(dati) <span class="sc">%&gt;%</span> </span>
<span id="cb16-8"><a href="Chapter4.html#cb16-8" tabindex="-1"></a>  <span class="fu">filter</span>(PRODUCT_CODE <span class="sc">%in%</span> vasaraji_aramzemes) <span class="sc">%&gt;%</span> </span>
<span id="cb16-9"><a href="Chapter4.html#cb16-9" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(PRODUCT_CODE,PRODUCT_DESCRIPTION,SHAPE.AREA,sezona,water<span class="sc">:</span>snow_and_ice) <span class="sc">%&gt;%</span> </span>
<span id="cb16-10"><a href="Chapter4.html#cb16-10" tabindex="-1"></a>  <span class="fu">group_by</span>(PRODUCT_CODE) <span class="sc">%&gt;%</span> </span>
<span id="cb16-11"><a href="Chapter4.html#cb16-11" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">skaits=</span><span class="fu">n</span>()<span class="sc">/</span><span class="dv">10</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb16-12"><a href="Chapter4.html#cb16-12" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb16-13"><a href="Chapter4.html#cb16-13" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">nosaukums=</span><span class="fu">paste0</span>(PRODUCT_DESCRIPTION,<span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span>,<span class="st">&quot;n=&quot;</span>,skaits)) <span class="sc">%&gt;%</span> </span>
<span id="cb16-14"><a href="Chapter4.html#cb16-14" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols=</span>water<span class="sc">:</span>snow_and_ice,<span class="at">names_to =</span> <span class="st">&quot;klase&quot;</span>,<span class="at">values_to =</span> <span class="st">&quot;proporcija&quot;</span>)</span>
<span id="cb16-15"><a href="Chapter4.html#cb16-15" tabindex="-1"></a></span>
<span id="cb16-16"><a href="Chapter4.html#cb16-16" tabindex="-1"></a>q13data2<span class="ot">=</span>q13data <span class="sc">%&gt;%</span> </span>
<span id="cb16-17"><a href="Chapter4.html#cb16-17" tabindex="-1"></a>  <span class="fu">group_by</span>(nosaukums,sezona,klase) <span class="sc">%&gt;%</span> </span>
<span id="cb16-18"><a href="Chapter4.html#cb16-18" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">vertiba=</span><span class="fu">round</span>(<span class="fu">weighted.mean</span>(proporcija,<span class="at">w=</span>SHAPE.AREA,<span class="at">na.rm=</span><span class="cn">TRUE</span>)<span class="sc">*</span><span class="dv">100</span>,<span class="dv">0</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb16-19"><a href="Chapter4.html#cb16-19" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb16-20"><a href="Chapter4.html#cb16-20" tabindex="-1"></a>  <span class="fu">filter</span>(klase<span class="sc">==</span><span class="st">&quot;crops&quot;</span>)</span>
<span id="cb16-21"><a href="Chapter4.html#cb16-21" tabindex="-1"></a></span>
<span id="cb16-22"><a href="Chapter4.html#cb16-22" tabindex="-1"></a><span class="fu">ggplot</span>(q13data,<span class="fu">aes</span>(sezona,proporcija,<span class="at">col=</span>klase))<span class="sc">+</span></span>
<span id="cb16-23"><a href="Chapter4.html#cb16-23" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>nosaukums)<span class="sc">+</span></span>
<span id="cb16-24"><a href="Chapter4.html#cb16-24" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">position=</span><span class="fu">position_dodge</span>(<span class="at">width=</span><span class="fl">0.75</span>),<span class="at">alpha=</span><span class="fl">0.2</span>)<span class="sc">+</span></span>
<span id="cb16-25"><a href="Chapter4.html#cb16-25" tabindex="-1"></a>  <span class="fu">theme_bw</span>()<span class="sc">+</span></span>
<span id="cb16-26"><a href="Chapter4.html#cb16-26" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle=</span><span class="dv">90</span>,<span class="at">vjust=</span><span class="fl">0.5</span>),</span>
<span id="cb16-27"><a href="Chapter4.html#cb16-27" tabindex="-1"></a>        <span class="at">axis.title.y =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb16-28"><a href="Chapter4.html#cb16-28" tabindex="-1"></a>        <span class="at">legend.title =</span> <span class="fu">element_blank</span>())<span class="sc">+</span></span>
<span id="cb16-29"><a href="Chapter4.html#cb16-29" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="at">data=</span>q13data2,<span class="fu">aes</span>(sezona,<span class="at">y=</span><span class="fl">1.1</span>,<span class="at">label=</span>vertiba),<span class="at">size=</span><span class="dv">3</span>)<span class="sc">+</span></span>
<span id="cb16-30"><a href="Chapter4.html#cb16-30" tabindex="-1"></a>  <span class="fu">scale_color_viridis_d</span>()<span class="sc">+</span></span>
<span id="cb16-31"><a href="Chapter4.html#cb16-31" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels=</span>scales<span class="sc">::</span><span class="fu">label_percent</span>(),<span class="at">breaks=</span><span class="fu">seq</span>(<span class="dv">0</span>,<span class="dv">1</span>,<span class="at">by=</span>.<span class="dv">1</span>))<span class="sc">+</span></span>
<span id="cb16-32"><a href="Chapter4.html#cb16-32" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x=</span><span class="st">&quot;Sezona&quot;</span>)</span>
<span id="cb16-33"><a href="Chapter4.html#cb16-33" tabindex="-1"></a><span class="fu">ggview</span>(<span class="at">width=</span><span class="dv">300</span>,<span class="at">height=</span><span class="dv">100</span>,<span class="at">units=</span><span class="st">&quot;mm&quot;</span>,<span class="at">dpi=</span><span class="dv">600</span>,<span class="at">device=</span><span class="st">&quot;png&quot;</span>)</span>
<span id="cb16-34"><a href="Chapter4.html#cb16-34" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="at">filename=</span><span class="st">&quot;./pic_q13.png&quot;</span>,<span class="at">width=</span><span class="dv">300</span>,<span class="at">height=</span><span class="dv">100</span>,<span class="at">units=</span><span class="st">&quot;mm&quot;</span>,<span class="at">dpi=</span><span class="dv">600</span>)</span></code></pre></div>
</div>
<div id="q1.4-vasaras-rapsis" class="section level3 hasAnchor" number="5.2.4">
<h3><span class="header-section-number">5.2.4</span> Q1.4: Vasaras rapsis<a href="Chapter4.html#q1.4-vasaras-rapsis" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Sekojošajā attēlā <a href="Chapter4.html#fig:DWq14">5.5</a> ir ilustrēta vasaras rapša (kultūras kods “211”) saistība ar Dynamic World klasēm dažādos temporālajos griezumos. Skaitļi attēlu daļās norāda klases “crops” ar lauka platību svērto vidējo īpatsvaru. Redzams, ka zemākā atbilstība ir izmantojot tikai vasaras mēnešus.</p>
<div class="figure"><span style="display:block;" id="fig:DWq14"></span>
<img src="Atteli/ch004_q14.png" alt="Lauksaimniecības kultūru grupas &quot;vasaras rapsis&quot; saistība ar DW klasēm." width="60%" />
<p class="caption">
Figure 5.5: Lauksaimniecības kultūru grupas “vasaras rapsis” saistība ar DW klasēm.
</p>
</div>
<p><br></p>
<p>Komandu rindas attēla sagatavošanas reproducēšanai:</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="Chapter4.html#cb17-1" tabindex="-1"></a>dati<span class="ot">=</span>sfarrow<span class="sc">::</span><span class="fu">st_read_parquet</span>(<span class="st">&quot;./Q1_kulturas.parquet&quot;</span>)</span>
<span id="cb17-2"><a href="Chapter4.html#cb17-2" tabindex="-1"></a>dati<span class="ot">=</span>dati <span class="sc">%&gt;%</span> </span>
<span id="cb17-3"><a href="Chapter4.html#cb17-3" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">sezona=</span><span class="fu">factor</span>(periods,<span class="at">ordered=</span><span class="cn">TRUE</span>,</span>
<span id="cb17-4"><a href="Chapter4.html#cb17-4" tabindex="-1"></a>                       <span class="at">levels=</span><span class="fu">c</span>(<span class="st">&quot;AprMay&quot;</span>,<span class="st">&quot;AprJun&quot;</span>,<span class="st">&quot;AprJul&quot;</span>,<span class="st">&quot;AprAug&quot;</span>,<span class="st">&quot;MayJun&quot;</span>,</span>
<span id="cb17-5"><a href="Chapter4.html#cb17-5" tabindex="-1"></a>                                <span class="st">&quot;MayJul&quot;</span>,<span class="st">&quot;MayAug&quot;</span>,<span class="st">&quot;JunJul&quot;</span>,<span class="st">&quot;JunAug&quot;</span>,<span class="st">&quot;JulAug&quot;</span>)))</span>
<span id="cb17-6"><a href="Chapter4.html#cb17-6" tabindex="-1"></a>vasaras_rapsis<span class="ot">=</span><span class="fu">c</span>(<span class="st">&quot;211&quot;</span>)</span>
<span id="cb17-7"><a href="Chapter4.html#cb17-7" tabindex="-1"></a>q14data<span class="ot">=</span><span class="fu">data.frame</span>(dati) <span class="sc">%&gt;%</span> </span>
<span id="cb17-8"><a href="Chapter4.html#cb17-8" tabindex="-1"></a>  <span class="fu">filter</span>(PRODUCT_CODE <span class="sc">%in%</span> vasaras_rapsis) <span class="sc">%&gt;%</span> </span>
<span id="cb17-9"><a href="Chapter4.html#cb17-9" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(PRODUCT_CODE,PRODUCT_DESCRIPTION,SHAPE.AREA,sezona,water<span class="sc">:</span>snow_and_ice) <span class="sc">%&gt;%</span> </span>
<span id="cb17-10"><a href="Chapter4.html#cb17-10" tabindex="-1"></a>  <span class="fu">group_by</span>(PRODUCT_CODE) <span class="sc">%&gt;%</span> </span>
<span id="cb17-11"><a href="Chapter4.html#cb17-11" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">skaits=</span><span class="fu">n</span>()<span class="sc">/</span><span class="dv">10</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb17-12"><a href="Chapter4.html#cb17-12" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb17-13"><a href="Chapter4.html#cb17-13" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">nosaukums=</span><span class="fu">paste0</span>(PRODUCT_DESCRIPTION,<span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span>,<span class="st">&quot;n=&quot;</span>,skaits)) <span class="sc">%&gt;%</span> </span>
<span id="cb17-14"><a href="Chapter4.html#cb17-14" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols=</span>water<span class="sc">:</span>snow_and_ice,<span class="at">names_to =</span> <span class="st">&quot;klase&quot;</span>,<span class="at">values_to =</span> <span class="st">&quot;proporcija&quot;</span>)</span>
<span id="cb17-15"><a href="Chapter4.html#cb17-15" tabindex="-1"></a></span>
<span id="cb17-16"><a href="Chapter4.html#cb17-16" tabindex="-1"></a>q14data2<span class="ot">=</span>q14data <span class="sc">%&gt;%</span> </span>
<span id="cb17-17"><a href="Chapter4.html#cb17-17" tabindex="-1"></a>  <span class="fu">group_by</span>(nosaukums,sezona,klase) <span class="sc">%&gt;%</span> </span>
<span id="cb17-18"><a href="Chapter4.html#cb17-18" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">vertiba=</span><span class="fu">round</span>(<span class="fu">weighted.mean</span>(proporcija,<span class="at">w=</span>SHAPE.AREA,<span class="at">na.rm=</span><span class="cn">TRUE</span>)<span class="sc">*</span><span class="dv">100</span>,<span class="dv">0</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb17-19"><a href="Chapter4.html#cb17-19" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb17-20"><a href="Chapter4.html#cb17-20" tabindex="-1"></a>  <span class="fu">filter</span>(klase<span class="sc">==</span><span class="st">&quot;crops&quot;</span>)</span>
<span id="cb17-21"><a href="Chapter4.html#cb17-21" tabindex="-1"></a></span>
<span id="cb17-22"><a href="Chapter4.html#cb17-22" tabindex="-1"></a><span class="fu">ggplot</span>(q14data,<span class="fu">aes</span>(sezona,proporcija,<span class="at">col=</span>klase))<span class="sc">+</span></span>
<span id="cb17-23"><a href="Chapter4.html#cb17-23" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>nosaukums)<span class="sc">+</span></span>
<span id="cb17-24"><a href="Chapter4.html#cb17-24" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">position=</span><span class="fu">position_dodge</span>(<span class="at">width=</span><span class="fl">0.75</span>),<span class="at">alpha=</span><span class="fl">0.2</span>)<span class="sc">+</span></span>
<span id="cb17-25"><a href="Chapter4.html#cb17-25" tabindex="-1"></a>  <span class="fu">theme_bw</span>()<span class="sc">+</span></span>
<span id="cb17-26"><a href="Chapter4.html#cb17-26" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.title.y =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb17-27"><a href="Chapter4.html#cb17-27" tabindex="-1"></a>        <span class="at">legend.title =</span> <span class="fu">element_blank</span>())<span class="sc">+</span></span>
<span id="cb17-28"><a href="Chapter4.html#cb17-28" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="at">data=</span>q14data2,<span class="fu">aes</span>(sezona,<span class="at">y=</span><span class="fl">1.1</span>,<span class="at">label=</span>vertiba),<span class="at">size=</span><span class="dv">3</span>)<span class="sc">+</span></span>
<span id="cb17-29"><a href="Chapter4.html#cb17-29" tabindex="-1"></a>  <span class="fu">scale_color_viridis_d</span>()<span class="sc">+</span></span>
<span id="cb17-30"><a href="Chapter4.html#cb17-30" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels=</span>scales<span class="sc">::</span><span class="fu">label_percent</span>(),<span class="at">breaks=</span><span class="fu">seq</span>(<span class="dv">0</span>,<span class="dv">1</span>,<span class="at">by=</span>.<span class="dv">1</span>))<span class="sc">+</span></span>
<span id="cb17-31"><a href="Chapter4.html#cb17-31" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x=</span><span class="st">&quot;Sezona&quot;</span>)</span>
<span id="cb17-32"><a href="Chapter4.html#cb17-32" tabindex="-1"></a><span class="fu">ggview</span>(<span class="at">width=</span><span class="dv">200</span>,<span class="at">height=</span><span class="dv">100</span>,<span class="at">units=</span><span class="st">&quot;mm&quot;</span>,<span class="at">dpi=</span><span class="dv">600</span>,<span class="at">device=</span><span class="st">&quot;png&quot;</span>)</span>
<span id="cb17-33"><a href="Chapter4.html#cb17-33" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="at">filename=</span><span class="st">&quot;./pic_q14.png&quot;</span>,<span class="at">width=</span><span class="dv">200</span>,<span class="at">height=</span><span class="dv">100</span>,<span class="at">units=</span><span class="st">&quot;mm&quot;</span>,<span class="at">dpi=</span><span class="dv">600</span>)</span></code></pre></div>
</div>
<div id="q1.5-auzas" class="section level3 hasAnchor" number="5.2.5">
<h3><span class="header-section-number">5.2.5</span> Q1.5: Auzas<a href="Chapter4.html#q1.5-auzas" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Sekojošajā attēlā <a href="Chapter4.html#fig:DWq15">5.6</a> ir ilustrēta auzu (kultūras kods “140”) saistība ar Dynamic World klasēm dažādos temporālajos griezumos. Skaitļi attēlu daļās norāda klases “crops” ar lauka platību svērto vidējo īpatsvaru. Redzams, ka zemākā atbilstība ir izmantojot tikai vasaras mēnešus.</p>
<div class="figure"><span style="display:block;" id="fig:DWq15"></span>
<img src="Atteli/ch004_q15.png" alt="Lauksaimniecības kultūru grupas &quot;auzas&quot; saistība ar DW klasēm." width="60%" />
<p class="caption">
Figure 5.6: Lauksaimniecības kultūru grupas “auzas” saistība ar DW klasēm.
</p>
</div>
<p><br></p>
<p>Komandu rindas attēla sagatavošanas reproducēšanai:</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="Chapter4.html#cb18-1" tabindex="-1"></a>dati<span class="ot">=</span>sfarrow<span class="sc">::</span><span class="fu">st_read_parquet</span>(<span class="st">&quot;./Q1_kulturas.parquet&quot;</span>)</span>
<span id="cb18-2"><a href="Chapter4.html#cb18-2" tabindex="-1"></a>dati<span class="ot">=</span>dati <span class="sc">%&gt;%</span> </span>
<span id="cb18-3"><a href="Chapter4.html#cb18-3" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">sezona=</span><span class="fu">factor</span>(periods,<span class="at">ordered=</span><span class="cn">TRUE</span>,</span>
<span id="cb18-4"><a href="Chapter4.html#cb18-4" tabindex="-1"></a>                       <span class="at">levels=</span><span class="fu">c</span>(<span class="st">&quot;AprMay&quot;</span>,<span class="st">&quot;AprJun&quot;</span>,<span class="st">&quot;AprJul&quot;</span>,<span class="st">&quot;AprAug&quot;</span>,<span class="st">&quot;MayJun&quot;</span>,</span>
<span id="cb18-5"><a href="Chapter4.html#cb18-5" tabindex="-1"></a>                                <span class="st">&quot;MayJul&quot;</span>,<span class="st">&quot;MayAug&quot;</span>,<span class="st">&quot;JunJul&quot;</span>,<span class="st">&quot;JunAug&quot;</span>,<span class="st">&quot;JulAug&quot;</span>)))</span>
<span id="cb18-6"><a href="Chapter4.html#cb18-6" tabindex="-1"></a>auzas<span class="ot">=</span><span class="fu">c</span>(<span class="st">&quot;140&quot;</span>)</span>
<span id="cb18-7"><a href="Chapter4.html#cb18-7" tabindex="-1"></a>q15data<span class="ot">=</span><span class="fu">data.frame</span>(dati) <span class="sc">%&gt;%</span> </span>
<span id="cb18-8"><a href="Chapter4.html#cb18-8" tabindex="-1"></a>  <span class="fu">filter</span>(PRODUCT_CODE <span class="sc">%in%</span> auzas) <span class="sc">%&gt;%</span> </span>
<span id="cb18-9"><a href="Chapter4.html#cb18-9" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(PRODUCT_CODE,PRODUCT_DESCRIPTION,SHAPE.AREA,sezona,water<span class="sc">:</span>snow_and_ice) <span class="sc">%&gt;%</span> </span>
<span id="cb18-10"><a href="Chapter4.html#cb18-10" tabindex="-1"></a>  <span class="fu">group_by</span>(PRODUCT_CODE) <span class="sc">%&gt;%</span> </span>
<span id="cb18-11"><a href="Chapter4.html#cb18-11" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">skaits=</span><span class="fu">n</span>()<span class="sc">/</span><span class="dv">10</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb18-12"><a href="Chapter4.html#cb18-12" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb18-13"><a href="Chapter4.html#cb18-13" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">nosaukums=</span><span class="fu">paste0</span>(PRODUCT_DESCRIPTION,<span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span>,<span class="st">&quot;n=&quot;</span>,skaits)) <span class="sc">%&gt;%</span> </span>
<span id="cb18-14"><a href="Chapter4.html#cb18-14" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols=</span>water<span class="sc">:</span>snow_and_ice,<span class="at">names_to =</span> <span class="st">&quot;klase&quot;</span>,<span class="at">values_to =</span> <span class="st">&quot;proporcija&quot;</span>)</span>
<span id="cb18-15"><a href="Chapter4.html#cb18-15" tabindex="-1"></a></span>
<span id="cb18-16"><a href="Chapter4.html#cb18-16" tabindex="-1"></a>q15data2<span class="ot">=</span>q15data <span class="sc">%&gt;%</span> </span>
<span id="cb18-17"><a href="Chapter4.html#cb18-17" tabindex="-1"></a>  <span class="fu">group_by</span>(nosaukums,sezona,klase) <span class="sc">%&gt;%</span> </span>
<span id="cb18-18"><a href="Chapter4.html#cb18-18" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">vertiba=</span><span class="fu">round</span>(<span class="fu">weighted.mean</span>(proporcija,<span class="at">w=</span>SHAPE.AREA,<span class="at">na.rm=</span><span class="cn">TRUE</span>)<span class="sc">*</span><span class="dv">100</span>,<span class="dv">0</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb18-19"><a href="Chapter4.html#cb18-19" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb18-20"><a href="Chapter4.html#cb18-20" tabindex="-1"></a>  <span class="fu">filter</span>(klase<span class="sc">==</span><span class="st">&quot;crops&quot;</span>)</span>
<span id="cb18-21"><a href="Chapter4.html#cb18-21" tabindex="-1"></a></span>
<span id="cb18-22"><a href="Chapter4.html#cb18-22" tabindex="-1"></a><span class="fu">ggplot</span>(q15data,<span class="fu">aes</span>(sezona,proporcija,<span class="at">col=</span>klase))<span class="sc">+</span></span>
<span id="cb18-23"><a href="Chapter4.html#cb18-23" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>nosaukums)<span class="sc">+</span></span>
<span id="cb18-24"><a href="Chapter4.html#cb18-24" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">position=</span><span class="fu">position_dodge</span>(<span class="at">width=</span><span class="fl">0.75</span>),<span class="at">alpha=</span><span class="fl">0.2</span>)<span class="sc">+</span></span>
<span id="cb18-25"><a href="Chapter4.html#cb18-25" tabindex="-1"></a>  <span class="fu">theme_bw</span>()<span class="sc">+</span></span>
<span id="cb18-26"><a href="Chapter4.html#cb18-26" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.title.y =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb18-27"><a href="Chapter4.html#cb18-27" tabindex="-1"></a>        <span class="at">legend.title =</span> <span class="fu">element_blank</span>())<span class="sc">+</span></span>
<span id="cb18-28"><a href="Chapter4.html#cb18-28" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="at">data=</span>q15data2,<span class="fu">aes</span>(sezona,<span class="at">y=</span><span class="fl">1.1</span>,<span class="at">label=</span>vertiba),<span class="at">size=</span><span class="dv">3</span>)<span class="sc">+</span></span>
<span id="cb18-29"><a href="Chapter4.html#cb18-29" tabindex="-1"></a>  <span class="fu">scale_color_viridis_d</span>()<span class="sc">+</span></span>
<span id="cb18-30"><a href="Chapter4.html#cb18-30" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels=</span>scales<span class="sc">::</span><span class="fu">label_percent</span>(),<span class="at">breaks=</span><span class="fu">seq</span>(<span class="dv">0</span>,<span class="dv">1</span>,<span class="at">by=</span>.<span class="dv">1</span>))<span class="sc">+</span></span>
<span id="cb18-31"><a href="Chapter4.html#cb18-31" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x=</span><span class="st">&quot;Sezona&quot;</span>)</span>
<span id="cb18-32"><a href="Chapter4.html#cb18-32" tabindex="-1"></a><span class="fu">ggview</span>(<span class="at">width=</span><span class="dv">200</span>,<span class="at">height=</span><span class="dv">100</span>,<span class="at">units=</span><span class="st">&quot;mm&quot;</span>,<span class="at">dpi=</span><span class="dv">600</span>,<span class="at">device=</span><span class="st">&quot;png&quot;</span>)</span>
<span id="cb18-33"><a href="Chapter4.html#cb18-33" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="at">filename=</span><span class="st">&quot;./pic_q15.png&quot;</span>,<span class="at">width=</span><span class="dv">200</span>,<span class="at">height=</span><span class="dv">100</span>,<span class="at">units=</span><span class="st">&quot;mm&quot;</span>,<span class="at">dpi=</span><span class="dv">600</span>)</span></code></pre></div>
</div>
<div id="q1.6-kukurūza" class="section level3 hasAnchor" number="5.2.6">
<h3><span class="header-section-number">5.2.6</span> Q1.6: Kukurūza<a href="Chapter4.html#q1.6-kukurūza" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Sekojošajā attēlā <a href="Chapter4.html#fig:DWq16">5.7</a> ir ilustrēta kukurūzas (kultūru kodi “791”,“741”) saistība ar Dynamic World klasēm dažādos temporālajos griezumos. Skaitļi attēlu daļās norāda klases “crops” ar lauka platību svērto vidējo īpatsvaru. Redzams, ka zemākā atbilstība ir izmantojot tikai vasaras mēnešus.</p>
<div class="figure"><span style="display:block;" id="fig:DWq16"></span>
<img src="Atteli/ch004_q16.png" alt="Lauksaimniecības kultūru grupas &quot;kukurūza&quot; saistība ar DW klasēm." width="80%" />
<p class="caption">
Figure 5.7: Lauksaimniecības kultūru grupas “kukurūza” saistība ar DW klasēm.
</p>
</div>
<p><br></p>
<p>Komandu rindas attēla sagatavošanas reproducēšanai:</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="Chapter4.html#cb19-1" tabindex="-1"></a>dati<span class="ot">=</span>sfarrow<span class="sc">::</span><span class="fu">st_read_parquet</span>(<span class="st">&quot;./Q1_kulturas.parquet&quot;</span>)</span>
<span id="cb19-2"><a href="Chapter4.html#cb19-2" tabindex="-1"></a>dati<span class="ot">=</span>dati <span class="sc">%&gt;%</span> </span>
<span id="cb19-3"><a href="Chapter4.html#cb19-3" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">sezona=</span><span class="fu">factor</span>(periods,<span class="at">ordered=</span><span class="cn">TRUE</span>,</span>
<span id="cb19-4"><a href="Chapter4.html#cb19-4" tabindex="-1"></a>                       <span class="at">levels=</span><span class="fu">c</span>(<span class="st">&quot;AprMay&quot;</span>,<span class="st">&quot;AprJun&quot;</span>,<span class="st">&quot;AprJul&quot;</span>,<span class="st">&quot;AprAug&quot;</span>,<span class="st">&quot;MayJun&quot;</span>,</span>
<span id="cb19-5"><a href="Chapter4.html#cb19-5" tabindex="-1"></a>                                <span class="st">&quot;MayJul&quot;</span>,<span class="st">&quot;MayAug&quot;</span>,<span class="st">&quot;JunJul&quot;</span>,<span class="st">&quot;JunAug&quot;</span>,<span class="st">&quot;JulAug&quot;</span>)))</span>
<span id="cb19-6"><a href="Chapter4.html#cb19-6" tabindex="-1"></a>kukuruza<span class="ot">=</span><span class="fu">c</span>(<span class="st">&quot;791&quot;</span>,<span class="st">&quot;741&quot;</span>)</span>
<span id="cb19-7"><a href="Chapter4.html#cb19-7" tabindex="-1"></a>q16data<span class="ot">=</span><span class="fu">data.frame</span>(dati) <span class="sc">%&gt;%</span> </span>
<span id="cb19-8"><a href="Chapter4.html#cb19-8" tabindex="-1"></a>  <span class="fu">filter</span>(PRODUCT_CODE <span class="sc">%in%</span> kukuruza) <span class="sc">%&gt;%</span> </span>
<span id="cb19-9"><a href="Chapter4.html#cb19-9" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(PRODUCT_CODE,PRODUCT_DESCRIPTION,SHAPE.AREA,sezona,water<span class="sc">:</span>snow_and_ice) <span class="sc">%&gt;%</span> </span>
<span id="cb19-10"><a href="Chapter4.html#cb19-10" tabindex="-1"></a>  <span class="fu">group_by</span>(PRODUCT_CODE) <span class="sc">%&gt;%</span> </span>
<span id="cb19-11"><a href="Chapter4.html#cb19-11" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">skaits=</span><span class="fu">n</span>()<span class="sc">/</span><span class="dv">10</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb19-12"><a href="Chapter4.html#cb19-12" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb19-13"><a href="Chapter4.html#cb19-13" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">nosaukums=</span><span class="fu">paste0</span>(PRODUCT_DESCRIPTION,<span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span>,<span class="st">&quot;n=&quot;</span>,skaits)) <span class="sc">%&gt;%</span> </span>
<span id="cb19-14"><a href="Chapter4.html#cb19-14" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols=</span>water<span class="sc">:</span>snow_and_ice,<span class="at">names_to =</span> <span class="st">&quot;klase&quot;</span>,<span class="at">values_to =</span> <span class="st">&quot;proporcija&quot;</span>)</span>
<span id="cb19-15"><a href="Chapter4.html#cb19-15" tabindex="-1"></a></span>
<span id="cb19-16"><a href="Chapter4.html#cb19-16" tabindex="-1"></a>q16data2<span class="ot">=</span>q16data <span class="sc">%&gt;%</span> </span>
<span id="cb19-17"><a href="Chapter4.html#cb19-17" tabindex="-1"></a>  <span class="fu">group_by</span>(nosaukums,sezona,klase) <span class="sc">%&gt;%</span> </span>
<span id="cb19-18"><a href="Chapter4.html#cb19-18" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">vertiba=</span><span class="fu">round</span>(<span class="fu">weighted.mean</span>(proporcija,<span class="at">w=</span>SHAPE.AREA,<span class="at">na.rm=</span><span class="cn">TRUE</span>)<span class="sc">*</span><span class="dv">100</span>,<span class="dv">0</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb19-19"><a href="Chapter4.html#cb19-19" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb19-20"><a href="Chapter4.html#cb19-20" tabindex="-1"></a>  <span class="fu">filter</span>(klase<span class="sc">==</span><span class="st">&quot;crops&quot;</span>)</span>
<span id="cb19-21"><a href="Chapter4.html#cb19-21" tabindex="-1"></a></span>
<span id="cb19-22"><a href="Chapter4.html#cb19-22" tabindex="-1"></a><span class="fu">ggplot</span>(q16data,<span class="fu">aes</span>(sezona,proporcija,<span class="at">col=</span>klase))<span class="sc">+</span></span>
<span id="cb19-23"><a href="Chapter4.html#cb19-23" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>nosaukums)<span class="sc">+</span></span>
<span id="cb19-24"><a href="Chapter4.html#cb19-24" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">position=</span><span class="fu">position_dodge</span>(<span class="at">width=</span><span class="fl">0.75</span>),<span class="at">alpha=</span><span class="fl">0.2</span>)<span class="sc">+</span></span>
<span id="cb19-25"><a href="Chapter4.html#cb19-25" tabindex="-1"></a>  <span class="fu">theme_bw</span>()<span class="sc">+</span></span>
<span id="cb19-26"><a href="Chapter4.html#cb19-26" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle=</span><span class="dv">90</span>,<span class="at">vjust=</span><span class="fl">0.5</span>),</span>
<span id="cb19-27"><a href="Chapter4.html#cb19-27" tabindex="-1"></a>        <span class="at">axis.title.y =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb19-28"><a href="Chapter4.html#cb19-28" tabindex="-1"></a>        <span class="at">legend.title =</span> <span class="fu">element_blank</span>())<span class="sc">+</span></span>
<span id="cb19-29"><a href="Chapter4.html#cb19-29" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="at">data=</span>q16data2,<span class="fu">aes</span>(sezona,<span class="at">y=</span><span class="fl">1.1</span>,<span class="at">label=</span>vertiba),<span class="at">size=</span><span class="dv">3</span>)<span class="sc">+</span></span>
<span id="cb19-30"><a href="Chapter4.html#cb19-30" tabindex="-1"></a>  <span class="fu">scale_color_viridis_d</span>()<span class="sc">+</span></span>
<span id="cb19-31"><a href="Chapter4.html#cb19-31" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels=</span>scales<span class="sc">::</span><span class="fu">label_percent</span>(),<span class="at">breaks=</span><span class="fu">seq</span>(<span class="dv">0</span>,<span class="dv">1</span>,<span class="at">by=</span>.<span class="dv">1</span>))<span class="sc">+</span></span>
<span id="cb19-32"><a href="Chapter4.html#cb19-32" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x=</span><span class="st">&quot;Sezona&quot;</span>)</span>
<span id="cb19-33"><a href="Chapter4.html#cb19-33" tabindex="-1"></a><span class="fu">ggview</span>(<span class="at">width=</span><span class="dv">250</span>,<span class="at">height=</span><span class="dv">100</span>,<span class="at">units=</span><span class="st">&quot;mm&quot;</span>,<span class="at">dpi=</span><span class="dv">600</span>,<span class="at">device=</span><span class="st">&quot;png&quot;</span>)</span>
<span id="cb19-34"><a href="Chapter4.html#cb19-34" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="at">filename=</span><span class="st">&quot;./pic_q16.png&quot;</span>,<span class="at">width=</span><span class="dv">250</span>,<span class="at">height=</span><span class="dv">100</span>,<span class="at">units=</span><span class="st">&quot;mm&quot;</span>,<span class="at">dpi=</span><span class="dv">600</span>)</span></code></pre></div>
</div>
<div id="q1.7-papuves" class="section level3 hasAnchor" number="5.2.7">
<h3><span class="header-section-number">5.2.7</span> Q1.7: Papuves<a href="Chapter4.html#q1.7-papuves" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Sekojošajā attēlā <a href="Chapter4.html#fig:DWq17a">5.8</a> ir ilustrēta papuvju (kultūru kodi “610”,“612”) saistība ar Dynamic World klasēm dažādos temporālajos griezumos. Skaitļi attēlu daļās norāda klases “crops” ar lauka platību svērto vidējo īpatsvaru. Redzams, ka zemākā atbilstība ir izmantojot tikai vasaras mēnešus. Dominējošā klase ir “crops”, tomēr nereti pikseļi ir klasificēti kā “grass”. Atkarībā no sezonas, par “grass” biežāk sastopama var būt klase “trees”, kas, visai droši ir saistāms ar lauka konfigurāciju, kas kā perimetra-laukuma attiecība ir demonstrēts zemāk <a href="Chapter4.html#fig:DWq17b">5.9</a>.</p>
<div class="figure"><span style="display:block;" id="fig:DWq17a"></span>
<img src="Atteli/ch004_q17.png" alt="Lauksaimniecības kultūru grupas &quot;papuves&quot; saistība ar DW klasēm." width="80%" />
<p class="caption">
Figure 5.8: Lauksaimniecības kultūru grupas “papuves” saistība ar DW klasēm.
</p>
</div>
<p><br></p>
<div class="figure"><span style="display:block;" id="fig:DWq17b"></span>
<img src="Atteli/ch004_q17b.png" alt="Lauksaimniecības kultūru grupas &quot;papuves&quot; perimetra-laukuma attiecības saistība ar DW klasēm." width="100%" />
<p class="caption">
Figure 5.9: Lauksaimniecības kultūru grupas “papuves” perimetra-laukuma attiecības saistība ar DW klasēm.
</p>
</div>
<p><br></p>
<p>Komandu rindas attēlu sagatavošanas reproducēšanai:</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="Chapter4.html#cb20-1" tabindex="-1"></a>dati<span class="ot">=</span>sfarrow<span class="sc">::</span><span class="fu">st_read_parquet</span>(<span class="st">&quot;./Q1_kulturas.parquet&quot;</span>)</span>
<span id="cb20-2"><a href="Chapter4.html#cb20-2" tabindex="-1"></a>dati<span class="ot">=</span>dati <span class="sc">%&gt;%</span> </span>
<span id="cb20-3"><a href="Chapter4.html#cb20-3" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">sezona=</span><span class="fu">factor</span>(periods,<span class="at">ordered=</span><span class="cn">TRUE</span>,</span>
<span id="cb20-4"><a href="Chapter4.html#cb20-4" tabindex="-1"></a>                       <span class="at">levels=</span><span class="fu">c</span>(<span class="st">&quot;AprMay&quot;</span>,<span class="st">&quot;AprJun&quot;</span>,<span class="st">&quot;AprJul&quot;</span>,<span class="st">&quot;AprAug&quot;</span>,<span class="st">&quot;MayJun&quot;</span>,</span>
<span id="cb20-5"><a href="Chapter4.html#cb20-5" tabindex="-1"></a>                                <span class="st">&quot;MayJul&quot;</span>,<span class="st">&quot;MayAug&quot;</span>,<span class="st">&quot;JunJul&quot;</span>,<span class="st">&quot;JunAug&quot;</span>,<span class="st">&quot;JulAug&quot;</span>)))</span>
<span id="cb20-6"><a href="Chapter4.html#cb20-6" tabindex="-1"></a>papuve<span class="ot">=</span><span class="fu">c</span>(<span class="st">&quot;610&quot;</span>,<span class="st">&quot;612&quot;</span>)</span>
<span id="cb20-7"><a href="Chapter4.html#cb20-7" tabindex="-1"></a></span>
<span id="cb20-8"><a href="Chapter4.html#cb20-8" tabindex="-1"></a>q17data<span class="ot">=</span><span class="fu">data.frame</span>(dati) <span class="sc">%&gt;%</span> </span>
<span id="cb20-9"><a href="Chapter4.html#cb20-9" tabindex="-1"></a>  <span class="fu">filter</span>(PRODUCT_CODE <span class="sc">%in%</span> papuve) <span class="sc">%&gt;%</span> </span>
<span id="cb20-10"><a href="Chapter4.html#cb20-10" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(PRODUCT_CODE,PRODUCT_DESCRIPTION,SHAPE.AREA,sezona,water<span class="sc">:</span>snow_and_ice) <span class="sc">%&gt;%</span> </span>
<span id="cb20-11"><a href="Chapter4.html#cb20-11" tabindex="-1"></a>  <span class="fu">group_by</span>(PRODUCT_CODE) <span class="sc">%&gt;%</span> </span>
<span id="cb20-12"><a href="Chapter4.html#cb20-12" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">skaits=</span><span class="fu">n</span>()<span class="sc">/</span><span class="dv">10</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb20-13"><a href="Chapter4.html#cb20-13" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb20-14"><a href="Chapter4.html#cb20-14" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">nosaukums=</span><span class="fu">paste0</span>(PRODUCT_DESCRIPTION,<span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span>,<span class="st">&quot;n=&quot;</span>,skaits)) <span class="sc">%&gt;%</span> </span>
<span id="cb20-15"><a href="Chapter4.html#cb20-15" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols=</span>water<span class="sc">:</span>snow_and_ice,<span class="at">names_to =</span> <span class="st">&quot;klase&quot;</span>,<span class="at">values_to =</span> <span class="st">&quot;proporcija&quot;</span>)</span>
<span id="cb20-16"><a href="Chapter4.html#cb20-16" tabindex="-1"></a></span>
<span id="cb20-17"><a href="Chapter4.html#cb20-17" tabindex="-1"></a>q17data2<span class="ot">=</span>q17data <span class="sc">%&gt;%</span> </span>
<span id="cb20-18"><a href="Chapter4.html#cb20-18" tabindex="-1"></a>  <span class="fu">group_by</span>(nosaukums,sezona,klase) <span class="sc">%&gt;%</span> </span>
<span id="cb20-19"><a href="Chapter4.html#cb20-19" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">vertiba=</span><span class="fu">round</span>(<span class="fu">weighted.mean</span>(proporcija,<span class="at">w=</span>SHAPE.AREA,<span class="at">na.rm=</span><span class="cn">TRUE</span>)<span class="sc">*</span><span class="dv">100</span>,<span class="dv">0</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb20-20"><a href="Chapter4.html#cb20-20" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb20-21"><a href="Chapter4.html#cb20-21" tabindex="-1"></a>  <span class="fu">filter</span>(klase<span class="sc">==</span><span class="st">&quot;crops&quot;</span>)</span>
<span id="cb20-22"><a href="Chapter4.html#cb20-22" tabindex="-1"></a></span>
<span id="cb20-23"><a href="Chapter4.html#cb20-23" tabindex="-1"></a><span class="fu">ggplot</span>(q17data,<span class="fu">aes</span>(sezona,proporcija,<span class="at">col=</span>klase))<span class="sc">+</span></span>
<span id="cb20-24"><a href="Chapter4.html#cb20-24" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>nosaukums)<span class="sc">+</span></span>
<span id="cb20-25"><a href="Chapter4.html#cb20-25" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">position=</span><span class="fu">position_dodge</span>(<span class="at">width=</span><span class="fl">0.75</span>),<span class="at">alpha=</span><span class="fl">0.2</span>)<span class="sc">+</span></span>
<span id="cb20-26"><a href="Chapter4.html#cb20-26" tabindex="-1"></a>  <span class="fu">theme_bw</span>()<span class="sc">+</span></span>
<span id="cb20-27"><a href="Chapter4.html#cb20-27" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle=</span><span class="dv">90</span>,<span class="at">vjust=</span><span class="fl">0.5</span>),</span>
<span id="cb20-28"><a href="Chapter4.html#cb20-28" tabindex="-1"></a>        <span class="at">axis.title.y =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb20-29"><a href="Chapter4.html#cb20-29" tabindex="-1"></a>        <span class="at">legend.title =</span> <span class="fu">element_blank</span>())<span class="sc">+</span></span>
<span id="cb20-30"><a href="Chapter4.html#cb20-30" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="at">data=</span>q17data2,<span class="fu">aes</span>(sezona,<span class="at">y=</span><span class="fl">1.1</span>,<span class="at">label=</span>vertiba),<span class="at">size=</span><span class="dv">3</span>)<span class="sc">+</span></span>
<span id="cb20-31"><a href="Chapter4.html#cb20-31" tabindex="-1"></a>  <span class="fu">scale_color_viridis_d</span>()<span class="sc">+</span></span>
<span id="cb20-32"><a href="Chapter4.html#cb20-32" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels=</span>scales<span class="sc">::</span><span class="fu">label_percent</span>(),<span class="at">breaks=</span><span class="fu">seq</span>(<span class="dv">0</span>,<span class="dv">1</span>,<span class="at">by=</span>.<span class="dv">1</span>))<span class="sc">+</span></span>
<span id="cb20-33"><a href="Chapter4.html#cb20-33" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x=</span><span class="st">&quot;Sezona&quot;</span>)</span>
<span id="cb20-34"><a href="Chapter4.html#cb20-34" tabindex="-1"></a><span class="fu">ggview</span>(<span class="at">width=</span><span class="dv">250</span>,<span class="at">height=</span><span class="dv">100</span>,<span class="at">units=</span><span class="st">&quot;mm&quot;</span>,<span class="at">dpi=</span><span class="dv">600</span>,<span class="at">device=</span><span class="st">&quot;png&quot;</span>)</span>
<span id="cb20-35"><a href="Chapter4.html#cb20-35" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="at">filename=</span><span class="st">&quot;./pic_q17.png&quot;</span>,<span class="at">width=</span><span class="dv">250</span>,<span class="at">height=</span><span class="dv">100</span>,<span class="at">units=</span><span class="st">&quot;mm&quot;</span>,<span class="at">dpi=</span><span class="dv">600</span>)</span>
<span id="cb20-36"><a href="Chapter4.html#cb20-36" tabindex="-1"></a></span>
<span id="cb20-37"><a href="Chapter4.html#cb20-37" tabindex="-1"></a></span>
<span id="cb20-38"><a href="Chapter4.html#cb20-38" tabindex="-1"></a></span>
<span id="cb20-39"><a href="Chapter4.html#cb20-39" tabindex="-1"></a>q17data3<span class="ot">=</span><span class="fu">data.frame</span>(dati) <span class="sc">%&gt;%</span> </span>
<span id="cb20-40"><a href="Chapter4.html#cb20-40" tabindex="-1"></a>  <span class="fu">filter</span>(PRODUCT_CODE <span class="sc">%in%</span> papuve) <span class="sc">%&gt;%</span> </span>
<span id="cb20-41"><a href="Chapter4.html#cb20-41" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">PAr=</span>SHAPE.LEN<span class="sc">/</span>SHAPE.AREA) <span class="sc">%&gt;%</span> </span>
<span id="cb20-42"><a href="Chapter4.html#cb20-42" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(PRODUCT_CODE,PRODUCT_DESCRIPTION,PAr,SHAPE.AREA,sezona,water<span class="sc">:</span>snow_and_ice) <span class="sc">%&gt;%</span> </span>
<span id="cb20-43"><a href="Chapter4.html#cb20-43" tabindex="-1"></a>  <span class="fu">group_by</span>(PRODUCT_CODE) <span class="sc">%&gt;%</span> </span>
<span id="cb20-44"><a href="Chapter4.html#cb20-44" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">skaits=</span><span class="fu">n</span>()<span class="sc">/</span><span class="dv">10</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb20-45"><a href="Chapter4.html#cb20-45" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb20-46"><a href="Chapter4.html#cb20-46" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">nosaukums=</span><span class="fu">paste0</span>(PRODUCT_DESCRIPTION,<span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span>,<span class="st">&quot;n=&quot;</span>,skaits)) <span class="sc">%&gt;%</span> </span>
<span id="cb20-47"><a href="Chapter4.html#cb20-47" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols=</span>water<span class="sc">:</span>snow_and_ice,<span class="at">names_to =</span> <span class="st">&quot;klase&quot;</span>,<span class="at">values_to =</span> <span class="st">&quot;proporcija&quot;</span>)</span>
<span id="cb20-48"><a href="Chapter4.html#cb20-48" tabindex="-1"></a></span>
<span id="cb20-49"><a href="Chapter4.html#cb20-49" tabindex="-1"></a><span class="fu">ggplot</span>(q17data3,<span class="fu">aes</span>(PAr,proporcija,<span class="at">col=</span>klase))<span class="sc">+</span></span>
<span id="cb20-50"><a href="Chapter4.html#cb20-50" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>sezona,<span class="at">ncol=</span><span class="dv">5</span>)<span class="sc">+</span></span>
<span id="cb20-51"><a href="Chapter4.html#cb20-51" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">alpha=</span><span class="fl">0.2</span>)<span class="sc">+</span></span>
<span id="cb20-52"><a href="Chapter4.html#cb20-52" tabindex="-1"></a>  <span class="fu">geom_smooth</span>()<span class="sc">+</span></span>
<span id="cb20-53"><a href="Chapter4.html#cb20-53" tabindex="-1"></a>  <span class="fu">theme_bw</span>()<span class="sc">+</span></span>
<span id="cb20-54"><a href="Chapter4.html#cb20-54" tabindex="-1"></a>  <span class="fu">coord_cartesian</span>(<span class="at">ylim=</span><span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">1</span>),<span class="at">xlim=</span><span class="fu">c</span>(<span class="dv">0</span>,<span class="fl">0.75</span>))<span class="sc">+</span></span>
<span id="cb20-55"><a href="Chapter4.html#cb20-55" tabindex="-1"></a>  <span class="fu">scale_color_viridis_d</span>()<span class="sc">+</span></span>
<span id="cb20-56"><a href="Chapter4.html#cb20-56" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels=</span>scales<span class="sc">::</span><span class="fu">label_percent</span>(),<span class="at">breaks=</span><span class="fu">seq</span>(<span class="dv">0</span>,<span class="dv">1</span>,<span class="at">by=</span>.<span class="dv">1</span>))<span class="sc">+</span></span>
<span id="cb20-57"><a href="Chapter4.html#cb20-57" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.title.y =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb20-58"><a href="Chapter4.html#cb20-58" tabindex="-1"></a>        <span class="at">legend.title =</span> <span class="fu">element_blank</span>())<span class="sc">+</span></span>
<span id="cb20-59"><a href="Chapter4.html#cb20-59" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x=</span><span class="st">&quot;Perimetra-laukuma attiecība&quot;</span>)</span>
<span id="cb20-60"><a href="Chapter4.html#cb20-60" tabindex="-1"></a><span class="fu">ggview</span>(<span class="at">width=</span><span class="dv">300</span>,<span class="at">height=</span><span class="dv">150</span>,<span class="at">units=</span><span class="st">&quot;mm&quot;</span>,<span class="at">dpi=</span><span class="dv">600</span>,<span class="at">device=</span><span class="st">&quot;png&quot;</span>)</span>
<span id="cb20-61"><a href="Chapter4.html#cb20-61" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="at">filename=</span><span class="st">&quot;./pic_q17b.png&quot;</span>,<span class="at">width=</span><span class="dv">300</span>,<span class="at">height=</span><span class="dv">150</span>,<span class="at">units=</span><span class="st">&quot;mm&quot;</span>,<span class="at">dpi=</span><span class="dv">600</span>)</span></code></pre></div>
</div>
<div id="q1.8-ilggadīgie-zālāji" class="section level3 hasAnchor" number="5.2.8">
<h3><span class="header-section-number">5.2.8</span> Q1.8: Ilggadīgie zālāji<a href="Chapter4.html#q1.8-ilggadīgie-zālāji" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Sekojošajā attēlā <a href="Chapter4.html#fig:DWq18a">5.10</a> ir ilustrēta ilggadīgo zālāju (kultūru kods “710”) saistība ar Dynamic World klasēm dažādos temporālajos griezumos. Skaitļi attēlu daļās norāda klases “crops” ar lauka platību svērto vidējo īpatsvaru. Redzams, ka zemākā atbilstība ir izmantojot tikai vasaras mēnešus, tomēr neatkarīgi no temporālā griezuma tā ir uzskatāma par vāju.</p>
<p>Viens no iespējamajiem iemesliem ir laukos un to malās esošie koki un krūmi. Lai par to pārliecinātos, veidoju saistību ar perimetra-laukuma attiecību (sekojošajā attēlā). Kā redzams <a href="Chapter4.html#fig:DWq18b">5.11</a>, tieši koku piesātinājums laukiem ar proporcionāli garāku malu ir iemesls misklasifikācijai. Tomēr arī šādā griezumā ir redzama sezonālā mainība - pavasara mēnešiem ir nozīme.</p>
<div class="figure"><span style="display:block;" id="fig:DWq18a"></span>
<img src="Atteli/ch004_q18.png" alt="Lauksaimniecības kultūru grupas &quot;ilggadīgi zālāji&quot; saistība ar DW klasēm." width="60%" />
<p class="caption">
Figure 5.10: Lauksaimniecības kultūru grupas “ilggadīgi zālāji” saistība ar DW klasēm.
</p>
</div>
<p><br></p>
<div class="figure"><span style="display:block;" id="fig:DWq18b"></span>
<img src="Atteli/ch004_q18b.png" alt="Lauksaimniecības kultūru grupas &quot;ilggadīgi zālāji&quot; perimetra-laukuma attiecības saistība ar DW klasēm." width="100%" />
<p class="caption">
Figure 5.11: Lauksaimniecības kultūru grupas “ilggadīgi zālāji” perimetra-laukuma attiecības saistība ar DW klasēm.
</p>
</div>
<p><br></p>
<p>Komandu rindas attēlu sagatavošanas reproducēšanai:</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="Chapter4.html#cb21-1" tabindex="-1"></a>dati<span class="ot">=</span>sfarrow<span class="sc">::</span><span class="fu">st_read_parquet</span>(<span class="st">&quot;./Q1_kulturas.parquet&quot;</span>)</span>
<span id="cb21-2"><a href="Chapter4.html#cb21-2" tabindex="-1"></a>dati<span class="ot">=</span>dati <span class="sc">%&gt;%</span> </span>
<span id="cb21-3"><a href="Chapter4.html#cb21-3" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">sezona=</span><span class="fu">factor</span>(periods,<span class="at">ordered=</span><span class="cn">TRUE</span>,</span>
<span id="cb21-4"><a href="Chapter4.html#cb21-4" tabindex="-1"></a>                       <span class="at">levels=</span><span class="fu">c</span>(<span class="st">&quot;AprMay&quot;</span>,<span class="st">&quot;AprJun&quot;</span>,<span class="st">&quot;AprJul&quot;</span>,<span class="st">&quot;AprAug&quot;</span>,<span class="st">&quot;MayJun&quot;</span>,</span>
<span id="cb21-5"><a href="Chapter4.html#cb21-5" tabindex="-1"></a>                                <span class="st">&quot;MayJul&quot;</span>,<span class="st">&quot;MayAug&quot;</span>,<span class="st">&quot;JunJul&quot;</span>,<span class="st">&quot;JunAug&quot;</span>,<span class="st">&quot;JulAug&quot;</span>)))</span>
<span id="cb21-6"><a href="Chapter4.html#cb21-6" tabindex="-1"></a>ilggadigi_zalaji<span class="ot">=</span><span class="fu">c</span>(<span class="st">&quot;710&quot;</span>)</span>
<span id="cb21-7"><a href="Chapter4.html#cb21-7" tabindex="-1"></a>q18data<span class="ot">=</span><span class="fu">data.frame</span>(dati) <span class="sc">%&gt;%</span> </span>
<span id="cb21-8"><a href="Chapter4.html#cb21-8" tabindex="-1"></a>  <span class="fu">filter</span>(PRODUCT_CODE <span class="sc">%in%</span> ilggadigi_zalaji) <span class="sc">%&gt;%</span> </span>
<span id="cb21-9"><a href="Chapter4.html#cb21-9" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(PRODUCT_CODE,PRODUCT_DESCRIPTION,SHAPE.AREA,sezona,water<span class="sc">:</span>snow_and_ice) <span class="sc">%&gt;%</span> </span>
<span id="cb21-10"><a href="Chapter4.html#cb21-10" tabindex="-1"></a>  <span class="fu">group_by</span>(PRODUCT_CODE) <span class="sc">%&gt;%</span> </span>
<span id="cb21-11"><a href="Chapter4.html#cb21-11" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">skaits=</span><span class="fu">n</span>()<span class="sc">/</span><span class="dv">10</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb21-12"><a href="Chapter4.html#cb21-12" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb21-13"><a href="Chapter4.html#cb21-13" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">nosaukums=</span><span class="fu">paste0</span>(PRODUCT_DESCRIPTION,<span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span>,<span class="st">&quot;n=&quot;</span>,skaits)) <span class="sc">%&gt;%</span> </span>
<span id="cb21-14"><a href="Chapter4.html#cb21-14" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols=</span>water<span class="sc">:</span>snow_and_ice,<span class="at">names_to =</span> <span class="st">&quot;klase&quot;</span>,<span class="at">values_to =</span> <span class="st">&quot;proporcija&quot;</span>)</span>
<span id="cb21-15"><a href="Chapter4.html#cb21-15" tabindex="-1"></a></span>
<span id="cb21-16"><a href="Chapter4.html#cb21-16" tabindex="-1"></a>q18data2<span class="ot">=</span>q18data <span class="sc">%&gt;%</span> </span>
<span id="cb21-17"><a href="Chapter4.html#cb21-17" tabindex="-1"></a>  <span class="fu">group_by</span>(nosaukums,sezona,klase) <span class="sc">%&gt;%</span> </span>
<span id="cb21-18"><a href="Chapter4.html#cb21-18" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">vertiba=</span><span class="fu">round</span>(<span class="fu">weighted.mean</span>(proporcija,<span class="at">w=</span>SHAPE.AREA,<span class="at">na.rm=</span><span class="cn">TRUE</span>)<span class="sc">*</span><span class="dv">100</span>,<span class="dv">0</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb21-19"><a href="Chapter4.html#cb21-19" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb21-20"><a href="Chapter4.html#cb21-20" tabindex="-1"></a>  <span class="fu">filter</span>(klase<span class="sc">==</span><span class="st">&quot;grass&quot;</span>)</span>
<span id="cb21-21"><a href="Chapter4.html#cb21-21" tabindex="-1"></a></span>
<span id="cb21-22"><a href="Chapter4.html#cb21-22" tabindex="-1"></a><span class="fu">ggplot</span>(q18data,<span class="fu">aes</span>(sezona,proporcija,<span class="at">col=</span>klase))<span class="sc">+</span></span>
<span id="cb21-23"><a href="Chapter4.html#cb21-23" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>nosaukums)<span class="sc">+</span></span>
<span id="cb21-24"><a href="Chapter4.html#cb21-24" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">position=</span><span class="fu">position_dodge</span>(<span class="at">width=</span><span class="fl">0.75</span>),<span class="at">alpha=</span><span class="fl">0.2</span>)<span class="sc">+</span></span>
<span id="cb21-25"><a href="Chapter4.html#cb21-25" tabindex="-1"></a>  <span class="fu">theme_bw</span>()<span class="sc">+</span></span>
<span id="cb21-26"><a href="Chapter4.html#cb21-26" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.title.y =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb21-27"><a href="Chapter4.html#cb21-27" tabindex="-1"></a>        <span class="at">legend.title =</span> <span class="fu">element_blank</span>())<span class="sc">+</span></span>
<span id="cb21-28"><a href="Chapter4.html#cb21-28" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="at">data=</span>q18data2,<span class="fu">aes</span>(sezona,<span class="at">y=</span><span class="fl">1.1</span>,<span class="at">label=</span>vertiba),<span class="at">size=</span><span class="dv">3</span>)<span class="sc">+</span></span>
<span id="cb21-29"><a href="Chapter4.html#cb21-29" tabindex="-1"></a>  <span class="fu">scale_color_viridis_d</span>()<span class="sc">+</span></span>
<span id="cb21-30"><a href="Chapter4.html#cb21-30" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels=</span>scales<span class="sc">::</span><span class="fu">label_percent</span>(),<span class="at">breaks=</span><span class="fu">seq</span>(<span class="dv">0</span>,<span class="dv">1</span>,<span class="at">by=</span>.<span class="dv">1</span>))<span class="sc">+</span></span>
<span id="cb21-31"><a href="Chapter4.html#cb21-31" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x=</span><span class="st">&quot;Sezona&quot;</span>)</span>
<span id="cb21-32"><a href="Chapter4.html#cb21-32" tabindex="-1"></a><span class="fu">ggview</span>(<span class="at">width=</span><span class="dv">200</span>,<span class="at">height=</span><span class="dv">100</span>,<span class="at">units=</span><span class="st">&quot;mm&quot;</span>,<span class="at">dpi=</span><span class="dv">600</span>,<span class="at">device=</span><span class="st">&quot;png&quot;</span>)</span>
<span id="cb21-33"><a href="Chapter4.html#cb21-33" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="at">filename=</span><span class="st">&quot;./pic_q18.png&quot;</span>,<span class="at">width=</span><span class="dv">200</span>,<span class="at">height=</span><span class="dv">100</span>,<span class="at">units=</span><span class="st">&quot;mm&quot;</span>,<span class="at">dpi=</span><span class="dv">600</span>)</span>
<span id="cb21-34"><a href="Chapter4.html#cb21-34" tabindex="-1"></a></span>
<span id="cb21-35"><a href="Chapter4.html#cb21-35" tabindex="-1"></a>q18data3<span class="ot">=</span><span class="fu">data.frame</span>(dati) <span class="sc">%&gt;%</span> </span>
<span id="cb21-36"><a href="Chapter4.html#cb21-36" tabindex="-1"></a>  <span class="fu">filter</span>(PRODUCT_CODE <span class="sc">%in%</span> ilggadigi_zalaji) <span class="sc">%&gt;%</span> </span>
<span id="cb21-37"><a href="Chapter4.html#cb21-37" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">PAr=</span>SHAPE.LEN<span class="sc">/</span>SHAPE.AREA) <span class="sc">%&gt;%</span> </span>
<span id="cb21-38"><a href="Chapter4.html#cb21-38" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(PRODUCT_CODE,PRODUCT_DESCRIPTION,PAr,SHAPE.AREA,sezona,water<span class="sc">:</span>snow_and_ice) <span class="sc">%&gt;%</span> </span>
<span id="cb21-39"><a href="Chapter4.html#cb21-39" tabindex="-1"></a>  <span class="fu">group_by</span>(PRODUCT_CODE) <span class="sc">%&gt;%</span> </span>
<span id="cb21-40"><a href="Chapter4.html#cb21-40" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">skaits=</span><span class="fu">n</span>()<span class="sc">/</span><span class="dv">10</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb21-41"><a href="Chapter4.html#cb21-41" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb21-42"><a href="Chapter4.html#cb21-42" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">nosaukums=</span><span class="fu">paste0</span>(PRODUCT_DESCRIPTION,<span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span>,<span class="st">&quot;n=&quot;</span>,skaits)) <span class="sc">%&gt;%</span> </span>
<span id="cb21-43"><a href="Chapter4.html#cb21-43" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols=</span>water<span class="sc">:</span>snow_and_ice,<span class="at">names_to =</span> <span class="st">&quot;klase&quot;</span>,<span class="at">values_to =</span> <span class="st">&quot;proporcija&quot;</span>)</span>
<span id="cb21-44"><a href="Chapter4.html#cb21-44" tabindex="-1"></a></span>
<span id="cb21-45"><a href="Chapter4.html#cb21-45" tabindex="-1"></a><span class="fu">ggplot</span>(q18data3,<span class="fu">aes</span>(PAr,proporcija,<span class="at">col=</span>klase))<span class="sc">+</span></span>
<span id="cb21-46"><a href="Chapter4.html#cb21-46" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>sezona,<span class="at">ncol=</span><span class="dv">5</span>)<span class="sc">+</span></span>
<span id="cb21-47"><a href="Chapter4.html#cb21-47" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">alpha=</span><span class="fl">0.2</span>)<span class="sc">+</span></span>
<span id="cb21-48"><a href="Chapter4.html#cb21-48" tabindex="-1"></a>  <span class="fu">geom_smooth</span>()<span class="sc">+</span></span>
<span id="cb21-49"><a href="Chapter4.html#cb21-49" tabindex="-1"></a>  <span class="fu">theme_bw</span>()<span class="sc">+</span></span>
<span id="cb21-50"><a href="Chapter4.html#cb21-50" tabindex="-1"></a>  <span class="fu">coord_cartesian</span>(<span class="at">ylim=</span><span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">1</span>))<span class="sc">+</span></span>
<span id="cb21-51"><a href="Chapter4.html#cb21-51" tabindex="-1"></a>  <span class="fu">scale_color_viridis_d</span>()<span class="sc">+</span></span>
<span id="cb21-52"><a href="Chapter4.html#cb21-52" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">breaks=</span><span class="fu">seq</span>(<span class="dv">0</span>,<span class="fl">0.2</span>,<span class="at">by=</span><span class="fl">0.1</span>))<span class="sc">+</span></span>
<span id="cb21-53"><a href="Chapter4.html#cb21-53" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels=</span>scales<span class="sc">::</span><span class="fu">label_percent</span>(),<span class="at">breaks=</span><span class="fu">seq</span>(<span class="dv">0</span>,<span class="dv">1</span>,<span class="at">by=</span>.<span class="dv">1</span>))<span class="sc">+</span></span>
<span id="cb21-54"><a href="Chapter4.html#cb21-54" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.title.y =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb21-55"><a href="Chapter4.html#cb21-55" tabindex="-1"></a>        <span class="at">legend.title =</span> <span class="fu">element_blank</span>())<span class="sc">+</span></span>
<span id="cb21-56"><a href="Chapter4.html#cb21-56" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x=</span><span class="st">&quot;Perimetra-laukuma attiecība&quot;</span>)</span>
<span id="cb21-57"><a href="Chapter4.html#cb21-57" tabindex="-1"></a><span class="fu">ggview</span>(<span class="at">width=</span><span class="dv">300</span>,<span class="at">height=</span><span class="dv">150</span>,<span class="at">units=</span><span class="st">&quot;mm&quot;</span>,<span class="at">dpi=</span><span class="dv">600</span>,<span class="at">device=</span><span class="st">&quot;png&quot;</span>)</span>
<span id="cb21-58"><a href="Chapter4.html#cb21-58" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="at">filename=</span><span class="st">&quot;./pic_q18b.png&quot;</span>,<span class="at">width=</span><span class="dv">300</span>,<span class="at">height=</span><span class="dv">150</span>,<span class="at">units=</span><span class="st">&quot;mm&quot;</span>,<span class="at">dpi=</span><span class="dv">600</span>)</span></code></pre></div>
</div>
<div id="q1.9-kultivētie-zālāji" class="section level3 hasAnchor" number="5.2.9">
<h3><span class="header-section-number">5.2.9</span> Q1.9: Kultivētie zālāji<a href="Chapter4.html#q1.9-kultivētie-zālāji" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Sekojošajā attēlā <a href="Chapter4.html#fig:DWq19">5.12</a> ir ilustrēta kultivēto zālāju (kultūru kodi “720”,“760”) saistība ar Dynamic World klasēm dažādos temporālajos griezumos. Skaitļi attēlu daļās norāda klašu “crops” un “grass” ar lauka platību svērto vidējo īpatsvaru. Redzama izteikta mainība starp abām dominējošajām klasēm, kas liecina, ka ne katru galu katrs zālājs tiek ielabots aršanai līdzīgā apjomā. Šī mainība, protams, nav ērta, bet ir pamats izdalīt šo biotopu grupu atsevišķi.</p>
<div class="figure"><span style="display:block;" id="fig:DWq19"></span>
<img src="Atteli/ch004_q19.png" alt="Lauksaimniecības kultūru grupas &quot;kultivēti zālāji&quot; saistība ar DW klasēm." width="100%" />
<p class="caption">
Figure 5.12: Lauksaimniecības kultūru grupas “kultivēti zālāji” saistība ar DW klasēm.
</p>
</div>
<p><br></p>
<p>Komandu rindas attēla sagatavošanas reproducēšanai:</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="Chapter4.html#cb22-1" tabindex="-1"></a>dati<span class="ot">=</span>sfarrow<span class="sc">::</span><span class="fu">st_read_parquet</span>(<span class="st">&quot;./Q1_kulturas.parquet&quot;</span>)</span>
<span id="cb22-2"><a href="Chapter4.html#cb22-2" tabindex="-1"></a>dati<span class="ot">=</span>dati <span class="sc">%&gt;%</span> </span>
<span id="cb22-3"><a href="Chapter4.html#cb22-3" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">sezona=</span><span class="fu">factor</span>(periods,<span class="at">ordered=</span><span class="cn">TRUE</span>,</span>
<span id="cb22-4"><a href="Chapter4.html#cb22-4" tabindex="-1"></a>                       <span class="at">levels=</span><span class="fu">c</span>(<span class="st">&quot;AprMay&quot;</span>,<span class="st">&quot;AprJun&quot;</span>,<span class="st">&quot;AprJul&quot;</span>,<span class="st">&quot;AprAug&quot;</span>,<span class="st">&quot;MayJun&quot;</span>,</span>
<span id="cb22-5"><a href="Chapter4.html#cb22-5" tabindex="-1"></a>                                <span class="st">&quot;MayJul&quot;</span>,<span class="st">&quot;MayAug&quot;</span>,<span class="st">&quot;JunJul&quot;</span>,<span class="st">&quot;JunAug&quot;</span>,<span class="st">&quot;JulAug&quot;</span>)))</span>
<span id="cb22-6"><a href="Chapter4.html#cb22-6" tabindex="-1"></a>kultiveti_zalaji<span class="ot">=</span><span class="fu">c</span>(<span class="st">&quot;720&quot;</span>,<span class="st">&quot;760&quot;</span>)</span>
<span id="cb22-7"><a href="Chapter4.html#cb22-7" tabindex="-1"></a>q19data<span class="ot">=</span><span class="fu">data.frame</span>(dati) <span class="sc">%&gt;%</span> </span>
<span id="cb22-8"><a href="Chapter4.html#cb22-8" tabindex="-1"></a>  <span class="fu">filter</span>(PRODUCT_CODE <span class="sc">%in%</span> kultiveti_zalaji) <span class="sc">%&gt;%</span> </span>
<span id="cb22-9"><a href="Chapter4.html#cb22-9" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(PRODUCT_CODE,PRODUCT_DESCRIPTION,SHAPE.AREA,sezona,water<span class="sc">:</span>snow_and_ice) <span class="sc">%&gt;%</span> </span>
<span id="cb22-10"><a href="Chapter4.html#cb22-10" tabindex="-1"></a>  <span class="fu">group_by</span>(PRODUCT_CODE) <span class="sc">%&gt;%</span> </span>
<span id="cb22-11"><a href="Chapter4.html#cb22-11" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">skaits=</span><span class="fu">n</span>()<span class="sc">/</span><span class="dv">10</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb22-12"><a href="Chapter4.html#cb22-12" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb22-13"><a href="Chapter4.html#cb22-13" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">nosaukums=</span><span class="fu">paste0</span>(PRODUCT_DESCRIPTION,<span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span>,<span class="st">&quot;n=&quot;</span>,skaits)) <span class="sc">%&gt;%</span> </span>
<span id="cb22-14"><a href="Chapter4.html#cb22-14" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols=</span>water<span class="sc">:</span>snow_and_ice,<span class="at">names_to =</span> <span class="st">&quot;klase&quot;</span>,<span class="at">values_to =</span> <span class="st">&quot;proporcija&quot;</span>)</span>
<span id="cb22-15"><a href="Chapter4.html#cb22-15" tabindex="-1"></a></span>
<span id="cb22-16"><a href="Chapter4.html#cb22-16" tabindex="-1"></a>q19data2<span class="ot">=</span>q19data <span class="sc">%&gt;%</span> </span>
<span id="cb22-17"><a href="Chapter4.html#cb22-17" tabindex="-1"></a>  <span class="fu">group_by</span>(nosaukums,sezona,klase) <span class="sc">%&gt;%</span> </span>
<span id="cb22-18"><a href="Chapter4.html#cb22-18" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">vertiba=</span><span class="fu">round</span>(<span class="fu">weighted.mean</span>(proporcija,<span class="at">w=</span>SHAPE.AREA,<span class="at">na.rm=</span><span class="cn">TRUE</span>)<span class="sc">*</span><span class="dv">100</span>,<span class="dv">0</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb22-19"><a href="Chapter4.html#cb22-19" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb22-20"><a href="Chapter4.html#cb22-20" tabindex="-1"></a>  <span class="fu">filter</span>(klase<span class="sc">==</span><span class="st">&quot;grass&quot;</span>)</span>
<span id="cb22-21"><a href="Chapter4.html#cb22-21" tabindex="-1"></a>q19data3<span class="ot">=</span>q19data <span class="sc">%&gt;%</span> </span>
<span id="cb22-22"><a href="Chapter4.html#cb22-22" tabindex="-1"></a>  <span class="fu">group_by</span>(nosaukums,sezona,klase) <span class="sc">%&gt;%</span> </span>
<span id="cb22-23"><a href="Chapter4.html#cb22-23" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">vertiba=</span><span class="fu">round</span>(<span class="fu">weighted.mean</span>(proporcija,<span class="at">w=</span>SHAPE.AREA,<span class="at">na.rm=</span><span class="cn">TRUE</span>)<span class="sc">*</span><span class="dv">100</span>,<span class="dv">0</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb22-24"><a href="Chapter4.html#cb22-24" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb22-25"><a href="Chapter4.html#cb22-25" tabindex="-1"></a>  <span class="fu">filter</span>(klase<span class="sc">==</span><span class="st">&quot;crops&quot;</span>)</span>
<span id="cb22-26"><a href="Chapter4.html#cb22-26" tabindex="-1"></a></span>
<span id="cb22-27"><a href="Chapter4.html#cb22-27" tabindex="-1"></a><span class="fu">ggplot</span>(q19data,<span class="fu">aes</span>(sezona,proporcija,<span class="at">col=</span>klase))<span class="sc">+</span></span>
<span id="cb22-28"><a href="Chapter4.html#cb22-28" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>nosaukums)<span class="sc">+</span></span>
<span id="cb22-29"><a href="Chapter4.html#cb22-29" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">position=</span><span class="fu">position_dodge</span>(<span class="at">width=</span><span class="fl">0.75</span>),<span class="at">alpha=</span><span class="fl">0.2</span>)<span class="sc">+</span></span>
<span id="cb22-30"><a href="Chapter4.html#cb22-30" tabindex="-1"></a>  <span class="fu">theme_bw</span>()<span class="sc">+</span></span>
<span id="cb22-31"><a href="Chapter4.html#cb22-31" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle=</span><span class="dv">90</span>,<span class="at">vjust=</span><span class="fl">0.5</span>),</span>
<span id="cb22-32"><a href="Chapter4.html#cb22-32" tabindex="-1"></a>        <span class="at">axis.title.y =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb22-33"><a href="Chapter4.html#cb22-33" tabindex="-1"></a>        <span class="at">legend.title =</span> <span class="fu">element_blank</span>())<span class="sc">+</span></span>
<span id="cb22-34"><a href="Chapter4.html#cb22-34" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="at">data=</span>q19data2,<span class="fu">aes</span>(sezona,<span class="at">y=</span><span class="fl">1.1</span>,<span class="at">label=</span>vertiba),<span class="at">size=</span><span class="dv">3</span>)<span class="sc">+</span></span>
<span id="cb22-35"><a href="Chapter4.html#cb22-35" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="at">data=</span>q19data3,<span class="fu">aes</span>(sezona,<span class="at">y=</span><span class="fl">1.05</span>,<span class="at">label=</span>vertiba),<span class="at">size=</span><span class="dv">3</span>)<span class="sc">+</span></span>
<span id="cb22-36"><a href="Chapter4.html#cb22-36" tabindex="-1"></a>  <span class="fu">scale_color_viridis_d</span>()<span class="sc">+</span></span>
<span id="cb22-37"><a href="Chapter4.html#cb22-37" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels=</span>scales<span class="sc">::</span><span class="fu">label_percent</span>(),<span class="at">breaks=</span><span class="fu">seq</span>(<span class="dv">0</span>,<span class="dv">1</span>,<span class="at">by=</span>.<span class="dv">1</span>))<span class="sc">+</span></span>
<span id="cb22-38"><a href="Chapter4.html#cb22-38" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x=</span><span class="st">&quot;Sezona&quot;</span>)</span>
<span id="cb22-39"><a href="Chapter4.html#cb22-39" tabindex="-1"></a><span class="fu">ggview</span>(<span class="at">width=</span><span class="dv">300</span>,<span class="at">height=</span><span class="dv">100</span>,<span class="at">units=</span><span class="st">&quot;mm&quot;</span>,<span class="at">dpi=</span><span class="dv">600</span>,<span class="at">device=</span><span class="st">&quot;png&quot;</span>)</span>
<span id="cb22-40"><a href="Chapter4.html#cb22-40" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="at">filename=</span><span class="st">&quot;./pic_q19.png&quot;</span>,<span class="at">width=</span><span class="dv">300</span>,<span class="at">height=</span><span class="dv">100</span>,<span class="at">units=</span><span class="st">&quot;mm&quot;</span>,<span class="at">dpi=</span><span class="dv">600</span>)</span></code></pre></div>
</div>
<div id="q1.10-agļukoki" class="section level3 hasAnchor" number="5.2.10">
<h3><span class="header-section-number">5.2.10</span> Q1.10: Agļukoki<a href="Chapter4.html#q1.10-agļukoki" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Sekojošajā attēlā <a href="Chapter4.html#fig:DWq110">5.13</a> ir ilustrēta augļukoku (kultūru kodi “911”,“912”,“932”,“914”) saistība ar Dynamic World klasēm dažādos temporālajos griezumos. Skaitļi attēlu daļās norāda klašu “trees” un “grass” ar lauka platību svērto vidējo īpatsvaru. Redzams, ka, atkarībā no kultūras, nereti lauki ir klasificēti kā zālāji, nevis koki. No vienas puses tas ir skaidrojams ar telpu starp kokiem, bet var arī būt saistāms ar pašu augļukoku augstumu (šis vairāk tiks apskatīts pie mežaudzēm).</p>
<div class="figure"><span style="display:block;" id="fig:DWq110"></span>
<img src="Atteli/ch004_q110.png" alt="Lauksaimniecības kultūru grupas &quot;augļukoki&quot; saistība ar DW klasēm." width="100%" />
<p class="caption">
Figure 5.13: Lauksaimniecības kultūru grupas “augļukoki” saistība ar DW klasēm.
</p>
</div>
<p><br></p>
<p>Komandu rindas attēla sagatavošanas reproducēšanai:</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="Chapter4.html#cb23-1" tabindex="-1"></a>dati<span class="ot">=</span>sfarrow<span class="sc">::</span><span class="fu">st_read_parquet</span>(<span class="st">&quot;./Q1_kulturas.parquet&quot;</span>)</span>
<span id="cb23-2"><a href="Chapter4.html#cb23-2" tabindex="-1"></a>dati<span class="ot">=</span>dati <span class="sc">%&gt;%</span> </span>
<span id="cb23-3"><a href="Chapter4.html#cb23-3" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">sezona=</span><span class="fu">factor</span>(periods,<span class="at">ordered=</span><span class="cn">TRUE</span>,</span>
<span id="cb23-4"><a href="Chapter4.html#cb23-4" tabindex="-1"></a>                       <span class="at">levels=</span><span class="fu">c</span>(<span class="st">&quot;AprMay&quot;</span>,<span class="st">&quot;AprJun&quot;</span>,<span class="st">&quot;AprJul&quot;</span>,<span class="st">&quot;AprAug&quot;</span>,<span class="st">&quot;MayJun&quot;</span>,</span>
<span id="cb23-5"><a href="Chapter4.html#cb23-5" tabindex="-1"></a>                                <span class="st">&quot;MayJul&quot;</span>,<span class="st">&quot;MayAug&quot;</span>,<span class="st">&quot;JunJul&quot;</span>,<span class="st">&quot;JunAug&quot;</span>,<span class="st">&quot;JulAug&quot;</span>)))</span>
<span id="cb23-6"><a href="Chapter4.html#cb23-6" tabindex="-1"></a>auglukoki<span class="ot">=</span><span class="fu">c</span>(<span class="st">&quot;911&quot;</span>,<span class="st">&quot;912&quot;</span>,<span class="st">&quot;932&quot;</span>,<span class="st">&quot;914&quot;</span>)</span>
<span id="cb23-7"><a href="Chapter4.html#cb23-7" tabindex="-1"></a>q110data<span class="ot">=</span><span class="fu">data.frame</span>(dati) <span class="sc">%&gt;%</span> </span>
<span id="cb23-8"><a href="Chapter4.html#cb23-8" tabindex="-1"></a>  <span class="fu">filter</span>(PRODUCT_CODE <span class="sc">%in%</span> auglukoki) <span class="sc">%&gt;%</span> </span>
<span id="cb23-9"><a href="Chapter4.html#cb23-9" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(PRODUCT_CODE,PRODUCT_DESCRIPTION,SHAPE.AREA,sezona,water<span class="sc">:</span>snow_and_ice) <span class="sc">%&gt;%</span> </span>
<span id="cb23-10"><a href="Chapter4.html#cb23-10" tabindex="-1"></a>  <span class="fu">group_by</span>(PRODUCT_CODE) <span class="sc">%&gt;%</span> </span>
<span id="cb23-11"><a href="Chapter4.html#cb23-11" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">skaits=</span><span class="fu">n</span>()<span class="sc">/</span><span class="dv">10</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb23-12"><a href="Chapter4.html#cb23-12" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb23-13"><a href="Chapter4.html#cb23-13" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">nosaukums=</span><span class="fu">paste0</span>(PRODUCT_DESCRIPTION,<span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span>,<span class="st">&quot;n=&quot;</span>,skaits)) <span class="sc">%&gt;%</span> </span>
<span id="cb23-14"><a href="Chapter4.html#cb23-14" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols=</span>water<span class="sc">:</span>snow_and_ice,<span class="at">names_to =</span> <span class="st">&quot;klase&quot;</span>,<span class="at">values_to =</span> <span class="st">&quot;proporcija&quot;</span>)</span>
<span id="cb23-15"><a href="Chapter4.html#cb23-15" tabindex="-1"></a></span>
<span id="cb23-16"><a href="Chapter4.html#cb23-16" tabindex="-1"></a>q110data2<span class="ot">=</span>q110data <span class="sc">%&gt;%</span> </span>
<span id="cb23-17"><a href="Chapter4.html#cb23-17" tabindex="-1"></a>  <span class="fu">group_by</span>(nosaukums,sezona,klase) <span class="sc">%&gt;%</span> </span>
<span id="cb23-18"><a href="Chapter4.html#cb23-18" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">vertiba=</span><span class="fu">round</span>(<span class="fu">weighted.mean</span>(proporcija,<span class="at">w=</span>SHAPE.AREA,<span class="at">na.rm=</span><span class="cn">TRUE</span>)<span class="sc">*</span><span class="dv">100</span>,<span class="dv">0</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb23-19"><a href="Chapter4.html#cb23-19" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb23-20"><a href="Chapter4.html#cb23-20" tabindex="-1"></a>  <span class="fu">filter</span>(klase<span class="sc">==</span><span class="st">&quot;grass&quot;</span>)</span>
<span id="cb23-21"><a href="Chapter4.html#cb23-21" tabindex="-1"></a></span>
<span id="cb23-22"><a href="Chapter4.html#cb23-22" tabindex="-1"></a>q110data3<span class="ot">=</span>q110data <span class="sc">%&gt;%</span> </span>
<span id="cb23-23"><a href="Chapter4.html#cb23-23" tabindex="-1"></a>  <span class="fu">group_by</span>(nosaukums,sezona,klase) <span class="sc">%&gt;%</span> </span>
<span id="cb23-24"><a href="Chapter4.html#cb23-24" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">vertiba=</span><span class="fu">round</span>(<span class="fu">weighted.mean</span>(proporcija,<span class="at">w=</span>SHAPE.AREA,<span class="at">na.rm=</span><span class="cn">TRUE</span>)<span class="sc">*</span><span class="dv">100</span>,<span class="dv">0</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb23-25"><a href="Chapter4.html#cb23-25" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb23-26"><a href="Chapter4.html#cb23-26" tabindex="-1"></a>  <span class="fu">filter</span>(klase<span class="sc">==</span><span class="st">&quot;trees&quot;</span>)</span>
<span id="cb23-27"><a href="Chapter4.html#cb23-27" tabindex="-1"></a></span>
<span id="cb23-28"><a href="Chapter4.html#cb23-28" tabindex="-1"></a><span class="fu">ggplot</span>(q110data,<span class="fu">aes</span>(sezona,proporcija,<span class="at">col=</span>klase))<span class="sc">+</span></span>
<span id="cb23-29"><a href="Chapter4.html#cb23-29" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>nosaukums)<span class="sc">+</span></span>
<span id="cb23-30"><a href="Chapter4.html#cb23-30" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">position=</span><span class="fu">position_dodge</span>(<span class="at">width=</span><span class="fl">0.75</span>),<span class="at">alpha=</span><span class="fl">0.2</span>)<span class="sc">+</span></span>
<span id="cb23-31"><a href="Chapter4.html#cb23-31" tabindex="-1"></a>  <span class="fu">theme_bw</span>()<span class="sc">+</span></span>
<span id="cb23-32"><a href="Chapter4.html#cb23-32" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle=</span><span class="dv">90</span>,<span class="at">vjust=</span><span class="fl">0.5</span>),</span>
<span id="cb23-33"><a href="Chapter4.html#cb23-33" tabindex="-1"></a>        <span class="at">axis.title.y =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb23-34"><a href="Chapter4.html#cb23-34" tabindex="-1"></a>        <span class="at">legend.title =</span> <span class="fu">element_blank</span>())<span class="sc">+</span></span>
<span id="cb23-35"><a href="Chapter4.html#cb23-35" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="at">data=</span>q110data2,<span class="fu">aes</span>(sezona,<span class="at">y=</span><span class="fl">1.15</span>,<span class="at">label=</span>vertiba),<span class="at">size=</span><span class="dv">3</span>)<span class="sc">+</span></span>
<span id="cb23-36"><a href="Chapter4.html#cb23-36" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="at">data=</span>q110data3,<span class="fu">aes</span>(sezona,<span class="at">y=</span><span class="fl">1.07</span>,<span class="at">label=</span>vertiba),<span class="at">size=</span><span class="dv">3</span>)<span class="sc">+</span></span>
<span id="cb23-37"><a href="Chapter4.html#cb23-37" tabindex="-1"></a>  <span class="fu">scale_color_viridis_d</span>()<span class="sc">+</span></span>
<span id="cb23-38"><a href="Chapter4.html#cb23-38" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels=</span>scales<span class="sc">::</span><span class="fu">label_percent</span>(),<span class="at">breaks=</span><span class="fu">seq</span>(<span class="dv">0</span>,<span class="dv">1</span>,<span class="at">by=</span>.<span class="dv">1</span>))<span class="sc">+</span></span>
<span id="cb23-39"><a href="Chapter4.html#cb23-39" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x=</span><span class="st">&quot;Sezona&quot;</span>)</span>
<span id="cb23-40"><a href="Chapter4.html#cb23-40" tabindex="-1"></a><span class="fu">ggview</span>(<span class="at">width=</span><span class="dv">300</span>,<span class="at">height=</span><span class="dv">150</span>,<span class="at">units=</span><span class="st">&quot;mm&quot;</span>,<span class="at">dpi=</span><span class="dv">600</span>,<span class="at">device=</span><span class="st">&quot;png&quot;</span>)</span>
<span id="cb23-41"><a href="Chapter4.html#cb23-41" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="at">filename=</span><span class="st">&quot;./pic_q110.png&quot;</span>,<span class="at">width=</span><span class="dv">300</span>,<span class="at">height=</span><span class="dv">150</span>,<span class="at">units=</span><span class="st">&quot;mm&quot;</span>,<span class="at">dpi=</span><span class="dv">600</span>)</span></code></pre></div>
</div>
<div id="q1.11-ogu-krūmi" class="section level3 hasAnchor" number="5.2.11">
<h3><span class="header-section-number">5.2.11</span> Q1.11: Ogu-krūmi<a href="Chapter4.html#q1.11-ogu-krūmi" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Sekojošajā attēlā <a href="Chapter4.html#fig:DWq111">5.14</a> ir ilustrēta ogu-krūmu (kultūru kodi “921”,“922”,“933”,“927”,“928”,“929”) saistība ar Dynamic World klasēm dažādos temporālajos griezumos. Skaitļi attēlu daļās norāda klašu “crops”, “grass” un “trees” ar lauka platību svērto vidējo īpatsvaru. Redzams, ka, atkarībā no kultūras, nereti lauki ir klasificēti kā zālāji, vai pat aramzemes, nevis koki vai krūmi. No vienas puses tas ir skaidrojams ar telpu starp kultūras augiem, bet var arī būt saistāms ar pašu augu augstumu (šis vairāk tiks apskatīts pie mežaudzēm). Noteikti ir pamats to izdalīt atsevišķā klasē no aramzemēm un zālājiem, domājot par sugu izplatības modelēšanu.</p>
<div class="figure"><span style="display:block;" id="fig:DWq111"></span>
<img src="Atteli/ch004_q111.png" alt="Lauksaimniecības kultūru grupas &quot;ogu-krūmi&quot; saistība ar DW klasēm." width="100%" />
<p class="caption">
Figure 5.14: Lauksaimniecības kultūru grupas “ogu-krūmi” saistība ar DW klasēm.
</p>
</div>
<p><br></p>
<p>Komandu rindas attēla sagatavošanas reproducēšanai:</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="Chapter4.html#cb24-1" tabindex="-1"></a>dati<span class="ot">=</span>sfarrow<span class="sc">::</span><span class="fu">st_read_parquet</span>(<span class="st">&quot;./Q1_kulturas.parquet&quot;</span>)</span>
<span id="cb24-2"><a href="Chapter4.html#cb24-2" tabindex="-1"></a>dati<span class="ot">=</span>dati <span class="sc">%&gt;%</span> </span>
<span id="cb24-3"><a href="Chapter4.html#cb24-3" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">sezona=</span><span class="fu">factor</span>(periods,<span class="at">ordered=</span><span class="cn">TRUE</span>,</span>
<span id="cb24-4"><a href="Chapter4.html#cb24-4" tabindex="-1"></a>                       <span class="at">levels=</span><span class="fu">c</span>(<span class="st">&quot;AprMay&quot;</span>,<span class="st">&quot;AprJun&quot;</span>,<span class="st">&quot;AprJul&quot;</span>,<span class="st">&quot;AprAug&quot;</span>,<span class="st">&quot;MayJun&quot;</span>,</span>
<span id="cb24-5"><a href="Chapter4.html#cb24-5" tabindex="-1"></a>                                <span class="st">&quot;MayJul&quot;</span>,<span class="st">&quot;MayAug&quot;</span>,<span class="st">&quot;JunJul&quot;</span>,<span class="st">&quot;JunAug&quot;</span>,<span class="st">&quot;JulAug&quot;</span>)))</span>
<span id="cb24-6"><a href="Chapter4.html#cb24-6" tabindex="-1"></a>ogukrumi<span class="ot">=</span><span class="fu">c</span>(<span class="st">&quot;921&quot;</span>,<span class="st">&quot;922&quot;</span>,<span class="st">&quot;933&quot;</span>,<span class="st">&quot;927&quot;</span>,<span class="st">&quot;928&quot;</span>,<span class="st">&quot;929&quot;</span>)</span>
<span id="cb24-7"><a href="Chapter4.html#cb24-7" tabindex="-1"></a>q111data<span class="ot">=</span><span class="fu">data.frame</span>(dati) <span class="sc">%&gt;%</span> </span>
<span id="cb24-8"><a href="Chapter4.html#cb24-8" tabindex="-1"></a>  <span class="fu">filter</span>(PRODUCT_CODE <span class="sc">%in%</span> ogukrumi) <span class="sc">%&gt;%</span> </span>
<span id="cb24-9"><a href="Chapter4.html#cb24-9" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(PRODUCT_CODE,PRODUCT_DESCRIPTION,SHAPE.AREA,sezona,water<span class="sc">:</span>snow_and_ice) <span class="sc">%&gt;%</span> </span>
<span id="cb24-10"><a href="Chapter4.html#cb24-10" tabindex="-1"></a>  <span class="fu">group_by</span>(PRODUCT_CODE) <span class="sc">%&gt;%</span> </span>
<span id="cb24-11"><a href="Chapter4.html#cb24-11" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">skaits=</span><span class="fu">n</span>()<span class="sc">/</span><span class="dv">10</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb24-12"><a href="Chapter4.html#cb24-12" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb24-13"><a href="Chapter4.html#cb24-13" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">nosaukums=</span><span class="fu">paste0</span>(PRODUCT_DESCRIPTION,<span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span>,<span class="st">&quot;n=&quot;</span>,skaits)) <span class="sc">%&gt;%</span> </span>
<span id="cb24-14"><a href="Chapter4.html#cb24-14" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols=</span>water<span class="sc">:</span>snow_and_ice,<span class="at">names_to =</span> <span class="st">&quot;klase&quot;</span>,<span class="at">values_to =</span> <span class="st">&quot;proporcija&quot;</span>)</span>
<span id="cb24-15"><a href="Chapter4.html#cb24-15" tabindex="-1"></a></span>
<span id="cb24-16"><a href="Chapter4.html#cb24-16" tabindex="-1"></a>q111data2<span class="ot">=</span>q111data <span class="sc">%&gt;%</span> </span>
<span id="cb24-17"><a href="Chapter4.html#cb24-17" tabindex="-1"></a>  <span class="fu">group_by</span>(nosaukums,sezona,klase) <span class="sc">%&gt;%</span> </span>
<span id="cb24-18"><a href="Chapter4.html#cb24-18" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">vertiba=</span><span class="fu">round</span>(<span class="fu">weighted.mean</span>(proporcija,<span class="at">w=</span>SHAPE.AREA,<span class="at">na.rm=</span><span class="cn">TRUE</span>)<span class="sc">*</span><span class="dv">100</span>,<span class="dv">0</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb24-19"><a href="Chapter4.html#cb24-19" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb24-20"><a href="Chapter4.html#cb24-20" tabindex="-1"></a>  <span class="fu">filter</span>(klase<span class="sc">==</span><span class="st">&quot;grass&quot;</span>)</span>
<span id="cb24-21"><a href="Chapter4.html#cb24-21" tabindex="-1"></a></span>
<span id="cb24-22"><a href="Chapter4.html#cb24-22" tabindex="-1"></a>q111data3<span class="ot">=</span>q111data <span class="sc">%&gt;%</span> </span>
<span id="cb24-23"><a href="Chapter4.html#cb24-23" tabindex="-1"></a>  <span class="fu">group_by</span>(nosaukums,sezona,klase) <span class="sc">%&gt;%</span> </span>
<span id="cb24-24"><a href="Chapter4.html#cb24-24" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">vertiba=</span><span class="fu">round</span>(<span class="fu">weighted.mean</span>(proporcija,<span class="at">w=</span>SHAPE.AREA,<span class="at">na.rm=</span><span class="cn">TRUE</span>)<span class="sc">*</span><span class="dv">100</span>,<span class="dv">0</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb24-25"><a href="Chapter4.html#cb24-25" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb24-26"><a href="Chapter4.html#cb24-26" tabindex="-1"></a>  <span class="fu">filter</span>(klase<span class="sc">==</span><span class="st">&quot;trees&quot;</span>)</span>
<span id="cb24-27"><a href="Chapter4.html#cb24-27" tabindex="-1"></a></span>
<span id="cb24-28"><a href="Chapter4.html#cb24-28" tabindex="-1"></a>q111data4<span class="ot">=</span>q111data <span class="sc">%&gt;%</span> </span>
<span id="cb24-29"><a href="Chapter4.html#cb24-29" tabindex="-1"></a>  <span class="fu">group_by</span>(nosaukums,sezona,klase) <span class="sc">%&gt;%</span> </span>
<span id="cb24-30"><a href="Chapter4.html#cb24-30" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">vertiba=</span><span class="fu">round</span>(<span class="fu">weighted.mean</span>(proporcija,<span class="at">w=</span>SHAPE.AREA,<span class="at">na.rm=</span><span class="cn">TRUE</span>)<span class="sc">*</span><span class="dv">100</span>,<span class="dv">0</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb24-31"><a href="Chapter4.html#cb24-31" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb24-32"><a href="Chapter4.html#cb24-32" tabindex="-1"></a>  <span class="fu">filter</span>(klase<span class="sc">==</span><span class="st">&quot;crops&quot;</span>)</span>
<span id="cb24-33"><a href="Chapter4.html#cb24-33" tabindex="-1"></a></span>
<span id="cb24-34"><a href="Chapter4.html#cb24-34" tabindex="-1"></a><span class="fu">ggplot</span>(q111data,<span class="fu">aes</span>(sezona,proporcija,<span class="at">col=</span>klase))<span class="sc">+</span></span>
<span id="cb24-35"><a href="Chapter4.html#cb24-35" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>nosaukums)<span class="sc">+</span></span>
<span id="cb24-36"><a href="Chapter4.html#cb24-36" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">position=</span><span class="fu">position_dodge</span>(<span class="at">width=</span><span class="fl">0.75</span>),<span class="at">alpha=</span><span class="fl">0.2</span>)<span class="sc">+</span></span>
<span id="cb24-37"><a href="Chapter4.html#cb24-37" tabindex="-1"></a>  <span class="fu">theme_bw</span>()<span class="sc">+</span></span>
<span id="cb24-38"><a href="Chapter4.html#cb24-38" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle=</span><span class="dv">90</span>,<span class="at">vjust=</span><span class="fl">0.5</span>),</span>
<span id="cb24-39"><a href="Chapter4.html#cb24-39" tabindex="-1"></a>        <span class="at">axis.title.y =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb24-40"><a href="Chapter4.html#cb24-40" tabindex="-1"></a>        <span class="at">legend.title =</span> <span class="fu">element_blank</span>())<span class="sc">+</span></span>
<span id="cb24-41"><a href="Chapter4.html#cb24-41" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="at">data=</span>q111data2,<span class="fu">aes</span>(sezona,<span class="at">y=</span><span class="fl">1.15</span>,<span class="at">label=</span>vertiba),<span class="at">size=</span><span class="dv">3</span>)<span class="sc">+</span></span>
<span id="cb24-42"><a href="Chapter4.html#cb24-42" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="at">data=</span>q111data3,<span class="fu">aes</span>(sezona,<span class="at">y=</span><span class="fl">1.07</span>,<span class="at">label=</span>vertiba),<span class="at">size=</span><span class="dv">3</span>)<span class="sc">+</span></span>
<span id="cb24-43"><a href="Chapter4.html#cb24-43" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="at">data=</span>q111data4,<span class="fu">aes</span>(sezona,<span class="at">y=</span><span class="fl">1.22</span>,<span class="at">label=</span>vertiba),<span class="at">size=</span><span class="dv">3</span>)<span class="sc">+</span></span>
<span id="cb24-44"><a href="Chapter4.html#cb24-44" tabindex="-1"></a>  <span class="fu">scale_color_viridis_d</span>()<span class="sc">+</span></span>
<span id="cb24-45"><a href="Chapter4.html#cb24-45" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels=</span>scales<span class="sc">::</span><span class="fu">label_percent</span>(),<span class="at">breaks=</span><span class="fu">seq</span>(<span class="dv">0</span>,<span class="dv">1</span>,<span class="at">by=</span>.<span class="dv">1</span>))<span class="sc">+</span></span>
<span id="cb24-46"><a href="Chapter4.html#cb24-46" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x=</span><span class="st">&quot;Sezona&quot;</span>)</span>
<span id="cb24-47"><a href="Chapter4.html#cb24-47" tabindex="-1"></a><span class="fu">ggview</span>(<span class="at">width=</span><span class="dv">300</span>,<span class="at">height=</span><span class="dv">150</span>,<span class="at">units=</span><span class="st">&quot;mm&quot;</span>,<span class="at">dpi=</span><span class="dv">600</span>,<span class="at">device=</span><span class="st">&quot;png&quot;</span>)</span>
<span id="cb24-48"><a href="Chapter4.html#cb24-48" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="at">filename=</span><span class="st">&quot;./pic_q111.png&quot;</span>,<span class="at">width=</span><span class="dv">300</span>,<span class="at">height=</span><span class="dv">150</span>,<span class="at">units=</span><span class="st">&quot;mm&quot;</span>,<span class="at">dpi=</span><span class="dv">600</span>)</span></code></pre></div>
</div>
<div id="q1.12-zemās-ogas" class="section level3 hasAnchor" number="5.2.12">
<h3><span class="header-section-number">5.2.12</span> Q1.12: Zemās ogas<a href="Chapter4.html#q1.12-zemās-ogas" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Sekojošajā attēlā <a href="Chapter4.html#fig:DWq112">5.15</a> ir ilustrēta zema auguma ogu (kultūru kodi “924”,“934”) saistība ar Dynamic World klasēm dažādos temporālajos griezumos. Skaitļi attēlu daļās norāda klašu “crops”, “grass”, “shrub_and_scrub” un “trees” ar lauka platību svērto vidējo īpatsvaru. Šī klase ir samērā reti sastopama un tās ietvaros ir izteikta heterogenitāte.</p>
<div class="figure"><span style="display:block;" id="fig:DWq112"></span>
<img src="Atteli/ch004_q112.png" alt="Lauksaimniecības kultūru grupas &quot;zemās ogas&quot; saistība ar DW klasēm." width="100%" />
<p class="caption">
Figure 5.15: Lauksaimniecības kultūru grupas “zemās ogas” saistība ar DW klasēm.
</p>
</div>
<p><br></p>
<p>Komandu rindas attēla sagatavošanas reproducēšanai:</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="Chapter4.html#cb25-1" tabindex="-1"></a>dati<span class="ot">=</span>sfarrow<span class="sc">::</span><span class="fu">st_read_parquet</span>(<span class="st">&quot;./Q1_kulturas.parquet&quot;</span>)</span>
<span id="cb25-2"><a href="Chapter4.html#cb25-2" tabindex="-1"></a>dati<span class="ot">=</span>dati <span class="sc">%&gt;%</span> </span>
<span id="cb25-3"><a href="Chapter4.html#cb25-3" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">sezona=</span><span class="fu">factor</span>(periods,<span class="at">ordered=</span><span class="cn">TRUE</span>,</span>
<span id="cb25-4"><a href="Chapter4.html#cb25-4" tabindex="-1"></a>                       <span class="at">levels=</span><span class="fu">c</span>(<span class="st">&quot;AprMay&quot;</span>,<span class="st">&quot;AprJun&quot;</span>,<span class="st">&quot;AprJul&quot;</span>,<span class="st">&quot;AprAug&quot;</span>,<span class="st">&quot;MayJun&quot;</span>,</span>
<span id="cb25-5"><a href="Chapter4.html#cb25-5" tabindex="-1"></a>                                <span class="st">&quot;MayJul&quot;</span>,<span class="st">&quot;MayAug&quot;</span>,<span class="st">&quot;JunJul&quot;</span>,<span class="st">&quot;JunAug&quot;</span>,<span class="st">&quot;JulAug&quot;</span>)))</span>
<span id="cb25-6"><a href="Chapter4.html#cb25-6" tabindex="-1"></a>zemas_ogas<span class="ot">=</span><span class="fu">c</span>(<span class="st">&quot;924&quot;</span>,<span class="st">&quot;934&quot;</span>)</span>
<span id="cb25-7"><a href="Chapter4.html#cb25-7" tabindex="-1"></a>q112data<span class="ot">=</span><span class="fu">data.frame</span>(dati) <span class="sc">%&gt;%</span> </span>
<span id="cb25-8"><a href="Chapter4.html#cb25-8" tabindex="-1"></a>  <span class="fu">filter</span>(PRODUCT_CODE <span class="sc">%in%</span> zemas_ogas) <span class="sc">%&gt;%</span> </span>
<span id="cb25-9"><a href="Chapter4.html#cb25-9" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(PRODUCT_CODE,PRODUCT_DESCRIPTION,SHAPE.AREA,sezona,water<span class="sc">:</span>snow_and_ice) <span class="sc">%&gt;%</span> </span>
<span id="cb25-10"><a href="Chapter4.html#cb25-10" tabindex="-1"></a>  <span class="fu">group_by</span>(PRODUCT_CODE) <span class="sc">%&gt;%</span> </span>
<span id="cb25-11"><a href="Chapter4.html#cb25-11" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">skaits=</span><span class="fu">n</span>()<span class="sc">/</span><span class="dv">10</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb25-12"><a href="Chapter4.html#cb25-12" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb25-13"><a href="Chapter4.html#cb25-13" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">nosaukums=</span><span class="fu">paste0</span>(PRODUCT_DESCRIPTION,<span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span>,<span class="st">&quot;n=&quot;</span>,skaits)) <span class="sc">%&gt;%</span> </span>
<span id="cb25-14"><a href="Chapter4.html#cb25-14" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols=</span>water<span class="sc">:</span>snow_and_ice,<span class="at">names_to =</span> <span class="st">&quot;klase&quot;</span>,<span class="at">values_to =</span> <span class="st">&quot;proporcija&quot;</span>)</span>
<span id="cb25-15"><a href="Chapter4.html#cb25-15" tabindex="-1"></a></span>
<span id="cb25-16"><a href="Chapter4.html#cb25-16" tabindex="-1"></a>q112data2<span class="ot">=</span>q112data <span class="sc">%&gt;%</span> </span>
<span id="cb25-17"><a href="Chapter4.html#cb25-17" tabindex="-1"></a>  <span class="fu">group_by</span>(nosaukums,sezona,klase) <span class="sc">%&gt;%</span> </span>
<span id="cb25-18"><a href="Chapter4.html#cb25-18" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">vertiba=</span><span class="fu">round</span>(<span class="fu">weighted.mean</span>(proporcija,<span class="at">w=</span>SHAPE.AREA,<span class="at">na.rm=</span><span class="cn">TRUE</span>)<span class="sc">*</span><span class="dv">100</span>,<span class="dv">0</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb25-19"><a href="Chapter4.html#cb25-19" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb25-20"><a href="Chapter4.html#cb25-20" tabindex="-1"></a>  <span class="fu">filter</span>(klase<span class="sc">==</span><span class="st">&quot;grass&quot;</span>)</span>
<span id="cb25-21"><a href="Chapter4.html#cb25-21" tabindex="-1"></a></span>
<span id="cb25-22"><a href="Chapter4.html#cb25-22" tabindex="-1"></a>q112data3<span class="ot">=</span>q112data <span class="sc">%&gt;%</span> </span>
<span id="cb25-23"><a href="Chapter4.html#cb25-23" tabindex="-1"></a>  <span class="fu">group_by</span>(nosaukums,sezona,klase) <span class="sc">%&gt;%</span> </span>
<span id="cb25-24"><a href="Chapter4.html#cb25-24" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">vertiba=</span><span class="fu">round</span>(<span class="fu">weighted.mean</span>(proporcija,<span class="at">w=</span>SHAPE.AREA,<span class="at">na.rm=</span><span class="cn">TRUE</span>)<span class="sc">*</span><span class="dv">100</span>,<span class="dv">0</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb25-25"><a href="Chapter4.html#cb25-25" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb25-26"><a href="Chapter4.html#cb25-26" tabindex="-1"></a>  <span class="fu">filter</span>(klase<span class="sc">==</span><span class="st">&quot;shrub_and_scrub&quot;</span>)</span>
<span id="cb25-27"><a href="Chapter4.html#cb25-27" tabindex="-1"></a></span>
<span id="cb25-28"><a href="Chapter4.html#cb25-28" tabindex="-1"></a>q112data4<span class="ot">=</span>q112data <span class="sc">%&gt;%</span> </span>
<span id="cb25-29"><a href="Chapter4.html#cb25-29" tabindex="-1"></a>  <span class="fu">group_by</span>(nosaukums,sezona,klase) <span class="sc">%&gt;%</span> </span>
<span id="cb25-30"><a href="Chapter4.html#cb25-30" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">vertiba=</span><span class="fu">round</span>(<span class="fu">weighted.mean</span>(proporcija,<span class="at">w=</span>SHAPE.AREA,<span class="at">na.rm=</span><span class="cn">TRUE</span>)<span class="sc">*</span><span class="dv">100</span>,<span class="dv">0</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb25-31"><a href="Chapter4.html#cb25-31" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb25-32"><a href="Chapter4.html#cb25-32" tabindex="-1"></a>  <span class="fu">filter</span>(klase<span class="sc">==</span><span class="st">&quot;crops&quot;</span>)</span>
<span id="cb25-33"><a href="Chapter4.html#cb25-33" tabindex="-1"></a></span>
<span id="cb25-34"><a href="Chapter4.html#cb25-34" tabindex="-1"></a>q112data5<span class="ot">=</span>q112data <span class="sc">%&gt;%</span> </span>
<span id="cb25-35"><a href="Chapter4.html#cb25-35" tabindex="-1"></a>  <span class="fu">group_by</span>(nosaukums,sezona,klase) <span class="sc">%&gt;%</span> </span>
<span id="cb25-36"><a href="Chapter4.html#cb25-36" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">vertiba=</span><span class="fu">round</span>(<span class="fu">weighted.mean</span>(proporcija,<span class="at">w=</span>SHAPE.AREA,<span class="at">na.rm=</span><span class="cn">TRUE</span>)<span class="sc">*</span><span class="dv">100</span>,<span class="dv">0</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb25-37"><a href="Chapter4.html#cb25-37" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb25-38"><a href="Chapter4.html#cb25-38" tabindex="-1"></a>  <span class="fu">filter</span>(klase<span class="sc">==</span><span class="st">&quot;trees&quot;</span>)</span>
<span id="cb25-39"><a href="Chapter4.html#cb25-39" tabindex="-1"></a></span>
<span id="cb25-40"><a href="Chapter4.html#cb25-40" tabindex="-1"></a><span class="fu">ggplot</span>(q112data,<span class="fu">aes</span>(sezona,proporcija,<span class="at">col=</span>klase))<span class="sc">+</span></span>
<span id="cb25-41"><a href="Chapter4.html#cb25-41" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>nosaukums)<span class="sc">+</span></span>
<span id="cb25-42"><a href="Chapter4.html#cb25-42" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">position=</span><span class="fu">position_dodge</span>(<span class="at">width=</span><span class="fl">0.75</span>),<span class="at">alpha=</span><span class="fl">0.2</span>)<span class="sc">+</span></span>
<span id="cb25-43"><a href="Chapter4.html#cb25-43" tabindex="-1"></a>  <span class="fu">theme_bw</span>()<span class="sc">+</span></span>
<span id="cb25-44"><a href="Chapter4.html#cb25-44" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle=</span><span class="dv">90</span>,<span class="at">vjust=</span><span class="fl">0.5</span>),</span>
<span id="cb25-45"><a href="Chapter4.html#cb25-45" tabindex="-1"></a>        <span class="at">axis.title.y =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb25-46"><a href="Chapter4.html#cb25-46" tabindex="-1"></a>        <span class="at">legend.title =</span> <span class="fu">element_blank</span>())<span class="sc">+</span></span>
<span id="cb25-47"><a href="Chapter4.html#cb25-47" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="at">data=</span>q112data3,<span class="fu">aes</span>(sezona,<span class="at">y=</span><span class="fl">1.15</span>,<span class="at">label=</span>vertiba),<span class="at">size=</span><span class="dv">3</span>)<span class="sc">+</span></span>
<span id="cb25-48"><a href="Chapter4.html#cb25-48" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="at">data=</span>q112data5,<span class="fu">aes</span>(sezona,<span class="at">y=</span><span class="fl">1.07</span>,<span class="at">label=</span>vertiba),<span class="at">size=</span><span class="dv">3</span>)<span class="sc">+</span></span>
<span id="cb25-49"><a href="Chapter4.html#cb25-49" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="at">data=</span>q112data2,<span class="fu">aes</span>(sezona,<span class="at">y=</span><span class="fl">1.23</span>,<span class="at">label=</span>vertiba),<span class="at">size=</span><span class="dv">3</span>)<span class="sc">+</span></span>
<span id="cb25-50"><a href="Chapter4.html#cb25-50" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="at">data=</span>q112data4,<span class="fu">aes</span>(sezona,<span class="at">y=</span><span class="fl">1.30</span>,<span class="at">label=</span>vertiba),<span class="at">size=</span><span class="dv">3</span>)<span class="sc">+</span></span>
<span id="cb25-51"><a href="Chapter4.html#cb25-51" tabindex="-1"></a>  <span class="fu">scale_color_viridis_d</span>()<span class="sc">+</span></span>
<span id="cb25-52"><a href="Chapter4.html#cb25-52" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels=</span>scales<span class="sc">::</span><span class="fu">label_percent</span>(),<span class="at">breaks=</span><span class="fu">seq</span>(<span class="dv">0</span>,<span class="dv">1</span>,<span class="at">by=</span>.<span class="dv">1</span>))<span class="sc">+</span></span>
<span id="cb25-53"><a href="Chapter4.html#cb25-53" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x=</span><span class="st">&quot;Sezona&quot;</span>)</span>
<span id="cb25-54"><a href="Chapter4.html#cb25-54" tabindex="-1"></a><span class="fu">ggview</span>(<span class="at">width=</span><span class="dv">250</span>,<span class="at">height=</span><span class="dv">100</span>,<span class="at">units=</span><span class="st">&quot;mm&quot;</span>,<span class="at">dpi=</span><span class="dv">600</span>,<span class="at">device=</span><span class="st">&quot;png&quot;</span>)</span>
<span id="cb25-55"><a href="Chapter4.html#cb25-55" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="at">filename=</span><span class="st">&quot;./pic_q112.png&quot;</span>,<span class="at">width=</span><span class="dv">250</span>,<span class="at">height=</span><span class="dv">100</span>,<span class="at">units=</span><span class="st">&quot;mm&quot;</span>,<span class="at">dpi=</span><span class="dv">600</span>)</span></code></pre></div>
</div>
<div id="q1.13-bezatbalsta-platība" class="section level3 hasAnchor" number="5.2.13">
<h3><span class="header-section-number">5.2.13</span> Q1.13: Bezatbalsta platība<a href="Chapter4.html#q1.13-bezatbalsta-platība" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Sekojošajā attēlā <a href="Chapter4.html#fig:DWq113">5.16</a> ir ilustrēta lauku blokos iekļauto platību, par kurām netiek izmaksāts atbalsts (kultūru kodi “620”,“792”) saistība ar Dynamic World klasēm dažādos temporālajos griezumos. Skaitļi attēlu daļās norāda klašu “crops”, “grass”, “shrub_and_scrub” un “trees” ar lauka platību svērto vidējo īpatsvaru. Šī klase ir samērā reti sastopama un tās ietvaros ir izteikta heterogenitāte.</p>
<div class="figure"><span style="display:block;" id="fig:DWq113"></span>
<img src="Atteli/ch004_q113.png" alt="Lauksaimniecības kultūru grupas &quot;bezatbalsta platības&quot; saistība ar DW klasēm." width="100%" />
<p class="caption">
Figure 5.16: Lauksaimniecības kultūru grupas “bezatbalsta platības” saistība ar DW klasēm.
</p>
</div>
<p><br></p>
<p>Komandu rindas attēla sagatavošanas reproducēšanai:</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="Chapter4.html#cb26-1" tabindex="-1"></a>dati<span class="ot">=</span>sfarrow<span class="sc">::</span><span class="fu">st_read_parquet</span>(<span class="st">&quot;./Q1_kulturas.parquet&quot;</span>)</span>
<span id="cb26-2"><a href="Chapter4.html#cb26-2" tabindex="-1"></a>dati<span class="ot">=</span>dati <span class="sc">%&gt;%</span> </span>
<span id="cb26-3"><a href="Chapter4.html#cb26-3" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">sezona=</span><span class="fu">factor</span>(periods,<span class="at">ordered=</span><span class="cn">TRUE</span>,</span>
<span id="cb26-4"><a href="Chapter4.html#cb26-4" tabindex="-1"></a>                       <span class="at">levels=</span><span class="fu">c</span>(<span class="st">&quot;AprMay&quot;</span>,<span class="st">&quot;AprJun&quot;</span>,<span class="st">&quot;AprJul&quot;</span>,<span class="st">&quot;AprAug&quot;</span>,<span class="st">&quot;MayJun&quot;</span>,</span>
<span id="cb26-5"><a href="Chapter4.html#cb26-5" tabindex="-1"></a>                                <span class="st">&quot;MayJul&quot;</span>,<span class="st">&quot;MayAug&quot;</span>,<span class="st">&quot;JunJul&quot;</span>,<span class="st">&quot;JunAug&quot;</span>,<span class="st">&quot;JulAug&quot;</span>)))</span>
<span id="cb26-6"><a href="Chapter4.html#cb26-6" tabindex="-1"></a>bezatbalsta<span class="ot">=</span><span class="fu">c</span>(<span class="st">&quot;620&quot;</span>,<span class="st">&quot;792&quot;</span>)</span>
<span id="cb26-7"><a href="Chapter4.html#cb26-7" tabindex="-1"></a>q113data<span class="ot">=</span><span class="fu">data.frame</span>(dati) <span class="sc">%&gt;%</span> </span>
<span id="cb26-8"><a href="Chapter4.html#cb26-8" tabindex="-1"></a>  <span class="fu">filter</span>(PRODUCT_CODE <span class="sc">%in%</span> bezatbalsta) <span class="sc">%&gt;%</span> </span>
<span id="cb26-9"><a href="Chapter4.html#cb26-9" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(PRODUCT_CODE,PRODUCT_DESCRIPTION,SHAPE.AREA,sezona,water<span class="sc">:</span>snow_and_ice) <span class="sc">%&gt;%</span> </span>
<span id="cb26-10"><a href="Chapter4.html#cb26-10" tabindex="-1"></a>  <span class="fu">group_by</span>(PRODUCT_CODE) <span class="sc">%&gt;%</span> </span>
<span id="cb26-11"><a href="Chapter4.html#cb26-11" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">skaits=</span><span class="fu">n</span>()<span class="sc">/</span><span class="dv">10</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb26-12"><a href="Chapter4.html#cb26-12" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb26-13"><a href="Chapter4.html#cb26-13" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">nosaukums=</span><span class="fu">paste0</span>(PRODUCT_DESCRIPTION,<span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span>,<span class="st">&quot;n=&quot;</span>,skaits)) <span class="sc">%&gt;%</span> </span>
<span id="cb26-14"><a href="Chapter4.html#cb26-14" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols=</span>water<span class="sc">:</span>snow_and_ice,<span class="at">names_to =</span> <span class="st">&quot;klase&quot;</span>,<span class="at">values_to =</span> <span class="st">&quot;proporcija&quot;</span>)</span>
<span id="cb26-15"><a href="Chapter4.html#cb26-15" tabindex="-1"></a></span>
<span id="cb26-16"><a href="Chapter4.html#cb26-16" tabindex="-1"></a>q113data2<span class="ot">=</span>q113data <span class="sc">%&gt;%</span> </span>
<span id="cb26-17"><a href="Chapter4.html#cb26-17" tabindex="-1"></a>  <span class="fu">group_by</span>(nosaukums,sezona,klase) <span class="sc">%&gt;%</span> </span>
<span id="cb26-18"><a href="Chapter4.html#cb26-18" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">vertiba=</span><span class="fu">round</span>(<span class="fu">weighted.mean</span>(proporcija,<span class="at">w=</span>SHAPE.AREA,<span class="at">na.rm=</span><span class="cn">TRUE</span>)<span class="sc">*</span><span class="dv">100</span>,<span class="dv">0</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb26-19"><a href="Chapter4.html#cb26-19" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb26-20"><a href="Chapter4.html#cb26-20" tabindex="-1"></a>  <span class="fu">filter</span>(klase<span class="sc">==</span><span class="st">&quot;grass&quot;</span>)</span>
<span id="cb26-21"><a href="Chapter4.html#cb26-21" tabindex="-1"></a></span>
<span id="cb26-22"><a href="Chapter4.html#cb26-22" tabindex="-1"></a>q113data3<span class="ot">=</span>q113data <span class="sc">%&gt;%</span> </span>
<span id="cb26-23"><a href="Chapter4.html#cb26-23" tabindex="-1"></a>  <span class="fu">group_by</span>(nosaukums,sezona,klase) <span class="sc">%&gt;%</span> </span>
<span id="cb26-24"><a href="Chapter4.html#cb26-24" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">vertiba=</span><span class="fu">round</span>(<span class="fu">weighted.mean</span>(proporcija,<span class="at">w=</span>SHAPE.AREA,<span class="at">na.rm=</span><span class="cn">TRUE</span>)<span class="sc">*</span><span class="dv">100</span>,<span class="dv">0</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb26-25"><a href="Chapter4.html#cb26-25" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb26-26"><a href="Chapter4.html#cb26-26" tabindex="-1"></a>  <span class="fu">filter</span>(klase<span class="sc">==</span><span class="st">&quot;shrub_and_scrub&quot;</span>)</span>
<span id="cb26-27"><a href="Chapter4.html#cb26-27" tabindex="-1"></a></span>
<span id="cb26-28"><a href="Chapter4.html#cb26-28" tabindex="-1"></a>q113data4<span class="ot">=</span>q113data <span class="sc">%&gt;%</span> </span>
<span id="cb26-29"><a href="Chapter4.html#cb26-29" tabindex="-1"></a>  <span class="fu">group_by</span>(nosaukums,sezona,klase) <span class="sc">%&gt;%</span> </span>
<span id="cb26-30"><a href="Chapter4.html#cb26-30" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">vertiba=</span><span class="fu">round</span>(<span class="fu">weighted.mean</span>(proporcija,<span class="at">w=</span>SHAPE.AREA,<span class="at">na.rm=</span><span class="cn">TRUE</span>)<span class="sc">*</span><span class="dv">100</span>,<span class="dv">0</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb26-31"><a href="Chapter4.html#cb26-31" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb26-32"><a href="Chapter4.html#cb26-32" tabindex="-1"></a>  <span class="fu">filter</span>(klase<span class="sc">==</span><span class="st">&quot;crops&quot;</span>)</span>
<span id="cb26-33"><a href="Chapter4.html#cb26-33" tabindex="-1"></a></span>
<span id="cb26-34"><a href="Chapter4.html#cb26-34" tabindex="-1"></a>q113data5<span class="ot">=</span>q113data <span class="sc">%&gt;%</span> </span>
<span id="cb26-35"><a href="Chapter4.html#cb26-35" tabindex="-1"></a>  <span class="fu">group_by</span>(nosaukums,sezona,klase) <span class="sc">%&gt;%</span> </span>
<span id="cb26-36"><a href="Chapter4.html#cb26-36" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">vertiba=</span><span class="fu">round</span>(<span class="fu">weighted.mean</span>(proporcija,<span class="at">w=</span>SHAPE.AREA,<span class="at">na.rm=</span><span class="cn">TRUE</span>)<span class="sc">*</span><span class="dv">100</span>,<span class="dv">0</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb26-37"><a href="Chapter4.html#cb26-37" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb26-38"><a href="Chapter4.html#cb26-38" tabindex="-1"></a>  <span class="fu">filter</span>(klase<span class="sc">==</span><span class="st">&quot;trees&quot;</span>)</span>
<span id="cb26-39"><a href="Chapter4.html#cb26-39" tabindex="-1"></a></span>
<span id="cb26-40"><a href="Chapter4.html#cb26-40" tabindex="-1"></a><span class="fu">ggplot</span>(q113data,<span class="fu">aes</span>(sezona,proporcija,<span class="at">col=</span>klase))<span class="sc">+</span></span>
<span id="cb26-41"><a href="Chapter4.html#cb26-41" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>nosaukums)<span class="sc">+</span></span>
<span id="cb26-42"><a href="Chapter4.html#cb26-42" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">position=</span><span class="fu">position_dodge</span>(<span class="at">width=</span><span class="fl">0.75</span>),<span class="at">alpha=</span><span class="fl">0.2</span>)<span class="sc">+</span></span>
<span id="cb26-43"><a href="Chapter4.html#cb26-43" tabindex="-1"></a>  <span class="fu">theme_bw</span>()<span class="sc">+</span></span>
<span id="cb26-44"><a href="Chapter4.html#cb26-44" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle=</span><span class="dv">90</span>,<span class="at">vjust=</span><span class="fl">0.5</span>),</span>
<span id="cb26-45"><a href="Chapter4.html#cb26-45" tabindex="-1"></a>        <span class="at">axis.title.y =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb26-46"><a href="Chapter4.html#cb26-46" tabindex="-1"></a>        <span class="at">legend.title =</span> <span class="fu">element_blank</span>())<span class="sc">+</span></span>
<span id="cb26-47"><a href="Chapter4.html#cb26-47" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="at">data=</span>q113data3,<span class="fu">aes</span>(sezona,<span class="at">y=</span><span class="fl">1.15</span>,<span class="at">label=</span>vertiba),<span class="at">size=</span><span class="dv">3</span>)<span class="sc">+</span></span>
<span id="cb26-48"><a href="Chapter4.html#cb26-48" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="at">data=</span>q113data5,<span class="fu">aes</span>(sezona,<span class="at">y=</span><span class="fl">1.07</span>,<span class="at">label=</span>vertiba),<span class="at">size=</span><span class="dv">3</span>)<span class="sc">+</span></span>
<span id="cb26-49"><a href="Chapter4.html#cb26-49" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="at">data=</span>q113data2,<span class="fu">aes</span>(sezona,<span class="at">y=</span><span class="fl">1.23</span>,<span class="at">label=</span>vertiba),<span class="at">size=</span><span class="dv">3</span>)<span class="sc">+</span></span>
<span id="cb26-50"><a href="Chapter4.html#cb26-50" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="at">data=</span>q113data4,<span class="fu">aes</span>(sezona,<span class="at">y=</span><span class="fl">1.30</span>,<span class="at">label=</span>vertiba),<span class="at">size=</span><span class="dv">3</span>)<span class="sc">+</span></span>
<span id="cb26-51"><a href="Chapter4.html#cb26-51" tabindex="-1"></a>  <span class="fu">scale_color_viridis_d</span>()<span class="sc">+</span></span>
<span id="cb26-52"><a href="Chapter4.html#cb26-52" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels=</span>scales<span class="sc">::</span><span class="fu">label_percent</span>(),<span class="at">breaks=</span><span class="fu">seq</span>(<span class="dv">0</span>,<span class="dv">1</span>,<span class="at">by=</span>.<span class="dv">1</span>))<span class="sc">+</span></span>
<span id="cb26-53"><a href="Chapter4.html#cb26-53" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x=</span><span class="st">&quot;Sezona&quot;</span>)</span>
<span id="cb26-54"><a href="Chapter4.html#cb26-54" tabindex="-1"></a><span class="fu">ggview</span>(<span class="at">width=</span><span class="dv">400</span>,<span class="at">height=</span><span class="dv">100</span>,<span class="at">units=</span><span class="st">&quot;mm&quot;</span>,<span class="at">dpi=</span><span class="dv">600</span>,<span class="at">device=</span><span class="st">&quot;png&quot;</span>)</span>
<span id="cb26-55"><a href="Chapter4.html#cb26-55" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="at">filename=</span><span class="st">&quot;./pic_q113.png&quot;</span>,<span class="at">width=</span><span class="dv">400</span>,<span class="at">height=</span><span class="dv">100</span>,<span class="at">units=</span><span class="st">&quot;mm&quot;</span>,<span class="at">dpi=</span><span class="dv">600</span>)</span></code></pre></div>
</div>
<div id="q1.14-vagu-un-rušināmkultūras" class="section level3 hasAnchor" number="5.2.14">
<h3><span class="header-section-number">5.2.14</span> Q1.14: Vagu un rušināmkultūras<a href="Chapter4.html#q1.14-vagu-un-rušināmkultūras" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Sekojošajā attēlā <a href="Chapter4.html#fig:DWq114">5.17</a> ir ilustrēta rušināmkultūru (kultūru kodi “821”,“825”, “843”, “844”) saistība ar Dynamic World klasēm dažādos temporālajos griezumos. Skaitļi attēlu daļās norāda klašu “crops”, “grass” un “trees” ar lauka platību svērto vidējo īpatsvaru. Šīs klases piemēri samērā stabili klasificējas kā aramzemes.</p>
<div class="figure"><span style="display:block;" id="fig:DWq114"></span>
<img src="Atteli/ch004_q114.png" alt="Lauksaimniecības kultūru grupas &quot;vagu un rušināmkultūras&quot; saistība ar DW klasēm." width="100%" />
<p class="caption">
Figure 5.17: Lauksaimniecības kultūru grupas “vagu un rušināmkultūras” saistība ar DW klasēm.
</p>
</div>
<p><br></p>
<p>Komandu rindas attēla sagatavošanas reproducēšanai:</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="Chapter4.html#cb27-1" tabindex="-1"></a>dati<span class="ot">=</span>sfarrow<span class="sc">::</span><span class="fu">st_read_parquet</span>(<span class="st">&quot;./Q1_kulturas.parquet&quot;</span>)</span>
<span id="cb27-2"><a href="Chapter4.html#cb27-2" tabindex="-1"></a>dati<span class="ot">=</span>dati <span class="sc">%&gt;%</span> </span>
<span id="cb27-3"><a href="Chapter4.html#cb27-3" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">sezona=</span><span class="fu">factor</span>(periods,<span class="at">ordered=</span><span class="cn">TRUE</span>,</span>
<span id="cb27-4"><a href="Chapter4.html#cb27-4" tabindex="-1"></a>                       <span class="at">levels=</span><span class="fu">c</span>(<span class="st">&quot;AprMay&quot;</span>,<span class="st">&quot;AprJun&quot;</span>,<span class="st">&quot;AprJul&quot;</span>,<span class="st">&quot;AprAug&quot;</span>,<span class="st">&quot;MayJun&quot;</span>,</span>
<span id="cb27-5"><a href="Chapter4.html#cb27-5" tabindex="-1"></a>                                <span class="st">&quot;MayJul&quot;</span>,<span class="st">&quot;MayAug&quot;</span>,<span class="st">&quot;JunJul&quot;</span>,<span class="st">&quot;JunAug&quot;</span>,<span class="st">&quot;JulAug&quot;</span>)))</span>
<span id="cb27-6"><a href="Chapter4.html#cb27-6" tabindex="-1"></a>rusinamkulturas<span class="ot">=</span><span class="fu">c</span>(<span class="st">&quot;821&quot;</span>,<span class="st">&quot;825&quot;</span>, <span class="st">&quot;843&quot;</span>, <span class="st">&quot;844&quot;</span>)</span>
<span id="cb27-7"><a href="Chapter4.html#cb27-7" tabindex="-1"></a>q114data<span class="ot">=</span><span class="fu">data.frame</span>(dati) <span class="sc">%&gt;%</span> </span>
<span id="cb27-8"><a href="Chapter4.html#cb27-8" tabindex="-1"></a>  <span class="fu">filter</span>(PRODUCT_CODE <span class="sc">%in%</span> rusinamkulturas) <span class="sc">%&gt;%</span> </span>
<span id="cb27-9"><a href="Chapter4.html#cb27-9" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(PRODUCT_CODE,PRODUCT_DESCRIPTION,SHAPE.AREA,sezona,water<span class="sc">:</span>snow_and_ice) <span class="sc">%&gt;%</span> </span>
<span id="cb27-10"><a href="Chapter4.html#cb27-10" tabindex="-1"></a>  <span class="fu">group_by</span>(PRODUCT_CODE) <span class="sc">%&gt;%</span> </span>
<span id="cb27-11"><a href="Chapter4.html#cb27-11" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">skaits=</span><span class="fu">n</span>()<span class="sc">/</span><span class="dv">10</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb27-12"><a href="Chapter4.html#cb27-12" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb27-13"><a href="Chapter4.html#cb27-13" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">nosaukums=</span><span class="fu">paste0</span>(PRODUCT_DESCRIPTION,<span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span>,<span class="st">&quot;n=&quot;</span>,skaits)) <span class="sc">%&gt;%</span> </span>
<span id="cb27-14"><a href="Chapter4.html#cb27-14" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols=</span>water<span class="sc">:</span>snow_and_ice,<span class="at">names_to =</span> <span class="st">&quot;klase&quot;</span>,<span class="at">values_to =</span> <span class="st">&quot;proporcija&quot;</span>)</span>
<span id="cb27-15"><a href="Chapter4.html#cb27-15" tabindex="-1"></a></span>
<span id="cb27-16"><a href="Chapter4.html#cb27-16" tabindex="-1"></a>q114data2<span class="ot">=</span>q114data <span class="sc">%&gt;%</span> </span>
<span id="cb27-17"><a href="Chapter4.html#cb27-17" tabindex="-1"></a>  <span class="fu">group_by</span>(nosaukums,sezona,klase) <span class="sc">%&gt;%</span> </span>
<span id="cb27-18"><a href="Chapter4.html#cb27-18" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">vertiba=</span><span class="fu">round</span>(<span class="fu">weighted.mean</span>(proporcija,<span class="at">w=</span>SHAPE.AREA,<span class="at">na.rm=</span><span class="cn">TRUE</span>)<span class="sc">*</span><span class="dv">100</span>,<span class="dv">0</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb27-19"><a href="Chapter4.html#cb27-19" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb27-20"><a href="Chapter4.html#cb27-20" tabindex="-1"></a>  <span class="fu">filter</span>(klase<span class="sc">==</span><span class="st">&quot;grass&quot;</span>)</span>
<span id="cb27-21"><a href="Chapter4.html#cb27-21" tabindex="-1"></a></span>
<span id="cb27-22"><a href="Chapter4.html#cb27-22" tabindex="-1"></a>q114data3<span class="ot">=</span>q114data <span class="sc">%&gt;%</span> </span>
<span id="cb27-23"><a href="Chapter4.html#cb27-23" tabindex="-1"></a>  <span class="fu">group_by</span>(nosaukums,sezona,klase) <span class="sc">%&gt;%</span> </span>
<span id="cb27-24"><a href="Chapter4.html#cb27-24" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">vertiba=</span><span class="fu">round</span>(<span class="fu">weighted.mean</span>(proporcija,<span class="at">w=</span>SHAPE.AREA,<span class="at">na.rm=</span><span class="cn">TRUE</span>)<span class="sc">*</span><span class="dv">100</span>,<span class="dv">0</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb27-25"><a href="Chapter4.html#cb27-25" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb27-26"><a href="Chapter4.html#cb27-26" tabindex="-1"></a>  <span class="fu">filter</span>(klase<span class="sc">==</span><span class="st">&quot;trees&quot;</span>)</span>
<span id="cb27-27"><a href="Chapter4.html#cb27-27" tabindex="-1"></a></span>
<span id="cb27-28"><a href="Chapter4.html#cb27-28" tabindex="-1"></a>q114data4<span class="ot">=</span>q114data <span class="sc">%&gt;%</span> </span>
<span id="cb27-29"><a href="Chapter4.html#cb27-29" tabindex="-1"></a>  <span class="fu">group_by</span>(nosaukums,sezona,klase) <span class="sc">%&gt;%</span> </span>
<span id="cb27-30"><a href="Chapter4.html#cb27-30" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">vertiba=</span><span class="fu">round</span>(<span class="fu">weighted.mean</span>(proporcija,<span class="at">w=</span>SHAPE.AREA,<span class="at">na.rm=</span><span class="cn">TRUE</span>)<span class="sc">*</span><span class="dv">100</span>,<span class="dv">0</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb27-31"><a href="Chapter4.html#cb27-31" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb27-32"><a href="Chapter4.html#cb27-32" tabindex="-1"></a>  <span class="fu">filter</span>(klase<span class="sc">==</span><span class="st">&quot;crops&quot;</span>)</span>
<span id="cb27-33"><a href="Chapter4.html#cb27-33" tabindex="-1"></a></span>
<span id="cb27-34"><a href="Chapter4.html#cb27-34" tabindex="-1"></a><span class="fu">ggplot</span>(q114data,<span class="fu">aes</span>(sezona,proporcija,<span class="at">col=</span>klase))<span class="sc">+</span></span>
<span id="cb27-35"><a href="Chapter4.html#cb27-35" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>nosaukums)<span class="sc">+</span></span>
<span id="cb27-36"><a href="Chapter4.html#cb27-36" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">position=</span><span class="fu">position_dodge</span>(<span class="at">width=</span><span class="fl">0.75</span>),<span class="at">alpha=</span><span class="fl">0.2</span>)<span class="sc">+</span></span>
<span id="cb27-37"><a href="Chapter4.html#cb27-37" tabindex="-1"></a>  <span class="fu">theme_bw</span>()<span class="sc">+</span></span>
<span id="cb27-38"><a href="Chapter4.html#cb27-38" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle=</span><span class="dv">90</span>,<span class="at">vjust=</span><span class="fl">0.5</span>),</span>
<span id="cb27-39"><a href="Chapter4.html#cb27-39" tabindex="-1"></a>        <span class="at">axis.title.y =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb27-40"><a href="Chapter4.html#cb27-40" tabindex="-1"></a>        <span class="at">legend.title =</span> <span class="fu">element_blank</span>())<span class="sc">+</span></span>
<span id="cb27-41"><a href="Chapter4.html#cb27-41" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="at">data=</span>q114data2,<span class="fu">aes</span>(sezona,<span class="at">y=</span><span class="fl">1.15</span>,<span class="at">label=</span>vertiba),<span class="at">size=</span><span class="dv">3</span>)<span class="sc">+</span></span>
<span id="cb27-42"><a href="Chapter4.html#cb27-42" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="at">data=</span>q114data3,<span class="fu">aes</span>(sezona,<span class="at">y=</span><span class="fl">1.07</span>,<span class="at">label=</span>vertiba),<span class="at">size=</span><span class="dv">3</span>)<span class="sc">+</span></span>
<span id="cb27-43"><a href="Chapter4.html#cb27-43" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="at">data=</span>q114data4,<span class="fu">aes</span>(sezona,<span class="at">y=</span><span class="fl">1.22</span>,<span class="at">label=</span>vertiba),<span class="at">size=</span><span class="dv">3</span>)<span class="sc">+</span></span>
<span id="cb27-44"><a href="Chapter4.html#cb27-44" tabindex="-1"></a>  <span class="fu">scale_color_viridis_d</span>()<span class="sc">+</span></span>
<span id="cb27-45"><a href="Chapter4.html#cb27-45" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels=</span>scales<span class="sc">::</span><span class="fu">label_percent</span>(),<span class="at">breaks=</span><span class="fu">seq</span>(<span class="dv">0</span>,<span class="dv">1</span>,<span class="at">by=</span>.<span class="dv">1</span>))<span class="sc">+</span></span>
<span id="cb27-46"><a href="Chapter4.html#cb27-46" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x=</span><span class="st">&quot;Sezona&quot;</span>)</span>
<span id="cb27-47"><a href="Chapter4.html#cb27-47" tabindex="-1"></a><span class="fu">ggview</span>(<span class="at">width=</span><span class="dv">300</span>,<span class="at">height=</span><span class="dv">150</span>,<span class="at">units=</span><span class="st">&quot;mm&quot;</span>,<span class="at">dpi=</span><span class="dv">600</span>,<span class="at">device=</span><span class="st">&quot;png&quot;</span>)</span>
<span id="cb27-48"><a href="Chapter4.html#cb27-48" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="at">filename=</span><span class="st">&quot;./pic_q114.png&quot;</span>,<span class="at">width=</span><span class="dv">300</span>,<span class="at">height=</span><span class="dv">150</span>,<span class="at">units=</span><span class="st">&quot;mm&quot;</span>,<span class="at">dpi=</span><span class="dv">600</span>)</span></code></pre></div>
</div>
<div id="q1.15-īscirtmeta-atvasāji-un-enerģijas-kultūras" class="section level3 hasAnchor" number="5.2.15">
<h3><span class="header-section-number">5.2.15</span> Q1.15: Īscirtmeta atvasāji un enerģijas kultūras<a href="Chapter4.html#q1.15-īscirtmeta-atvasāji-un-enerģijas-kultūras" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Sekojošajā attēlā <a href="Chapter4.html#fig:DWq115">5.18</a> ir ilustrēta īscirtmeta atvasāju un enerģijas kultūru (kultūru kodi “644”, “645”, “646”, “641”, “642”) saistība ar Dynamic World klasēm dažādos temporālajos griezumos. Skaitļi attēlu daļās norāda klašu “crops”, “grass” un “trees” ar lauka platību svērto vidējo īpatsvaru. Šīs klases piemēri ir visai heterogēni. Miežabrālis ir lakstaugs, tādēļ skaidra ir samērā izteiktā zālāju klases dominance, tomēr neatkarīgi no sezonas, plaša pārstāvniecība ir arī citām klasēm, kas apgrūtina tā stratificēšanu. Līdzīgi ar kokaugiem, tomēr dominē atbilstošā koku klase, kur pārējās, visticamāk, ir saistītas ar kultūras vecumu, kas tīri teorētiski būtu pieņemami no sugu izplatības modelēšanas viedokļa.</p>
<div class="figure"><span style="display:block;" id="fig:DWq115"></span>
<img src="Atteli/ch004_q115.png" alt="Lauksaimniecības kultūru grupas &quot;īscirtmeta atvasāji un enerģijas kultūras&quot; saistība ar DW klasēm." width="100%" />
<p class="caption">
Figure 5.18: Lauksaimniecības kultūru grupas “īscirtmeta atvasāji un enerģijas kultūras” saistība ar DW klasēm.
</p>
</div>
<p><br></p>
<p>Komandu rindas attēla sagatavošanas reproducēšanai:</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="Chapter4.html#cb28-1" tabindex="-1"></a>dati<span class="ot">=</span>sfarrow<span class="sc">::</span><span class="fu">st_read_parquet</span>(<span class="st">&quot;./Q1_kulturas.parquet&quot;</span>)</span>
<span id="cb28-2"><a href="Chapter4.html#cb28-2" tabindex="-1"></a>dati<span class="ot">=</span>dati <span class="sc">%&gt;%</span> </span>
<span id="cb28-3"><a href="Chapter4.html#cb28-3" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">sezona=</span><span class="fu">factor</span>(periods,<span class="at">ordered=</span><span class="cn">TRUE</span>,</span>
<span id="cb28-4"><a href="Chapter4.html#cb28-4" tabindex="-1"></a>                       <span class="at">levels=</span><span class="fu">c</span>(<span class="st">&quot;AprMay&quot;</span>,<span class="st">&quot;AprJun&quot;</span>,<span class="st">&quot;AprJul&quot;</span>,<span class="st">&quot;AprAug&quot;</span>,<span class="st">&quot;MayJun&quot;</span>,</span>
<span id="cb28-5"><a href="Chapter4.html#cb28-5" tabindex="-1"></a>                                <span class="st">&quot;MayJul&quot;</span>,<span class="st">&quot;MayAug&quot;</span>,<span class="st">&quot;JunJul&quot;</span>,<span class="st">&quot;JunAug&quot;</span>,<span class="st">&quot;JulAug&quot;</span>)))</span>
<span id="cb28-6"><a href="Chapter4.html#cb28-6" tabindex="-1"></a>atvasaji_energy<span class="ot">=</span><span class="fu">c</span>(<span class="st">&quot;644&quot;</span>, <span class="st">&quot;645&quot;</span>, <span class="st">&quot;646&quot;</span>, <span class="st">&quot;641&quot;</span>, <span class="st">&quot;642&quot;</span>)</span>
<span id="cb28-7"><a href="Chapter4.html#cb28-7" tabindex="-1"></a>q115data<span class="ot">=</span><span class="fu">data.frame</span>(dati) <span class="sc">%&gt;%</span> </span>
<span id="cb28-8"><a href="Chapter4.html#cb28-8" tabindex="-1"></a>  <span class="fu">filter</span>(PRODUCT_CODE <span class="sc">%in%</span> atvasaji_energy) <span class="sc">%&gt;%</span> </span>
<span id="cb28-9"><a href="Chapter4.html#cb28-9" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(PRODUCT_CODE,PRODUCT_DESCRIPTION,SHAPE.AREA,sezona,water<span class="sc">:</span>snow_and_ice) <span class="sc">%&gt;%</span> </span>
<span id="cb28-10"><a href="Chapter4.html#cb28-10" tabindex="-1"></a>  <span class="fu">group_by</span>(PRODUCT_CODE) <span class="sc">%&gt;%</span> </span>
<span id="cb28-11"><a href="Chapter4.html#cb28-11" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">skaits=</span><span class="fu">n</span>()<span class="sc">/</span><span class="dv">10</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb28-12"><a href="Chapter4.html#cb28-12" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb28-13"><a href="Chapter4.html#cb28-13" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">nosaukums=</span><span class="fu">paste0</span>(PRODUCT_DESCRIPTION,<span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span>,<span class="st">&quot;n=&quot;</span>,skaits)) <span class="sc">%&gt;%</span> </span>
<span id="cb28-14"><a href="Chapter4.html#cb28-14" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols=</span>water<span class="sc">:</span>snow_and_ice,<span class="at">names_to =</span> <span class="st">&quot;klase&quot;</span>,<span class="at">values_to =</span> <span class="st">&quot;proporcija&quot;</span>)</span>
<span id="cb28-15"><a href="Chapter4.html#cb28-15" tabindex="-1"></a></span>
<span id="cb28-16"><a href="Chapter4.html#cb28-16" tabindex="-1"></a>q115data2<span class="ot">=</span>q115data <span class="sc">%&gt;%</span> </span>
<span id="cb28-17"><a href="Chapter4.html#cb28-17" tabindex="-1"></a>  <span class="fu">group_by</span>(nosaukums,sezona,klase) <span class="sc">%&gt;%</span> </span>
<span id="cb28-18"><a href="Chapter4.html#cb28-18" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">vertiba=</span><span class="fu">round</span>(<span class="fu">weighted.mean</span>(proporcija,<span class="at">w=</span>SHAPE.AREA,<span class="at">na.rm=</span><span class="cn">TRUE</span>)<span class="sc">*</span><span class="dv">100</span>,<span class="dv">0</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb28-19"><a href="Chapter4.html#cb28-19" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb28-20"><a href="Chapter4.html#cb28-20" tabindex="-1"></a>  <span class="fu">filter</span>(klase<span class="sc">==</span><span class="st">&quot;grass&quot;</span>)</span>
<span id="cb28-21"><a href="Chapter4.html#cb28-21" tabindex="-1"></a></span>
<span id="cb28-22"><a href="Chapter4.html#cb28-22" tabindex="-1"></a>q115data3<span class="ot">=</span>q115data <span class="sc">%&gt;%</span> </span>
<span id="cb28-23"><a href="Chapter4.html#cb28-23" tabindex="-1"></a>  <span class="fu">group_by</span>(nosaukums,sezona,klase) <span class="sc">%&gt;%</span> </span>
<span id="cb28-24"><a href="Chapter4.html#cb28-24" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">vertiba=</span><span class="fu">round</span>(<span class="fu">weighted.mean</span>(proporcija,<span class="at">w=</span>SHAPE.AREA,<span class="at">na.rm=</span><span class="cn">TRUE</span>)<span class="sc">*</span><span class="dv">100</span>,<span class="dv">0</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb28-25"><a href="Chapter4.html#cb28-25" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb28-26"><a href="Chapter4.html#cb28-26" tabindex="-1"></a>  <span class="fu">filter</span>(klase<span class="sc">==</span><span class="st">&quot;trees&quot;</span>)</span>
<span id="cb28-27"><a href="Chapter4.html#cb28-27" tabindex="-1"></a></span>
<span id="cb28-28"><a href="Chapter4.html#cb28-28" tabindex="-1"></a>q115data4<span class="ot">=</span>q115data <span class="sc">%&gt;%</span> </span>
<span id="cb28-29"><a href="Chapter4.html#cb28-29" tabindex="-1"></a>  <span class="fu">group_by</span>(nosaukums,sezona,klase) <span class="sc">%&gt;%</span> </span>
<span id="cb28-30"><a href="Chapter4.html#cb28-30" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">vertiba=</span><span class="fu">round</span>(<span class="fu">weighted.mean</span>(proporcija,<span class="at">w=</span>SHAPE.AREA,<span class="at">na.rm=</span><span class="cn">TRUE</span>)<span class="sc">*</span><span class="dv">100</span>,<span class="dv">0</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb28-31"><a href="Chapter4.html#cb28-31" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb28-32"><a href="Chapter4.html#cb28-32" tabindex="-1"></a>  <span class="fu">filter</span>(klase<span class="sc">==</span><span class="st">&quot;crops&quot;</span>)</span>
<span id="cb28-33"><a href="Chapter4.html#cb28-33" tabindex="-1"></a></span>
<span id="cb28-34"><a href="Chapter4.html#cb28-34" tabindex="-1"></a><span class="fu">ggplot</span>(q115data,<span class="fu">aes</span>(sezona,proporcija,<span class="at">col=</span>klase))<span class="sc">+</span></span>
<span id="cb28-35"><a href="Chapter4.html#cb28-35" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>nosaukums)<span class="sc">+</span></span>
<span id="cb28-36"><a href="Chapter4.html#cb28-36" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">position=</span><span class="fu">position_dodge</span>(<span class="at">width=</span><span class="fl">0.75</span>),<span class="at">alpha=</span><span class="fl">0.2</span>)<span class="sc">+</span></span>
<span id="cb28-37"><a href="Chapter4.html#cb28-37" tabindex="-1"></a>  <span class="fu">theme_bw</span>()<span class="sc">+</span></span>
<span id="cb28-38"><a href="Chapter4.html#cb28-38" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle=</span><span class="dv">90</span>,<span class="at">vjust=</span><span class="fl">0.5</span>),</span>
<span id="cb28-39"><a href="Chapter4.html#cb28-39" tabindex="-1"></a>        <span class="at">axis.title.y =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb28-40"><a href="Chapter4.html#cb28-40" tabindex="-1"></a>        <span class="at">legend.title =</span> <span class="fu">element_blank</span>())<span class="sc">+</span></span>
<span id="cb28-41"><a href="Chapter4.html#cb28-41" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="at">data=</span>q115data2,<span class="fu">aes</span>(sezona,<span class="at">y=</span><span class="fl">1.15</span>,<span class="at">label=</span>vertiba),<span class="at">size=</span><span class="dv">3</span>)<span class="sc">+</span></span>
<span id="cb28-42"><a href="Chapter4.html#cb28-42" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="at">data=</span>q115data3,<span class="fu">aes</span>(sezona,<span class="at">y=</span><span class="fl">1.07</span>,<span class="at">label=</span>vertiba),<span class="at">size=</span><span class="dv">3</span>)<span class="sc">+</span></span>
<span id="cb28-43"><a href="Chapter4.html#cb28-43" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="at">data=</span>q115data4,<span class="fu">aes</span>(sezona,<span class="at">y=</span><span class="fl">1.22</span>,<span class="at">label=</span>vertiba),<span class="at">size=</span><span class="dv">3</span>)<span class="sc">+</span></span>
<span id="cb28-44"><a href="Chapter4.html#cb28-44" tabindex="-1"></a>  <span class="fu">scale_color_viridis_d</span>()<span class="sc">+</span></span>
<span id="cb28-45"><a href="Chapter4.html#cb28-45" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels=</span>scales<span class="sc">::</span><span class="fu">label_percent</span>(),<span class="at">breaks=</span><span class="fu">seq</span>(<span class="dv">0</span>,<span class="dv">1</span>,<span class="at">by=</span>.<span class="dv">1</span>))<span class="sc">+</span></span>
<span id="cb28-46"><a href="Chapter4.html#cb28-46" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x=</span><span class="st">&quot;Sezona&quot;</span>)</span>
<span id="cb28-47"><a href="Chapter4.html#cb28-47" tabindex="-1"></a><span class="fu">ggview</span>(<span class="at">width=</span><span class="dv">300</span>,<span class="at">height=</span><span class="dv">150</span>,<span class="at">units=</span><span class="st">&quot;mm&quot;</span>,<span class="at">dpi=</span><span class="dv">600</span>,<span class="at">device=</span><span class="st">&quot;png&quot;</span>)</span>
<span id="cb28-48"><a href="Chapter4.html#cb28-48" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="at">filename=</span><span class="st">&quot;./pic_q115.png&quot;</span>,<span class="at">width=</span><span class="dv">300</span>,<span class="at">height=</span><span class="dv">150</span>,<span class="at">units=</span><span class="st">&quot;mm&quot;</span>,<span class="at">dpi=</span><span class="dv">600</span>)</span></code></pre></div>
</div>
<div id="q1-lad-kultūru-stratificēšanai" class="section level3 hasAnchor" number="5.2.16">
<h3><span class="header-section-number">5.2.16</span> Q1: LAD kultūru stratificēšanai<a href="Chapter4.html#q1-lad-kultūru-stratificēšanai" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Ainavas aprakstu veidošanā sugu izplatības modelēšanai ir jācenšas interpretēt to kā sugas uztver vidi un to kombinēt ar pašas vides aprakstiem (datubāzu informāciju), lai izveidotu atbilstošas pazīmes. Attiecībā uz lauksaimniecībā izmantojamām zemēm, mūsu plāns ir veidot sekojošas grupas (smalkākais dalījums, kuru pēc nepieciešamības apvienot):</p>
<ul>
<li><p>aramzemes (labība-vasarāji);</p></li>
<li><p>aramzemes (labība-ziemāji);</p></li>
<li><p>aramzemes (vagu un rušināmkultūras);</p></li>
<li><p>aramzemes (vasaras rapsis un rispsis, kukurūzas, zirņi un pupas, soja, kaņepes);</p></li>
<li><p>aramzemes (ziemas rapsis un ripsis);</p></li>
<li><p>aramzemes (citur neiekļautās);</p></li>
<li><p>augļudārzi;</p></li>
<li><p>krūmveida ilggadīgie stādījumi;</p></li>
<li><p>papuves;</p></li>
<li><p>zālāji (ilggadīgie);</p></li>
<li><p>zālāji (kultivētie);</p></li>
<li><p>zālāji (ārpus lauku blokiem un bezatbalsta platības).</p></li>
</ul>
<p>Lai gan šīs klases daļēji atbilst LAD grupām, ir atšķirības un ne vienmēr ir viennozīmīgi skaidrs, kurā grupā konkrētās kultūras iekļaut. Tādēļ veicu principiālo komponentu analīzi (PCA) un K-vidējo (k=12) klāsteranalīzi, lai apskatītu sākotnējo dalījumu un veiktu nepieciešamās korekcijas.</p>
<p>Grupēšanās izpētei, izmantoju (1) Aprīļa-Augusta kultūras kodu vidējās vērtības katrā no Dynamic World klasēm un (2) katras Dynamic World klases ik divu mēnešu (“AprMay”,“MayJun”,“JunJul”,“JulAug”) vidējo aritmētisko agregāciju vienotā standartnovirzē kā ievades matricu PCA analīzē. PCA pirmā ass izskaidro 75.5% un otrā ass - 8.4% no kopējās mainības. Kā sekojošajā attēlā <a href="Chapter4.html#fig:DWq1klasteri">5.19</a> redzams, starp sākotnēji izdalītajām grupām ir plaša pārklāšanās, jo sevišķi pirmās ass kreisajā malā. Lai gan K-vidējo klāsteranalīze spēj atrast grupas, to apvienošana klāsteranalīzes rezultātos nozīmētu ekoloģiskās jēgas zaudēšanu. Savukārt sugu bioloģijas un ekoloģijas zināšanās un izpratnē par kultūru apsaimniekošanu un veģetācijas attīstības gaitu balstīto grupu sadalīšana smalkākās, radītu nopietnus izaicinājumus sugu izplatības modelēšanā EGV sastopamības dēļ. Tomēr šis vingrinājums arī skaidri uzrādīja atsevišķus kutūru kodus, kuri krasi atšķīrās no pārējām kultūrām savā grupā, tādēļ tie ir pārklasificēti:</p>
<ul>
<li><p>kultūru kodi 924, 934 un 950 ievietoti pie augļudārziem;</p></li>
<li><p>kultūru kodi 878, 930 un 940 ievietoti pie kultivētajiem zālājiem.</p></li>
</ul>
<p>Šis vingrinājums demonstrē, ka, ja nepieciešams izdalīt lauksaimniecības kultūras ekoloģisko atšķirību dēļ, DW nav sevišķi izpalīdzīgs. Protams, eksistē arī citi risinājumi, kas ir sevišķi uzmanīgi pret biežākajām lauksaimniecības kultūrām (un to klasēm), tomēr arī tie neveic tādu dalījumu kā šajās analīzēs ir paredzēts. Tādēļ no LAD datubāzes izmantošanas izvairīties nav iespējams.</p>
<p>Šobrīd šķiet, ka Dynamic World varētu sniegt atbalstu platību, kas nav lauku blokos (vai Meža Valsts reģistrā) grupēšanai plašās klasēs, bet, lai par to pārliecinātos, ir jāturpina izpēte.</p>
<div class="figure"><span style="display:block;" id="fig:DWq1klasteri"></span>
<img src="Atteli/ch004_q1klasteri.png" alt="PCA rezultāti DW klašu sastopamībai sugu izplatības modelēšanai paredzētajā lauku kultūru dalījumā." width="100%" />
<p class="caption">
Figure 5.19: PCA rezultāti DW klašu sastopamībai sugu izplatības modelēšanai paredzētajā lauku kultūru dalījumā.
</p>
</div>
<p><br></p>
<p>Komandu rindas attēla sagatavošanas un veiktās analīzes reproducēšanai (papildus fails - <a href="./Papilddati/KulturuKodi_2024.xlsx">sagatavotais un pēc klāsteranalīzes koriģētais kultūru grupējums</a>):</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="Chapter4.html#cb29-1" tabindex="-1"></a>dati<span class="ot">=</span>sfarrow<span class="sc">::</span><span class="fu">st_read_parquet</span>(<span class="st">&quot;./Q1_kulturas.parquet&quot;</span>)</span>
<span id="cb29-2"><a href="Chapter4.html#cb29-2" tabindex="-1"></a>dati<span class="ot">=</span>dati <span class="sc">%&gt;%</span> </span>
<span id="cb29-3"><a href="Chapter4.html#cb29-3" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">sezona=</span><span class="fu">factor</span>(periods,<span class="at">ordered=</span><span class="cn">TRUE</span>,</span>
<span id="cb29-4"><a href="Chapter4.html#cb29-4" tabindex="-1"></a>                       <span class="at">levels=</span><span class="fu">c</span>(<span class="st">&quot;AprMay&quot;</span>,<span class="st">&quot;AprJun&quot;</span>,<span class="st">&quot;AprJul&quot;</span>,<span class="st">&quot;AprAug&quot;</span>,<span class="st">&quot;MayJun&quot;</span>,</span>
<span id="cb29-5"><a href="Chapter4.html#cb29-5" tabindex="-1"></a>                                <span class="st">&quot;MayJul&quot;</span>,<span class="st">&quot;MayAug&quot;</span>,<span class="st">&quot;JunJul&quot;</span>,<span class="st">&quot;JunAug&quot;</span>,<span class="st">&quot;JulAug&quot;</span>)))</span>
<span id="cb29-6"><a href="Chapter4.html#cb29-6" tabindex="-1"></a>kulturam<span class="ot">=</span><span class="fu">read_excel</span>(<span class="st">&quot;./KulturuKodi_2024.xlsx&quot;</span>)</span>
<span id="cb29-7"><a href="Chapter4.html#cb29-7" tabindex="-1"></a>kulturam<span class="sc">$</span>kods<span class="ot">=</span><span class="fu">as.character</span>(kulturam<span class="sc">$</span>kods)</span>
<span id="cb29-8"><a href="Chapter4.html#cb29-8" tabindex="-1"></a>dati_means<span class="ot">=</span><span class="fu">data.frame</span>(dati) <span class="sc">%&gt;%</span> </span>
<span id="cb29-9"><a href="Chapter4.html#cb29-9" tabindex="-1"></a>  <span class="fu">select</span>(PRODUCT_CODE,sezona,water<span class="sc">:</span>snow_and_ice) <span class="sc">%&gt;%</span> </span>
<span id="cb29-10"><a href="Chapter4.html#cb29-10" tabindex="-1"></a>  <span class="fu">filter</span>(sezona <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;AprAug&quot;</span>)) <span class="sc">%&gt;%</span> <span class="co"># izvēlos vienu - garāko sezonu</span></span>
<span id="cb29-11"><a href="Chapter4.html#cb29-11" tabindex="-1"></a>  <span class="fu">group_by</span>(PRODUCT_CODE) <span class="sc">%&gt;%</span> </span>
<span id="cb29-12"><a href="Chapter4.html#cb29-12" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="fu">across</span>(water<span class="sc">:</span>snow_and_ice,mean, <span class="at">.names=</span><span class="st">&quot;mean_{col}&quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb29-13"><a href="Chapter4.html#cb29-13" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span>
<span id="cb29-14"><a href="Chapter4.html#cb29-14" tabindex="-1"></a>dati_sds<span class="ot">=</span><span class="fu">data.frame</span>(dati) <span class="sc">%&gt;%</span> </span>
<span id="cb29-15"><a href="Chapter4.html#cb29-15" tabindex="-1"></a>  <span class="fu">select</span>(PRODUCT_CODE,sezona,water<span class="sc">:</span>snow_and_ice) <span class="sc">%&gt;%</span> </span>
<span id="cb29-16"><a href="Chapter4.html#cb29-16" tabindex="-1"></a>  <span class="fu">filter</span>(sezona <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;AprMay&quot;</span>,<span class="st">&quot;MayJun&quot;</span>,<span class="st">&quot;JunJul&quot;</span>,<span class="st">&quot;JulAug&quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb29-17"><a href="Chapter4.html#cb29-17" tabindex="-1"></a>  <span class="fu">group_by</span>(PRODUCT_CODE,sezona) <span class="sc">%&gt;%</span> </span>
<span id="cb29-18"><a href="Chapter4.html#cb29-18" tabindex="-1"></a>  <span class="fu">summarise_if</span>(is.numeric,mean) <span class="sc">%&gt;%</span> </span>
<span id="cb29-19"><a href="Chapter4.html#cb29-19" tabindex="-1"></a>  <span class="fu">group_by</span>(PRODUCT_CODE) <span class="sc">%&gt;%</span> </span>
<span id="cb29-20"><a href="Chapter4.html#cb29-20" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="fu">across</span>(water<span class="sc">:</span>snow_and_ice,sd, <span class="at">.names=</span><span class="st">&quot;sd_{col}&quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb29-21"><a href="Chapter4.html#cb29-21" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span>
<span id="cb29-22"><a href="Chapter4.html#cb29-22" tabindex="-1"></a>dati2<span class="ot">=</span>dati_means <span class="sc">%&gt;%</span> </span>
<span id="cb29-23"><a href="Chapter4.html#cb29-23" tabindex="-1"></a>  <span class="fu">left_join</span>(dati_sds,<span class="at">by=</span><span class="st">&quot;PRODUCT_CODE&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb29-24"><a href="Chapter4.html#cb29-24" tabindex="-1"></a>  <span class="fu">left_join</span>(kulturam,<span class="at">by=</span><span class="fu">c</span>(<span class="st">&quot;PRODUCT_CODE&quot;</span><span class="ot">=</span><span class="st">&quot;kods&quot;</span>))</span>
<span id="cb29-25"><a href="Chapter4.html#cb29-25" tabindex="-1"></a></span>
<span id="cb29-26"><a href="Chapter4.html#cb29-26" tabindex="-1"></a>matrica<span class="ot">=</span>dati2 <span class="sc">%&gt;%</span> </span>
<span id="cb29-27"><a href="Chapter4.html#cb29-27" tabindex="-1"></a>  <span class="fu">select</span>(mean_water<span class="sc">:</span>sd_snow_and_ice)</span>
<span id="cb29-28"><a href="Chapter4.html#cb29-28" tabindex="-1"></a></span>
<span id="cb29-29"><a href="Chapter4.html#cb29-29" tabindex="-1"></a>klasteri <span class="ot">&lt;-</span> <span class="fu">kmeans</span>(matrica, <span class="at">centers =</span> <span class="dv">12</span>, <span class="at">nstart =</span> <span class="dv">160</span><span class="sc">/</span><span class="dv">12</span>, <span class="at">iter.max =</span> <span class="dv">999</span>)</span>
<span id="cb29-30"><a href="Chapter4.html#cb29-30" tabindex="-1"></a>rez_pca <span class="ot">=</span> <span class="fu">princomp</span>(matrica)</span>
<span id="cb29-31"><a href="Chapter4.html#cb29-31" tabindex="-1"></a><span class="fu">summary</span>(rez_pca)</span>
<span id="cb29-32"><a href="Chapter4.html#cb29-32" tabindex="-1"></a>rezultati <span class="ot">=</span> <span class="fu">data.frame</span>(rez_pca<span class="sc">$</span>scores,</span>
<span id="cb29-33"><a href="Chapter4.html#cb29-33" tabindex="-1"></a>                       <span class="at">klasteris=</span>klasteri<span class="sc">$</span>cluster,</span>
<span id="cb29-34"><a href="Chapter4.html#cb29-34" tabindex="-1"></a>                       <span class="at">SDMgrupa=</span>dati2<span class="sc">$</span>SDM_grupa_sakums,</span>
<span id="cb29-35"><a href="Chapter4.html#cb29-35" tabindex="-1"></a>                       <span class="at">kods=</span>dati2<span class="sc">$</span>PRODUCT_CODE)</span>
<span id="cb29-36"><a href="Chapter4.html#cb29-36" tabindex="-1"></a></span>
<span id="cb29-37"><a href="Chapter4.html#cb29-37" tabindex="-1"></a><span class="fu">ggplot</span>(rezultati,<span class="fu">aes</span>(Comp<span class="fl">.1</span>,Comp<span class="fl">.2</span>,<span class="at">col=</span>SDMgrupa,<span class="at">label=</span>kods))<span class="sc">+</span></span>
<span id="cb29-38"><a href="Chapter4.html#cb29-38" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">alpha=</span><span class="fl">0.5</span>,<span class="at">size=</span><span class="dv">4</span>)<span class="sc">+</span></span>
<span id="cb29-39"><a href="Chapter4.html#cb29-39" tabindex="-1"></a>  <span class="fu">theme_classic</span>()<span class="sc">+</span></span>
<span id="cb29-40"><a href="Chapter4.html#cb29-40" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">panel.background =</span> <span class="fu">element_rect</span>(<span class="at">color=</span><span class="st">&quot;black&quot;</span>))<span class="sc">+</span></span>
<span id="cb29-41"><a href="Chapter4.html#cb29-41" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x=</span><span class="st">&quot;PCA pirmā ass (75.5%)&quot;</span>,<span class="at">y=</span><span class="st">&quot;PCA otrā ass (8.4%)&quot;</span>,<span class="at">col=</span><span class="st">&quot;Kultūru grupa&quot;</span>)<span class="sc">+</span></span>
<span id="cb29-42"><a href="Chapter4.html#cb29-42" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.title =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">14</span>),</span>
<span id="cb29-43"><a href="Chapter4.html#cb29-43" tabindex="-1"></a>        <span class="at">axis.text=</span><span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">12</span>),</span>
<span id="cb29-44"><a href="Chapter4.html#cb29-44" tabindex="-1"></a>        <span class="at">legend.title =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">14</span>),</span>
<span id="cb29-45"><a href="Chapter4.html#cb29-45" tabindex="-1"></a>        <span class="at">legend.text=</span><span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">12</span>))</span>
<span id="cb29-46"><a href="Chapter4.html#cb29-46" tabindex="-1"></a><span class="fu">ggview</span>(<span class="at">width=</span><span class="dv">300</span>,<span class="at">height=</span><span class="dv">150</span>,<span class="at">units=</span><span class="st">&quot;mm&quot;</span>,<span class="at">dpi=</span><span class="dv">600</span>,<span class="at">device=</span><span class="st">&quot;png&quot;</span>)</span>
<span id="cb29-47"><a href="Chapter4.html#cb29-47" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="at">filename=</span><span class="st">&quot;./pic_q1klasteri.png&quot;</span>,</span>
<span id="cb29-48"><a href="Chapter4.html#cb29-48" tabindex="-1"></a>       <span class="at">width=</span><span class="dv">300</span>,<span class="at">height=</span><span class="dv">150</span>,<span class="at">units=</span><span class="st">&quot;mm&quot;</span>,<span class="at">dpi=</span><span class="dv">600</span>)</span></code></pre></div>
</div>
</div>
<div id="q2-mežaudzes-augstums-sugu-grupās" class="section level2 hasAnchor" number="5.3">
<h2><span class="header-section-number">5.3</span> Q2: Mežaudzes augstums sugu grupās<a href="Chapter4.html#q2-mežaudzes-augstums-sugu-grupās" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Lai labāk saprastu potenciālās atšķirības saistībā ar sezonalitāti, pārbaudi veicām dažādām koku sugām (un to grupām) atsevišķi:</p>
<ul>
<li><p>priedes - tīraudzes;</p></li>
<li><p>egles - tīraudzes;</p></li>
<li><p>apses - tīraudzes;</p></li>
<li><p>bērzi - tīraudzes;</p></li>
<li><p>melnalksnis - tīraudzes;</p></li>
<li><p>platlapji - audzes, kurās platlapju krājas koeficientu summa ir &gt;=8;</p></li>
<li><p>citi - pārējās mežaudzes;</p></li>
</ul>
<p>Katrā no šīm sugu-grupām veicām nogabalu izlozi katrā vecumgrupā (jaunaudzes, vidēja vecuma audzes, biestaudzes, pieaugušas audzes, pāraugušas audzes) pilnā izlases apjomā, neatkarīgi no apsaimniekošanas vēstures. Tas tad arī veido kokaudzes augstuma gradientu (jaunaudzes, vidēja vecuma un briestaudzes) un ļauj labāk arī saprast veco galu, kurā var būt notikuši jau dažādi dabiskie procesi (pāraugušās audzes).</p>
<p>Izmantojām 2023. gada DW sezonālos slāņus. Lai gan primārā interese ir par to no kāda augstuma mežaudzes ir klasificētas kā “trees”, sākumā izmantojām visas DW klases. Kopumā ir novērojama (<a href="Chapter4.html#fig:DWq21">5.20</a> att.) augsta Dynamic World klases ‘trees’ sastopamība. Otrā biežākā klase ir ‘grass’, izplatīta jaunaudzēs, savukārt jaunaudzēs sagaidāmā ‘shrub_and_scrub’ ir samērā reti sastopama, tomēr arī jaunaudzēs. Vājākā ‘trees’ pārstāvniecība ir platlapju mežaudzēs. Rodas iespaids, ka labākā atbilstība ir tikai vasaras sezonā, kas ir pretēji lauksaimniecības zemju analīzē novērotajam. Tādēļ turpinu izpēti saistībā ar kokaudzes augstumu.</p>
<p>Detalizētāka analīze liecina, ka vasaras mēneši, tomēr nav optimālākie, jo sevišķi platlapju un bērzu audzēs, kur augstākajās uzrādās ievērojams ‘trees’ ar platību svērtā īpatsvara samazinājums (<a href="Chapter4.html#fig:DWq22trees">5.21</a> att.). Arī citu koku sugu audzēs jūlija-augusta sezonā ir zemākā atbilstība sagaidāmajai vērtībai.</p>
<p>Mežaudzes virs 10 m augstuma pārējās sezonās ir gandrīz perfekti klasificētas kā ‘trees’. Vidējās vērtības pārsniedz 50% jau no zemākajām audzēs (0.1 m) un kopš apmēram 5 m augstuma tās ir vismaz 80% platības klasificētas kā ‘trees’. Biežāk sastopamā sekojošā klase ir ‘grass’, kas ir loģiski saistāms ar zemiem un relatīvi reti izvietotiem kokiem, kas ieauguši zālē. Tomēr tas arī nozīmē, ka aizaugoši zālāji, kas bagāti ar koku atvasēm līdzīgiem augiem bieži būs klasificēti kā ‘trees’.</p>
<div class="figure"><span style="display:block;" id="fig:DWq21"></span>
<img src="Atteli/ch004_q21.png" alt="DW klašu sastopamība meža nogabalos ar atšķirīgām valdošajām koku sugu grupām." width="100%" />
<p class="caption">
Figure 5.20: DW klašu sastopamība meža nogabalos ar atšķirīgām valdošajām koku sugu grupām.
</p>
</div>
<p><br></p>
<div class="figure"><span style="display:block;" id="fig:DWq22trees"></span>
<img src="Atteli/ch004_q22_trees.png" alt="Ar platību svērtā DW klases &quot;koki&quot; sastapšanas varbūtība dažādās koku sugu grupās, atkarībā no kokaudzes augstuma." width="100%" />
<p class="caption">
Figure 5.21: Ar platību svērtā DW klases “koki” sastapšanas varbūtība dažādās koku sugu grupās, atkarībā no kokaudzes augstuma.
</p>
</div>
<p><br></p>
<p>Komandu rindas attēlu sagatavošanas un veiktās analīzes reproducēšanai (tiek izmantoti <a href="Chapter3.html#Chapter3.1.1">Meža Valsts reģistrs</a> dati):</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="Chapter4.html#cb30-1" tabindex="-1"></a><span class="co"># libs</span></span>
<span id="cb30-2"><a href="Chapter4.html#cb30-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb30-3"><a href="Chapter4.html#cb30-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb30-4"><a href="Chapter4.html#cb30-4" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(arrow)) {<span class="fu">install.packages</span>(<span class="st">&quot;arrow&quot;</span>); <span class="fu">require</span>(arrow)}</span>
<span id="cb30-5"><a href="Chapter4.html#cb30-5" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(sf)) {<span class="fu">install.packages</span>(<span class="st">&quot;sf&quot;</span>); <span class="fu">require</span>(sf)}</span>
<span id="cb30-6"><a href="Chapter4.html#cb30-6" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(sfarrow)) {<span class="fu">install.packages</span>(<span class="st">&quot;sfarrow&quot;</span>); <span class="fu">require</span>(sfarrow)}</span>
<span id="cb30-7"><a href="Chapter4.html#cb30-7" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(exactextractr)) {<span class="fu">install.packages</span>(<span class="st">&quot;exactextractr&quot;</span>); <span class="fu">require</span>(exactextractr)}</span>
<span id="cb30-8"><a href="Chapter4.html#cb30-8" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(ggview)) {<span class="fu">install.packages</span>(<span class="st">&quot;ggview&quot;</span>); <span class="fu">require</span>(ggview)}</span>
<span id="cb30-9"><a href="Chapter4.html#cb30-9" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb30-10"><a href="Chapter4.html#cb30-10" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(ggrepel)) {<span class="fu">install.packages</span>(<span class="st">&quot;ggrepel&quot;</span>); <span class="fu">require</span>(ggrepel)}</span>
<span id="cb30-11"><a href="Chapter4.html#cb30-11" tabindex="-1"></a></span>
<span id="cb30-12"><a href="Chapter4.html#cb30-12" tabindex="-1"></a><span class="co"># meža dati</span></span>
<span id="cb30-13"><a href="Chapter4.html#cb30-13" tabindex="-1"></a>MVR <span class="ot">&lt;-</span> <span class="fu">st_read_parquet</span>(<span class="st">&quot;./nogabali_2024janv.parquet&quot;</span>)</span>
<span id="cb30-14"><a href="Chapter4.html#cb30-14" tabindex="-1"></a></span>
<span id="cb30-15"><a href="Chapter4.html#cb30-15" tabindex="-1"></a>priedes<span class="ot">=</span><span class="fu">c</span>(<span class="st">&quot;1&quot;</span>,<span class="st">&quot;14&quot;</span>,<span class="st">&quot;22&quot;</span>)</span>
<span id="cb30-16"><a href="Chapter4.html#cb30-16" tabindex="-1"></a>egles<span class="ot">=</span><span class="fu">c</span>(<span class="st">&quot;3&quot;</span>,<span class="st">&quot;13&quot;</span>,<span class="st">&quot;15&quot;</span>,<span class="st">&quot;23&quot;</span>)</span>
<span id="cb30-17"><a href="Chapter4.html#cb30-17" tabindex="-1"></a>apses<span class="ot">=</span><span class="fu">c</span>(<span class="st">&quot;8&quot;</span>,<span class="st">&quot;19&quot;</span>,<span class="st">&quot;68&quot;</span>)</span>
<span id="cb30-18"><a href="Chapter4.html#cb30-18" tabindex="-1"></a>berzi<span class="ot">=</span><span class="fu">c</span>(<span class="st">&quot;4&quot;</span>)</span>
<span id="cb30-19"><a href="Chapter4.html#cb30-19" tabindex="-1"></a>melnalksni<span class="ot">=</span><span class="fu">c</span>(<span class="st">&quot;6&quot;</span>)</span>
<span id="cb30-20"><a href="Chapter4.html#cb30-20" tabindex="-1"></a>platlapji<span class="ot">=</span><span class="fu">c</span>(<span class="st">&quot;10&quot;</span>,<span class="st">&quot;11&quot;</span>,<span class="st">&quot;12&quot;</span>,<span class="st">&quot;16&quot;</span>,<span class="st">&quot;17&quot;</span>,<span class="st">&quot;18&quot;</span>,<span class="st">&quot;24&quot;</span>,<span class="st">&quot;25&quot;</span>,<span class="st">&quot;26&quot;</span>,<span class="st">&quot;27&quot;</span>,<span class="st">&quot;28&quot;</span>,<span class="st">&quot;29&quot;</span>,<span class="st">&quot;61&quot;</span>,</span>
<span id="cb30-21"><a href="Chapter4.html#cb30-21" tabindex="-1"></a>            <span class="st">&quot;62&quot;</span>,<span class="st">&quot;63&quot;</span>,<span class="st">&quot;64&quot;</span>,<span class="st">&quot;65&quot;</span>,<span class="st">&quot;66&quot;</span>,<span class="st">&quot;67&quot;</span>,<span class="st">&quot;69&quot;</span>)</span>
<span id="cb30-22"><a href="Chapter4.html#cb30-22" tabindex="-1"></a>citi<span class="ot">=</span><span class="fu">c</span>(<span class="st">&quot;9&quot;</span>,<span class="st">&quot;20&quot;</span>,<span class="st">&quot;21&quot;</span>,<span class="st">&quot;32&quot;</span>,<span class="st">&quot;35&quot;</span>,<span class="st">&quot;50&quot;</span>)</span>
<span id="cb30-23"><a href="Chapter4.html#cb30-23" tabindex="-1"></a></span>
<span id="cb30-24"><a href="Chapter4.html#cb30-24" tabindex="-1"></a>mvr<span class="ot">=</span>MVR <span class="sc">%&gt;%</span> </span>
<span id="cb30-25"><a href="Chapter4.html#cb30-25" tabindex="-1"></a>  <span class="fu">filter</span>(vgr<span class="sc">&gt;</span><span class="dv">0</span><span class="sc">&amp;</span>vgr<span class="sc">&lt;=</span><span class="dv">5</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb30-26"><a href="Chapter4.html#cb30-26" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">priezu_kk=</span><span class="fu">if_else</span>(s10 <span class="sc">%in%</span> priedes,k10,<span class="dv">0</span>)<span class="sc">+</span><span class="fu">if_else</span>(s11 <span class="sc">%in%</span> priedes,k11,<span class="dv">0</span>)<span class="sc">+</span></span>
<span id="cb30-27"><a href="Chapter4.html#cb30-27" tabindex="-1"></a>           <span class="fu">if_else</span>(s12 <span class="sc">%in%</span> priedes,k12,<span class="dv">0</span>)<span class="sc">+</span><span class="fu">if_else</span>(s13 <span class="sc">%in%</span> priedes,k13,<span class="dv">0</span>)<span class="sc">+</span></span>
<span id="cb30-28"><a href="Chapter4.html#cb30-28" tabindex="-1"></a>           <span class="fu">if_else</span>(s14 <span class="sc">%in%</span> priedes,k14,<span class="dv">0</span>),</span>
<span id="cb30-29"><a href="Chapter4.html#cb30-29" tabindex="-1"></a>         <span class="at">eglu_kk=</span><span class="fu">if_else</span>(s10 <span class="sc">%in%</span> egles,k10,<span class="dv">0</span>)<span class="sc">+</span><span class="fu">if_else</span>(s11 <span class="sc">%in%</span> egles,k11,<span class="dv">0</span>)<span class="sc">+</span></span>
<span id="cb30-30"><a href="Chapter4.html#cb30-30" tabindex="-1"></a>           <span class="fu">if_else</span>(s12 <span class="sc">%in%</span> egles,k12,<span class="dv">0</span>)<span class="sc">+</span><span class="fu">if_else</span>(s13 <span class="sc">%in%</span> egles,k13,<span class="dv">0</span>)<span class="sc">+</span></span>
<span id="cb30-31"><a href="Chapter4.html#cb30-31" tabindex="-1"></a>           <span class="fu">if_else</span>(s14 <span class="sc">%in%</span> egles,k14,<span class="dv">0</span>),</span>
<span id="cb30-32"><a href="Chapter4.html#cb30-32" tabindex="-1"></a>         <span class="at">apsu_kk=</span><span class="fu">if_else</span>(s10 <span class="sc">%in%</span> apses,k10,<span class="dv">0</span>)<span class="sc">+</span><span class="fu">if_else</span>(s11 <span class="sc">%in%</span> apses,k11,<span class="dv">0</span>)<span class="sc">+</span></span>
<span id="cb30-33"><a href="Chapter4.html#cb30-33" tabindex="-1"></a>           <span class="fu">if_else</span>(s12 <span class="sc">%in%</span> apses,k12,<span class="dv">0</span>)<span class="sc">+</span><span class="fu">if_else</span>(s13 <span class="sc">%in%</span> apses,k13,<span class="dv">0</span>)<span class="sc">+</span></span>
<span id="cb30-34"><a href="Chapter4.html#cb30-34" tabindex="-1"></a>           <span class="fu">if_else</span>(s14 <span class="sc">%in%</span> apses,k14,<span class="dv">0</span>),</span>
<span id="cb30-35"><a href="Chapter4.html#cb30-35" tabindex="-1"></a>         <span class="at">berzu_kk=</span><span class="fu">if_else</span>(s10 <span class="sc">%in%</span> berzi,k10,<span class="dv">0</span>)<span class="sc">+</span><span class="fu">if_else</span>(s11 <span class="sc">%in%</span> berzi,k11,<span class="dv">0</span>)<span class="sc">+</span></span>
<span id="cb30-36"><a href="Chapter4.html#cb30-36" tabindex="-1"></a>           <span class="fu">if_else</span>(s12 <span class="sc">%in%</span> berzi,k12,<span class="dv">0</span>)<span class="sc">+</span><span class="fu">if_else</span>(s13 <span class="sc">%in%</span> berzi,k13,<span class="dv">0</span>)<span class="sc">+</span></span>
<span id="cb30-37"><a href="Chapter4.html#cb30-37" tabindex="-1"></a>           <span class="fu">if_else</span>(s14 <span class="sc">%in%</span> berzi,k14,<span class="dv">0</span>),</span>
<span id="cb30-38"><a href="Chapter4.html#cb30-38" tabindex="-1"></a>         <span class="at">melnalksna_kk=</span><span class="fu">if_else</span>(s10 <span class="sc">%in%</span> melnalksni,k10,<span class="dv">0</span>)<span class="sc">+</span></span>
<span id="cb30-39"><a href="Chapter4.html#cb30-39" tabindex="-1"></a>           <span class="fu">if_else</span>(s11 <span class="sc">%in%</span> melnalksni,k11,<span class="dv">0</span>)<span class="sc">+</span><span class="fu">if_else</span>(s12 <span class="sc">%in%</span> melnalksni,k12,<span class="dv">0</span>)<span class="sc">+</span></span>
<span id="cb30-40"><a href="Chapter4.html#cb30-40" tabindex="-1"></a>           <span class="fu">if_else</span>(s13 <span class="sc">%in%</span> melnalksni,k13,<span class="dv">0</span>)<span class="sc">+</span><span class="fu">if_else</span>(s14 <span class="sc">%in%</span> melnalksni,k14,<span class="dv">0</span>),</span>
<span id="cb30-41"><a href="Chapter4.html#cb30-41" tabindex="-1"></a>         <span class="at">platlapju_kk=</span><span class="fu">if_else</span>(s10 <span class="sc">%in%</span> platlapji,k10,<span class="dv">0</span>)<span class="sc">+</span></span>
<span id="cb30-42"><a href="Chapter4.html#cb30-42" tabindex="-1"></a>           <span class="fu">if_else</span>(s11 <span class="sc">%in%</span> platlapji,k11,<span class="dv">0</span>)<span class="sc">+</span><span class="fu">if_else</span>(s12 <span class="sc">%in%</span> platlapji,k12,<span class="dv">0</span>)<span class="sc">+</span></span>
<span id="cb30-43"><a href="Chapter4.html#cb30-43" tabindex="-1"></a>           <span class="fu">if_else</span>(s13 <span class="sc">%in%</span> platlapji,k13,<span class="dv">0</span>)<span class="sc">+</span><span class="fu">if_else</span>(s14 <span class="sc">%in%</span> platlapji,k14,<span class="dv">0</span>),</span>
<span id="cb30-44"><a href="Chapter4.html#cb30-44" tabindex="-1"></a>         <span class="at">citu_kk=</span><span class="fu">if_else</span>(s10 <span class="sc">%in%</span> citi,k10,<span class="dv">0</span>)<span class="sc">+</span><span class="fu">if_else</span>(s11 <span class="sc">%in%</span> citi,k11,<span class="dv">0</span>)<span class="sc">+</span></span>
<span id="cb30-45"><a href="Chapter4.html#cb30-45" tabindex="-1"></a>           <span class="fu">if_else</span>(s12 <span class="sc">%in%</span> citi,k12,<span class="dv">0</span>)<span class="sc">+</span><span class="fu">if_else</span>(s13 <span class="sc">%in%</span> citi,k13,<span class="dv">0</span>)<span class="sc">+</span></span>
<span id="cb30-46"><a href="Chapter4.html#cb30-46" tabindex="-1"></a>           <span class="fu">if_else</span>(s14 <span class="sc">%in%</span> citi,k14,<span class="dv">0</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb30-47"><a href="Chapter4.html#cb30-47" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">sugai=</span><span class="fu">if_else</span>(priezu_kk<span class="sc">==</span><span class="dv">10</span>,<span class="st">&quot;priedes&quot;</span>,</span>
<span id="cb30-48"><a href="Chapter4.html#cb30-48" tabindex="-1"></a>                       <span class="fu">if_else</span>(eglu_kk<span class="sc">==</span><span class="dv">10</span>,<span class="st">&quot;egles&quot;</span>,</span>
<span id="cb30-49"><a href="Chapter4.html#cb30-49" tabindex="-1"></a>                               <span class="fu">if_else</span>(apsu_kk<span class="sc">==</span><span class="dv">10</span>,<span class="st">&quot;apses&quot;</span>,</span>
<span id="cb30-50"><a href="Chapter4.html#cb30-50" tabindex="-1"></a>                                       <span class="fu">if_else</span>(berzu_kk<span class="sc">==</span><span class="dv">10</span>,<span class="st">&quot;berzi&quot;</span>,</span>
<span id="cb30-51"><a href="Chapter4.html#cb30-51" tabindex="-1"></a>                                               <span class="fu">if_else</span>(melnalksna_kk<span class="sc">==</span><span class="dv">10</span>,<span class="st">&quot;melnalksnis&quot;</span>,</span>
<span id="cb30-52"><a href="Chapter4.html#cb30-52" tabindex="-1"></a>                                                       <span class="fu">if_else</span>(platlapju_kk<span class="sc">&gt;=</span><span class="dv">8</span>,<span class="st">&quot;platlapji&quot;</span>,</span>
<span id="cb30-53"><a href="Chapter4.html#cb30-53" tabindex="-1"></a>                                                               <span class="st">&quot;citi&quot;</span>))))))) <span class="sc">%&gt;%</span> </span>
<span id="cb30-54"><a href="Chapter4.html#cb30-54" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">vecumgrupas=</span><span class="fu">factor</span>(<span class="fu">if_else</span>(vgr<span class="sc">==</span><span class="dv">1</span>,<span class="st">&quot;jaunaudze&quot;</span>,</span>
<span id="cb30-55"><a href="Chapter4.html#cb30-55" tabindex="-1"></a>                                    <span class="fu">if_else</span>(vgr<span class="sc">==</span><span class="dv">2</span>,<span class="st">&quot;vidēja vecuma&quot;</span>,</span>
<span id="cb30-56"><a href="Chapter4.html#cb30-56" tabindex="-1"></a>                                            <span class="fu">if_else</span>(vgr<span class="sc">==</span><span class="dv">3</span>,<span class="st">&quot;briestaudze&quot;</span>,</span>
<span id="cb30-57"><a href="Chapter4.html#cb30-57" tabindex="-1"></a>                                                    <span class="fu">if_else</span>(vgr<span class="sc">==</span><span class="dv">4</span>,<span class="st">&quot;pieaugusi audze&quot;</span>,</span>
<span id="cb30-58"><a href="Chapter4.html#cb30-58" tabindex="-1"></a>                                                            <span class="st">&quot;pāraugusi audze&quot;</span>)))),</span>
<span id="cb30-59"><a href="Chapter4.html#cb30-59" tabindex="-1"></a>                            <span class="at">ordered=</span><span class="cn">TRUE</span>,<span class="at">levels=</span><span class="fu">c</span>(<span class="st">&quot;jaunaudze&quot;</span>,<span class="st">&quot;vidēja vecuma&quot;</span>,</span>
<span id="cb30-60"><a href="Chapter4.html#cb30-60" tabindex="-1"></a>                                                  <span class="st">&quot;briestaudze&quot;</span>,<span class="st">&quot;pieaugusi audze&quot;</span>,</span>
<span id="cb30-61"><a href="Chapter4.html#cb30-61" tabindex="-1"></a>                                                  <span class="st">&quot;pāraugusi audze&quot;</span>))) <span class="sc">%&gt;%</span> </span>
<span id="cb30-62"><a href="Chapter4.html#cb30-62" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">suga_vgr=</span><span class="fu">paste0</span>(sugai,<span class="st">&quot;_&quot;</span>,vgr)) <span class="sc">%&gt;%</span> </span>
<span id="cb30-63"><a href="Chapter4.html#cb30-63" tabindex="-1"></a>  <span class="fu">select</span>(sugai,vecumgrupas,suga_vgr,a10,h10,priezu_kk<span class="sc">:</span>citu_kk)</span>
<span id="cb30-64"><a href="Chapter4.html#cb30-64" tabindex="-1"></a></span>
<span id="cb30-65"><a href="Chapter4.html#cb30-65" tabindex="-1"></a></span>
<span id="cb30-66"><a href="Chapter4.html#cb30-66" tabindex="-1"></a><span class="co"># DW</span></span>
<span id="cb30-67"><a href="Chapter4.html#cb30-67" tabindex="-1"></a>AprAug <span class="ot">&lt;-</span> <span class="fu">rast</span>(<span class="st">&quot;./DW_2023_apraug.tif&quot;</span>)</span>
<span id="cb30-68"><a href="Chapter4.html#cb30-68" tabindex="-1"></a>AprJul <span class="ot">&lt;-</span> <span class="fu">rast</span>(<span class="st">&quot;./DW_2023_aprjul.tif&quot;</span>)</span>
<span id="cb30-69"><a href="Chapter4.html#cb30-69" tabindex="-1"></a>AprJun <span class="ot">&lt;-</span> <span class="fu">rast</span>(<span class="st">&quot;./DW_2023_aprjun.tif&quot;</span>)</span>
<span id="cb30-70"><a href="Chapter4.html#cb30-70" tabindex="-1"></a>AprMay <span class="ot">&lt;-</span> <span class="fu">rast</span>(<span class="st">&quot;./DW_2023_aprmay.tif&quot;</span>)</span>
<span id="cb30-71"><a href="Chapter4.html#cb30-71" tabindex="-1"></a>JulAug <span class="ot">&lt;-</span> <span class="fu">rast</span>(<span class="st">&quot;./DW_2023_julaug.tif&quot;</span>)</span>
<span id="cb30-72"><a href="Chapter4.html#cb30-72" tabindex="-1"></a>JunAug <span class="ot">&lt;-</span> <span class="fu">rast</span>(<span class="st">&quot;./DW_2023_julaug.tif&quot;</span>)</span>
<span id="cb30-73"><a href="Chapter4.html#cb30-73" tabindex="-1"></a>JunJul <span class="ot">&lt;-</span> <span class="fu">rast</span>(<span class="st">&quot;./DW_2023_junjul.tif&quot;</span>)</span>
<span id="cb30-74"><a href="Chapter4.html#cb30-74" tabindex="-1"></a>MayAug <span class="ot">&lt;-</span> <span class="fu">rast</span>(<span class="st">&quot;./DW_2023_mayaug.tif&quot;</span>)</span>
<span id="cb30-75"><a href="Chapter4.html#cb30-75" tabindex="-1"></a>MayJul <span class="ot">&lt;-</span> <span class="fu">rast</span>(<span class="st">&quot;./DW_2023_mayjul.tif&quot;</span>)</span>
<span id="cb30-76"><a href="Chapter4.html#cb30-76" tabindex="-1"></a>MayJun <span class="ot">&lt;-</span> <span class="fu">rast</span>(<span class="st">&quot;./DW_2023_mayjun.tif&quot;</span>)</span>
<span id="cb30-77"><a href="Chapter4.html#cb30-77" tabindex="-1"></a></span>
<span id="cb30-78"><a href="Chapter4.html#cb30-78" tabindex="-1"></a><span class="co"># utility </span></span>
<span id="cb30-79"><a href="Chapter4.html#cb30-79" tabindex="-1"></a>darbiba <span class="ot">&lt;-</span> <span class="cf">function</span>(raster, vector, period) {</span>
<span id="cb30-80"><a href="Chapter4.html#cb30-80" tabindex="-1"></a>  <span class="fu">exact_extract</span>(raster, vector, <span class="cf">function</span>(value, coverage_fraction) {</span>
<span id="cb30-81"><a href="Chapter4.html#cb30-81" tabindex="-1"></a>    <span class="fu">data.frame</span>(<span class="at">value =</span> value,</span>
<span id="cb30-82"><a href="Chapter4.html#cb30-82" tabindex="-1"></a>               <span class="at">frac =</span> coverage_fraction <span class="sc">/</span> <span class="fu">sum</span>(coverage_fraction, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb30-83"><a href="Chapter4.html#cb30-83" tabindex="-1"></a>      <span class="fu">group_by</span>(value) <span class="sc">%&gt;%</span></span>
<span id="cb30-84"><a href="Chapter4.html#cb30-84" tabindex="-1"></a>      <span class="fu">summarize</span>(<span class="at">freq =</span> <span class="fu">sum</span>(frac, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="at">.groups =</span> <span class="st">&#39;drop&#39;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb30-85"><a href="Chapter4.html#cb30-85" tabindex="-1"></a>      <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> <span class="st">&#39;value&#39;</span>,</span>
<span id="cb30-86"><a href="Chapter4.html#cb30-86" tabindex="-1"></a>                  <span class="at">names_prefix =</span> <span class="st">&#39;freq_&#39;</span>,</span>
<span id="cb30-87"><a href="Chapter4.html#cb30-87" tabindex="-1"></a>                  <span class="at">values_from =</span> <span class="st">&#39;freq&#39;</span>)</span>
<span id="cb30-88"><a href="Chapter4.html#cb30-88" tabindex="-1"></a>  }) <span class="sc">%&gt;%</span></span>
<span id="cb30-89"><a href="Chapter4.html#cb30-89" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">starts_with</span>(<span class="st">&#39;freq&#39;</span>), <span class="sc">~</span><span class="fu">replace_na</span>(., <span class="dv">0</span>))) <span class="sc">%&gt;%</span></span>
<span id="cb30-90"><a href="Chapter4.html#cb30-90" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">periods =</span> period) </span>
<span id="cb30-91"><a href="Chapter4.html#cb30-91" tabindex="-1"></a>}</span>
<span id="cb30-92"><a href="Chapter4.html#cb30-92" tabindex="-1"></a></span>
<span id="cb30-93"><a href="Chapter4.html#cb30-93" tabindex="-1"></a></span>
<span id="cb30-94"><a href="Chapter4.html#cb30-94" tabindex="-1"></a><span class="co"># DW extraction </span></span>
<span id="cb30-95"><a href="Chapter4.html#cb30-95" tabindex="-1"></a>kodi<span class="ot">=</span><span class="fu">data.frame</span>(<span class="at">kods=</span><span class="fu">levels</span>(<span class="fu">factor</span>(mvr<span class="sc">$</span>suga_vgr)))</span>
<span id="cb30-96"><a href="Chapter4.html#cb30-96" tabindex="-1"></a>dati<span class="ot">=</span>mvr[<span class="dv">1</span>,]</span>
<span id="cb30-97"><a href="Chapter4.html#cb30-97" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(kodi<span class="sc">$</span>kods)){</span>
<span id="cb30-98"><a href="Chapter4.html#cb30-98" tabindex="-1"></a>  kods<span class="ot">=</span>kodi<span class="sc">$</span>kods[i]</span>
<span id="cb30-99"><a href="Chapter4.html#cb30-99" tabindex="-1"></a>  <span class="fu">set.seed</span>(<span class="dv">0</span>)</span>
<span id="cb30-100"><a href="Chapter4.html#cb30-100" tabindex="-1"></a>  vietas <span class="ot">&lt;-</span> mvr <span class="sc">%&gt;%</span> <span class="fu">filter</span>(suga_vgr <span class="sc">==</span> kods)</span>
<span id="cb30-101"><a href="Chapter4.html#cb30-101" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">nrow</span>(vietas) <span class="sc">&lt;</span> <span class="dv">999</span>) {rand_locs <span class="ot">&lt;-</span> vietas} <span class="cf">else</span> {rand_locs <span class="ot">&lt;-</span> vietas <span class="sc">%&gt;%</span> <span class="fu">sample_n</span>(<span class="dv">999</span>)}</span>
<span id="cb30-102"><a href="Chapter4.html#cb30-102" tabindex="-1"></a>  </span>
<span id="cb30-103"><a href="Chapter4.html#cb30-103" tabindex="-1"></a>  rand_locs <span class="ot">&lt;-</span> rand_locs <span class="sc">%&gt;%</span>  <span class="fu">mutate</span>(<span class="at">id =</span> <span class="fu">row_number</span>())</span>
<span id="cb30-104"><a href="Chapter4.html#cb30-104" tabindex="-1"></a>  </span>
<span id="cb30-105"><a href="Chapter4.html#cb30-105" tabindex="-1"></a>  a<span class="ot">=</span><span class="fu">cbind</span>(rand_locs,<span class="fu">darbiba</span>(AprAug, rand_locs, <span class="st">&quot;AprAug&quot;</span>))</span>
<span id="cb30-106"><a href="Chapter4.html#cb30-106" tabindex="-1"></a>  b<span class="ot">=</span><span class="fu">cbind</span>(rand_locs,<span class="fu">darbiba</span>(AprJul, rand_locs, <span class="st">&quot;AprJul&quot;</span>))</span>
<span id="cb30-107"><a href="Chapter4.html#cb30-107" tabindex="-1"></a>  c<span class="ot">=</span><span class="fu">cbind</span>(rand_locs,<span class="fu">darbiba</span>(AprJun, rand_locs, <span class="st">&quot;AprJun&quot;</span>))</span>
<span id="cb30-108"><a href="Chapter4.html#cb30-108" tabindex="-1"></a>  d<span class="ot">=</span><span class="fu">cbind</span>(rand_locs,<span class="fu">darbiba</span>(AprMay, rand_locs, <span class="st">&quot;AprMay&quot;</span>))</span>
<span id="cb30-109"><a href="Chapter4.html#cb30-109" tabindex="-1"></a>  e<span class="ot">=</span><span class="fu">cbind</span>(rand_locs,<span class="fu">darbiba</span>(JulAug, rand_locs, <span class="st">&quot;JulAug&quot;</span>))</span>
<span id="cb30-110"><a href="Chapter4.html#cb30-110" tabindex="-1"></a>  f<span class="ot">=</span><span class="fu">cbind</span>(rand_locs,<span class="fu">darbiba</span>(JunAug, rand_locs, <span class="st">&quot;JunAug&quot;</span>))</span>
<span id="cb30-111"><a href="Chapter4.html#cb30-111" tabindex="-1"></a>  g<span class="ot">=</span><span class="fu">cbind</span>(rand_locs,<span class="fu">darbiba</span>(JunJul, rand_locs, <span class="st">&quot;JunJul&quot;</span>))</span>
<span id="cb30-112"><a href="Chapter4.html#cb30-112" tabindex="-1"></a>  h<span class="ot">=</span><span class="fu">cbind</span>(rand_locs,<span class="fu">darbiba</span>(MayAug, rand_locs, <span class="st">&quot;MayAug&quot;</span>))</span>
<span id="cb30-113"><a href="Chapter4.html#cb30-113" tabindex="-1"></a>  i<span class="ot">=</span><span class="fu">cbind</span>(rand_locs,<span class="fu">darbiba</span>(MayJul, rand_locs, <span class="st">&quot;MayJul&quot;</span>))</span>
<span id="cb30-114"><a href="Chapter4.html#cb30-114" tabindex="-1"></a>  j<span class="ot">=</span><span class="fu">cbind</span>(rand_locs,<span class="fu">darbiba</span>(MayJun, rand_locs, <span class="st">&quot;MayJun&quot;</span>))</span>
<span id="cb30-115"><a href="Chapter4.html#cb30-115" tabindex="-1"></a>  </span>
<span id="cb30-116"><a href="Chapter4.html#cb30-116" tabindex="-1"></a>  </span>
<span id="cb30-117"><a href="Chapter4.html#cb30-117" tabindex="-1"></a>  rez<span class="ot">=</span><span class="fu">bind_rows</span>(a,b,c,d,e,f,g,h,i,j)</span>
<span id="cb30-118"><a href="Chapter4.html#cb30-118" tabindex="-1"></a>  dati <span class="ot">&lt;-</span> <span class="fu">bind_rows</span>(dati, rez)</span>
<span id="cb30-119"><a href="Chapter4.html#cb30-119" tabindex="-1"></a>}</span>
<span id="cb30-120"><a href="Chapter4.html#cb30-120" tabindex="-1"></a></span>
<span id="cb30-121"><a href="Chapter4.html#cb30-121" tabindex="-1"></a>dati<span class="ot">=</span>dati <span class="sc">%&gt;%</span> </span>
<span id="cb30-122"><a href="Chapter4.html#cb30-122" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">water=</span>freq_0,</span>
<span id="cb30-123"><a href="Chapter4.html#cb30-123" tabindex="-1"></a>         <span class="at">trees=</span>freq_1,</span>
<span id="cb30-124"><a href="Chapter4.html#cb30-124" tabindex="-1"></a>         <span class="at">grass=</span>freq_2,</span>
<span id="cb30-125"><a href="Chapter4.html#cb30-125" tabindex="-1"></a>         <span class="at">flooded_vegetation=</span>freq_3,</span>
<span id="cb30-126"><a href="Chapter4.html#cb30-126" tabindex="-1"></a>         <span class="at">crops=</span>freq_4,</span>
<span id="cb30-127"><a href="Chapter4.html#cb30-127" tabindex="-1"></a>         <span class="at">shrub_and_scrub=</span>freq_5,</span>
<span id="cb30-128"><a href="Chapter4.html#cb30-128" tabindex="-1"></a>         <span class="at">built=</span>freq_6,</span>
<span id="cb30-129"><a href="Chapter4.html#cb30-129" tabindex="-1"></a>         <span class="at">bare=</span>freq_7,</span>
<span id="cb30-130"><a href="Chapter4.html#cb30-130" tabindex="-1"></a>         <span class="at">snow_and_ice=</span>freq_8)</span>
<span id="cb30-131"><a href="Chapter4.html#cb30-131" tabindex="-1"></a>dati_real<span class="ot">=</span>dati[<span class="sc">-</span><span class="dv">1</span>,]</span>
<span id="cb30-132"><a href="Chapter4.html#cb30-132" tabindex="-1"></a></span>
<span id="cb30-133"><a href="Chapter4.html#cb30-133" tabindex="-1"></a>dati_real[<span class="fu">is.na</span>(dati_real)]<span class="ot">=</span><span class="dv">0</span></span>
<span id="cb30-134"><a href="Chapter4.html#cb30-134" tabindex="-1"></a>dati_real<span class="sc">$</span>area<span class="ot">=</span><span class="fu">as.numeric</span>(<span class="fu">st_area</span>(dati_real))</span>
<span id="cb30-135"><a href="Chapter4.html#cb30-135" tabindex="-1"></a>dati_real<span class="sc">$</span>perimeter<span class="ot">=</span><span class="fu">as.numeric</span>(<span class="fu">st_perimeter</span>(dati_real))</span>
<span id="cb30-136"><a href="Chapter4.html#cb30-136" tabindex="-1"></a></span>
<span id="cb30-137"><a href="Chapter4.html#cb30-137" tabindex="-1"></a>sfarrow<span class="sc">::</span><span class="fu">st_write_parquet</span>(dati_real,<span class="st">&quot;./Q2_mezaudzes.parquet&quot;</span>)</span>
<span id="cb30-138"><a href="Chapter4.html#cb30-138" tabindex="-1"></a></span>
<span id="cb30-139"><a href="Chapter4.html#cb30-139" tabindex="-1"></a><span class="co"># DW klases MVR grupās </span></span>
<span id="cb30-140"><a href="Chapter4.html#cb30-140" tabindex="-1"></a>dati<span class="ot">=</span>sfarrow<span class="sc">::</span><span class="fu">st_read_parquet</span>(<span class="st">&quot;./Q2_mezaudzes.parquet&quot;</span>)</span>
<span id="cb30-141"><a href="Chapter4.html#cb30-141" tabindex="-1"></a></span>
<span id="cb30-142"><a href="Chapter4.html#cb30-142" tabindex="-1"></a>dati<span class="ot">=</span>dati <span class="sc">%&gt;%</span> </span>
<span id="cb30-143"><a href="Chapter4.html#cb30-143" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">sezona=</span><span class="fu">factor</span>(periods,<span class="at">ordered=</span><span class="cn">TRUE</span>,</span>
<span id="cb30-144"><a href="Chapter4.html#cb30-144" tabindex="-1"></a>                       <span class="at">levels=</span><span class="fu">c</span>(<span class="st">&quot;AprMay&quot;</span>,<span class="st">&quot;AprJun&quot;</span>,<span class="st">&quot;AprJul&quot;</span>,<span class="st">&quot;AprAug&quot;</span>,<span class="st">&quot;MayJun&quot;</span>,</span>
<span id="cb30-145"><a href="Chapter4.html#cb30-145" tabindex="-1"></a>                                <span class="st">&quot;MayJul&quot;</span>,<span class="st">&quot;MayAug&quot;</span>,<span class="st">&quot;JunJul&quot;</span>,<span class="st">&quot;JunAug&quot;</span>,<span class="st">&quot;JulAug&quot;</span>)))</span>
<span id="cb30-146"><a href="Chapter4.html#cb30-146" tabindex="-1"></a></span>
<span id="cb30-147"><a href="Chapter4.html#cb30-147" tabindex="-1"></a></span>
<span id="cb30-148"><a href="Chapter4.html#cb30-148" tabindex="-1"></a>q21data<span class="ot">=</span><span class="fu">data.frame</span>(dati) <span class="sc">%&gt;%</span> </span>
<span id="cb30-149"><a href="Chapter4.html#cb30-149" tabindex="-1"></a>  <span class="fu">select</span>(sugai<span class="sc">:</span>suga_vgr,sezona,water<span class="sc">:</span>snow_and_ice) <span class="sc">%&gt;%</span> </span>
<span id="cb30-150"><a href="Chapter4.html#cb30-150" tabindex="-1"></a>  <span class="fu">group_by</span>(sugai,vecumgrupas,suga_vgr) <span class="sc">%&gt;%</span> </span>
<span id="cb30-151"><a href="Chapter4.html#cb30-151" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">skaits=</span><span class="fu">n</span>()<span class="sc">/</span><span class="dv">10</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb30-152"><a href="Chapter4.html#cb30-152" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb30-153"><a href="Chapter4.html#cb30-153" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols=</span>water<span class="sc">:</span>snow_and_ice,<span class="at">names_to =</span> <span class="st">&quot;klase&quot;</span>,<span class="at">values_to =</span> <span class="st">&quot;proporcija&quot;</span>)</span>
<span id="cb30-154"><a href="Chapter4.html#cb30-154" tabindex="-1"></a></span>
<span id="cb30-155"><a href="Chapter4.html#cb30-155" tabindex="-1"></a><span class="fu">ggplot</span>(q21data,<span class="fu">aes</span>(sezona,proporcija,<span class="at">col=</span>klase))<span class="sc">+</span></span>
<span id="cb30-156"><a href="Chapter4.html#cb30-156" tabindex="-1"></a>  <span class="fu">facet_grid</span>(vecumgrupas<span class="sc">~</span>sugai)<span class="sc">+</span></span>
<span id="cb30-157"><a href="Chapter4.html#cb30-157" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">position=</span><span class="fu">position_dodge</span>(<span class="at">width=</span><span class="fl">0.75</span>),<span class="at">alpha=</span><span class="fl">0.2</span>)<span class="sc">+</span></span>
<span id="cb30-158"><a href="Chapter4.html#cb30-158" tabindex="-1"></a>  <span class="fu">theme_bw</span>()<span class="sc">+</span></span>
<span id="cb30-159"><a href="Chapter4.html#cb30-159" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle=</span><span class="dv">90</span>,<span class="at">vjust=</span><span class="fl">0.5</span>),</span>
<span id="cb30-160"><a href="Chapter4.html#cb30-160" tabindex="-1"></a>        <span class="at">axis.title.y =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb30-161"><a href="Chapter4.html#cb30-161" tabindex="-1"></a>        <span class="at">legend.title =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb30-162"><a href="Chapter4.html#cb30-162" tabindex="-1"></a>        <span class="at">axis.title =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">14</span>),</span>
<span id="cb30-163"><a href="Chapter4.html#cb30-163" tabindex="-1"></a>        <span class="at">axis.text=</span><span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">12</span>),</span>
<span id="cb30-164"><a href="Chapter4.html#cb30-164" tabindex="-1"></a>        <span class="at">legend.text=</span><span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">12</span>),</span>
<span id="cb30-165"><a href="Chapter4.html#cb30-165" tabindex="-1"></a>        <span class="at">strip.text =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">11</span>))<span class="sc">+</span></span>
<span id="cb30-166"><a href="Chapter4.html#cb30-166" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels=</span>scales<span class="sc">::</span><span class="fu">label_percent</span>(),<span class="at">breaks=</span><span class="fu">seq</span>(<span class="dv">0</span>,<span class="dv">1</span>,<span class="at">by=</span>.<span class="dv">1</span>))<span class="sc">+</span></span>
<span id="cb30-167"><a href="Chapter4.html#cb30-167" tabindex="-1"></a>  <span class="fu">scale_color_viridis_d</span>()<span class="sc">+</span></span>
<span id="cb30-168"><a href="Chapter4.html#cb30-168" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x=</span><span class="st">&quot;Sezona&quot;</span>)</span>
<span id="cb30-169"><a href="Chapter4.html#cb30-169" tabindex="-1"></a></span>
<span id="cb30-170"><a href="Chapter4.html#cb30-170" tabindex="-1"></a><span class="fu">ggview</span>(<span class="at">width=</span><span class="dv">400</span>,<span class="at">height=</span><span class="dv">250</span>,<span class="at">units=</span><span class="st">&quot;mm&quot;</span>,<span class="at">dpi=</span><span class="dv">600</span>,<span class="at">device=</span><span class="st">&quot;png&quot;</span>)</span>
<span id="cb30-171"><a href="Chapter4.html#cb30-171" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="at">filename=</span><span class="st">&quot;./pic_q21.png&quot;</span>,<span class="at">width=</span><span class="dv">400</span>,<span class="at">height=</span><span class="dv">250</span>,<span class="at">units=</span><span class="st">&quot;mm&quot;</span>,<span class="at">dpi=</span><span class="dv">600</span>)</span>
<span id="cb30-172"><a href="Chapter4.html#cb30-172" tabindex="-1"></a></span>
<span id="cb30-173"><a href="Chapter4.html#cb30-173" tabindex="-1"></a></span>
<span id="cb30-174"><a href="Chapter4.html#cb30-174" tabindex="-1"></a><span class="co"># Augstumi ----</span></span>
<span id="cb30-175"><a href="Chapter4.html#cb30-175" tabindex="-1"></a></span>
<span id="cb30-176"><a href="Chapter4.html#cb30-176" tabindex="-1"></a>q22data_trees<span class="ot">=</span><span class="fu">data.frame</span>(dati) <span class="sc">%&gt;%</span> </span>
<span id="cb30-177"><a href="Chapter4.html#cb30-177" tabindex="-1"></a>  <span class="fu">select</span>(sugai,vecumgrupas,suga_vgr,sezona,h10,area,trees)  <span class="sc">%&gt;%</span> </span>
<span id="cb30-178"><a href="Chapter4.html#cb30-178" tabindex="-1"></a>  <span class="fu">group_by</span>(sugai,sezona,h10) <span class="sc">%&gt;%</span> </span>
<span id="cb30-179"><a href="Chapter4.html#cb30-179" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">vid_prop=</span><span class="fu">weighted.mean</span>(<span class="at">x=</span>trees,<span class="at">w=</span>area)) <span class="sc">%&gt;%</span> </span>
<span id="cb30-180"><a href="Chapter4.html#cb30-180" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span>
<span id="cb30-181"><a href="Chapter4.html#cb30-181" tabindex="-1"></a></span>
<span id="cb30-182"><a href="Chapter4.html#cb30-182" tabindex="-1"></a><span class="fu">ggplot</span>(q22data_trees,<span class="fu">aes</span>(h10,vid_prop,<span class="at">col=</span>sezona))<span class="sc">+</span></span>
<span id="cb30-183"><a href="Chapter4.html#cb30-183" tabindex="-1"></a>  <span class="fu">theme_bw</span>()<span class="sc">+</span></span>
<span id="cb30-184"><a href="Chapter4.html#cb30-184" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>sugai,<span class="at">nrow=</span><span class="dv">2</span>)<span class="sc">+</span></span>
<span id="cb30-185"><a href="Chapter4.html#cb30-185" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">alpha=</span><span class="fl">0.1</span>)<span class="sc">+</span></span>
<span id="cb30-186"><a href="Chapter4.html#cb30-186" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method=</span><span class="st">&quot;loess&quot;</span>,<span class="at">se=</span><span class="cn">FALSE</span>)<span class="sc">+</span></span>
<span id="cb30-187"><a href="Chapter4.html#cb30-187" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels=</span>scales<span class="sc">::</span><span class="fu">label_percent</span>(),<span class="at">breaks=</span><span class="fu">seq</span>(<span class="dv">0</span>,<span class="dv">1</span>,<span class="at">by=</span>.<span class="dv">1</span>))<span class="sc">+</span></span>
<span id="cb30-188"><a href="Chapter4.html#cb30-188" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x=</span><span class="st">&quot;Augstums, m&quot;</span>,<span class="at">y=</span><span class="st">&quot;Ar platību svērtais klases &#39;trees&#39; īpatsvars (%)&quot;</span>,<span class="at">col=</span><span class="st">&quot;Sezona&quot;</span>)<span class="sc">+</span></span>
<span id="cb30-189"><a href="Chapter4.html#cb30-189" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.title =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">14</span>),</span>
<span id="cb30-190"><a href="Chapter4.html#cb30-190" tabindex="-1"></a>        <span class="at">axis.text=</span><span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">12</span>),</span>
<span id="cb30-191"><a href="Chapter4.html#cb30-191" tabindex="-1"></a>        <span class="at">strip.text =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">11</span>),</span>
<span id="cb30-192"><a href="Chapter4.html#cb30-192" tabindex="-1"></a>        <span class="at">legend.title =</span> <span class="fu">element_blank</span>(<span class="at">size=</span><span class="dv">14</span>),</span>
<span id="cb30-193"><a href="Chapter4.html#cb30-193" tabindex="-1"></a>        <span class="at">legend.text=</span><span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">12</span>))</span>
<span id="cb30-194"><a href="Chapter4.html#cb30-194" tabindex="-1"></a></span>
<span id="cb30-195"><a href="Chapter4.html#cb30-195" tabindex="-1"></a></span>
<span id="cb30-196"><a href="Chapter4.html#cb30-196" tabindex="-1"></a><span class="fu">ggview</span>(<span class="at">width=</span><span class="dv">300</span>,<span class="at">height=</span><span class="dv">150</span>,<span class="at">units=</span><span class="st">&quot;mm&quot;</span>,<span class="at">dpi=</span><span class="dv">600</span>,<span class="at">device=</span><span class="st">&quot;png&quot;</span>)</span>
<span id="cb30-197"><a href="Chapter4.html#cb30-197" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="at">filename=</span><span class="st">&quot;./pic_q22_trees.png&quot;</span>,<span class="at">width=</span><span class="dv">300</span>,<span class="at">height=</span><span class="dv">150</span>,<span class="at">units=</span><span class="st">&quot;mm&quot;</span>,<span class="at">dpi=</span><span class="dv">600</span>)</span></code></pre></div>
</div>
<div id="q3-topogrāfiskās-kartes-mitrāji" class="section level2 hasAnchor" number="5.4">
<h2><span class="header-section-number">5.4</span> Q3: Topogrāfiskās kartes mitrāji<a href="Chapter4.html#q3-topogrāfiskās-kartes-mitrāji" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Pieejamie topogrāfiskās kartes laukumi ir no 2016. gada vasaras beigu versijas. Līdz 2023. gadam ir sagaidāms, ka var būt notikušas dažādas hidroloģiskās izmaiņas, piemēram meliorācija un meliorācijas sistēmu atjaunošana, kā arī kūdras ieguves vietu paplašināšanās. Tajā pašā laikā, iespējams, arī kādu teritoriju applūšana meliorācijas sistēmu aizsērēšanas (u.tml.) dēļ. Diemžēl 2016. un 2017. gados ir bijušas mākoņainas vasaras kā dēļ plašās valsts daļās nav pieejama Dynamic World klasifikācija. Tuvākais relatīvi labi nosegtais gads ir 2018., kas, protams, ir pēc topogrāfiskās kartes sagatavošanas, tomēr tuvāk par citiem pieejamajiem.</p>
<p>Ar mitrājiem saistāmie topogrāfiskās kartes laukumi (lauka <code>FNAME</code> klases):</p>
<ul>
<li><p>Meldrājs_ūdenī_poligons (n=951);</p></li>
<li><p>poligons_Grīslājs (n=29811);</p></li>
<li><p>poligons_Meldrājs (n=9246);</p></li>
<li><p>poligons_Nec_purvs_grīslājs (n=25);</p></li>
<li><p>poligons_Nec_purvs_meldrājs (n=142);</p></li>
<li><p>poligons_Nec_purvs_sūnājs (n=103);</p></li>
<li><p>poligons_Sūnājs (n=5136).</p></li>
</ul>
<p>Zemāk esošajā attēlā <a href="Chapter4.html#fig:DWq31">5.22</a> ir raksturoša šo topogrāfiskās kartes klašu klasifikācijas sarežģītība. Lielākā daļa “poligons_Sūnājs” ir atpazīta kā “shrub_and_scrub”, kas ir ļautu korekti izdalīt augstos purvus un arī pēc biežuma sekojošās klases “trees” un “grass” ir saprotams, jo augstajos purvos var būt vietas ar lielāku koku augstumu un sastopamību un lāmu rajoni, kuros ir ar lakstaugiem bagātāka veģetācija. Līdzīgi varētu domāt par “poligons_Nec_purvs_sūnājs”. Tomēr meldrāju un grīslāju klases pārspīlēti bieži ir klasificējušās kā “trees”. Ja daļā dadījumu tas noteikti ir korketi, lielākoties tomēr tā nav - var izteikt pieņēmumu, ka jebkura augumā augstāka lakstaugu veģetācija klasificējusies par kokiem, kas daļēji sakrīt ar LAD kultūru izpēti.</p>
<div class="figure"><span style="display:block;" id="fig:DWq31"></span>
<img src="Atteli/ch004_q31.png" alt="Topogrāfiskās kartes mitrāju plankumu saistība ar DW klasēm." width="100%" />
<p class="caption">
Figure 5.22: Topogrāfiskās kartes mitrāju plankumu saistība ar DW klasēm.
</p>
</div>
<p>Komandu rindas attēlu sagatavošanas un veiktās analīzes reproducēšanai (tiek izmantoti <a href="Chapter3.html#Chapter3.1.3">LĢIA topogrāfiskā karte</a> dati):</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb31-1"><a href="Chapter4.html#cb31-1" tabindex="-1"></a><span class="co"># libs</span></span>
<span id="cb31-2"><a href="Chapter4.html#cb31-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb31-3"><a href="Chapter4.html#cb31-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb31-4"><a href="Chapter4.html#cb31-4" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(arrow)) {<span class="fu">install.packages</span>(<span class="st">&quot;arrow&quot;</span>); <span class="fu">require</span>(arrow)}</span>
<span id="cb31-5"><a href="Chapter4.html#cb31-5" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(sf)) {<span class="fu">install.packages</span>(<span class="st">&quot;sf&quot;</span>); <span class="fu">require</span>(sf)}</span>
<span id="cb31-6"><a href="Chapter4.html#cb31-6" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(sfarrow)) {<span class="fu">install.packages</span>(<span class="st">&quot;sfarrow&quot;</span>); <span class="fu">require</span>(sfarrow)}</span>
<span id="cb31-7"><a href="Chapter4.html#cb31-7" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(exactextractr)) {<span class="fu">install.packages</span>(<span class="st">&quot;exactextractr&quot;</span>); <span class="fu">require</span>(exactextractr)}</span>
<span id="cb31-8"><a href="Chapter4.html#cb31-8" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(ggview)) {<span class="fu">install.packages</span>(<span class="st">&quot;ggview&quot;</span>); <span class="fu">require</span>(ggview)}</span>
<span id="cb31-9"><a href="Chapter4.html#cb31-9" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb31-10"><a href="Chapter4.html#cb31-10" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(ggrepel)) {<span class="fu">install.packages</span>(<span class="st">&quot;ggrepel&quot;</span>); <span class="fu">require</span>(ggrepel)}</span>
<span id="cb31-11"><a href="Chapter4.html#cb31-11" tabindex="-1"></a></span>
<span id="cb31-12"><a href="Chapter4.html#cb31-12" tabindex="-1"></a><span class="co"># topogrāfiskās kartes dati</span></span>
<span id="cb31-13"><a href="Chapter4.html#cb31-13" tabindex="-1"></a>topo<span class="ot">=</span>sfarrow<span class="sc">::</span><span class="fu">st_read_parquet</span>(<span class="st">&quot;./Topo_landus_A.parquet&quot;</span>)</span>
<span id="cb31-14"><a href="Chapter4.html#cb31-14" tabindex="-1"></a>mitraji<span class="ot">=</span>topo <span class="sc">%&gt;%</span> </span>
<span id="cb31-15"><a href="Chapter4.html#cb31-15" tabindex="-1"></a>  <span class="fu">filter</span>(FNAME <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;Meldrājs_ūdenī_poligons&quot;</span>,<span class="st">&quot;poligons_Grīslājs&quot;</span>,</span>
<span id="cb31-16"><a href="Chapter4.html#cb31-16" tabindex="-1"></a>                      <span class="st">&quot;poligons_Meldrājs&quot;</span>,<span class="st">&quot;poligons_Nec_purvs_grīslājs&quot;</span>,</span>
<span id="cb31-17"><a href="Chapter4.html#cb31-17" tabindex="-1"></a>                      <span class="st">&quot;poligons_Nec_purvs_meldrājs&quot;</span>,<span class="st">&quot;poligons_Nec_purvs_sūnājs&quot;</span>,</span>
<span id="cb31-18"><a href="Chapter4.html#cb31-18" tabindex="-1"></a>                      <span class="st">&quot;poligons_Sūnājs&quot;</span>))</span>
<span id="cb31-19"><a href="Chapter4.html#cb31-19" tabindex="-1"></a></span>
<span id="cb31-20"><a href="Chapter4.html#cb31-20" tabindex="-1"></a></span>
<span id="cb31-21"><a href="Chapter4.html#cb31-21" tabindex="-1"></a><span class="co"># DW</span></span>
<span id="cb31-22"><a href="Chapter4.html#cb31-22" tabindex="-1"></a>AprAug <span class="ot">&lt;-</span> <span class="fu">rast</span>(<span class="st">&quot;./DW_2023_apraug.tif&quot;</span>)</span>
<span id="cb31-23"><a href="Chapter4.html#cb31-23" tabindex="-1"></a>AprJul <span class="ot">&lt;-</span> <span class="fu">rast</span>(<span class="st">&quot;./DW_2023_aprjul.tif&quot;</span>)</span>
<span id="cb31-24"><a href="Chapter4.html#cb31-24" tabindex="-1"></a>AprJun <span class="ot">&lt;-</span> <span class="fu">rast</span>(<span class="st">&quot;./DW_2023_aprjun.tif&quot;</span>)</span>
<span id="cb31-25"><a href="Chapter4.html#cb31-25" tabindex="-1"></a>AprMay <span class="ot">&lt;-</span> <span class="fu">rast</span>(<span class="st">&quot;./DW_2023_aprmay.tif&quot;</span>)</span>
<span id="cb31-26"><a href="Chapter4.html#cb31-26" tabindex="-1"></a>JulAug <span class="ot">&lt;-</span> <span class="fu">rast</span>(<span class="st">&quot;./DW_2023_julaug.tif&quot;</span>)</span>
<span id="cb31-27"><a href="Chapter4.html#cb31-27" tabindex="-1"></a>JunAug <span class="ot">&lt;-</span> <span class="fu">rast</span>(<span class="st">&quot;./DW_2023_julaug.tif&quot;</span>)</span>
<span id="cb31-28"><a href="Chapter4.html#cb31-28" tabindex="-1"></a>JunJul <span class="ot">&lt;-</span> <span class="fu">rast</span>(<span class="st">&quot;./DW_2023_junjul.tif&quot;</span>)</span>
<span id="cb31-29"><a href="Chapter4.html#cb31-29" tabindex="-1"></a>MayAug <span class="ot">&lt;-</span> <span class="fu">rast</span>(<span class="st">&quot;./DW_2023_mayaug.tif&quot;</span>)</span>
<span id="cb31-30"><a href="Chapter4.html#cb31-30" tabindex="-1"></a>MayJul <span class="ot">&lt;-</span> <span class="fu">rast</span>(<span class="st">&quot;./DW_2023_mayjul.tif&quot;</span>)</span>
<span id="cb31-31"><a href="Chapter4.html#cb31-31" tabindex="-1"></a>MayJun <span class="ot">&lt;-</span> <span class="fu">rast</span>(<span class="st">&quot;./DW_2023_mayjun.tif&quot;</span>)</span>
<span id="cb31-32"><a href="Chapter4.html#cb31-32" tabindex="-1"></a></span>
<span id="cb31-33"><a href="Chapter4.html#cb31-33" tabindex="-1"></a><span class="co"># utility </span></span>
<span id="cb31-34"><a href="Chapter4.html#cb31-34" tabindex="-1"></a>darbiba <span class="ot">&lt;-</span> <span class="cf">function</span>(raster, vector, period) {</span>
<span id="cb31-35"><a href="Chapter4.html#cb31-35" tabindex="-1"></a>  <span class="fu">exact_extract</span>(raster, vector, <span class="cf">function</span>(value, coverage_fraction) {</span>
<span id="cb31-36"><a href="Chapter4.html#cb31-36" tabindex="-1"></a>    <span class="fu">data.frame</span>(<span class="at">value =</span> value,</span>
<span id="cb31-37"><a href="Chapter4.html#cb31-37" tabindex="-1"></a>               <span class="at">frac =</span> coverage_fraction <span class="sc">/</span> <span class="fu">sum</span>(coverage_fraction, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb31-38"><a href="Chapter4.html#cb31-38" tabindex="-1"></a>      <span class="fu">group_by</span>(value) <span class="sc">%&gt;%</span></span>
<span id="cb31-39"><a href="Chapter4.html#cb31-39" tabindex="-1"></a>      <span class="fu">summarize</span>(<span class="at">freq =</span> <span class="fu">sum</span>(frac, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="at">.groups =</span> <span class="st">&#39;drop&#39;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb31-40"><a href="Chapter4.html#cb31-40" tabindex="-1"></a>      <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> <span class="st">&#39;value&#39;</span>,</span>
<span id="cb31-41"><a href="Chapter4.html#cb31-41" tabindex="-1"></a>                  <span class="at">names_prefix =</span> <span class="st">&#39;freq_&#39;</span>,</span>
<span id="cb31-42"><a href="Chapter4.html#cb31-42" tabindex="-1"></a>                  <span class="at">values_from =</span> <span class="st">&#39;freq&#39;</span>)</span>
<span id="cb31-43"><a href="Chapter4.html#cb31-43" tabindex="-1"></a>  }) <span class="sc">%&gt;%</span></span>
<span id="cb31-44"><a href="Chapter4.html#cb31-44" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">starts_with</span>(<span class="st">&#39;freq&#39;</span>), <span class="sc">~</span><span class="fu">replace_na</span>(., <span class="dv">0</span>))) <span class="sc">%&gt;%</span></span>
<span id="cb31-45"><a href="Chapter4.html#cb31-45" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">periods =</span> period) </span>
<span id="cb31-46"><a href="Chapter4.html#cb31-46" tabindex="-1"></a>}</span>
<span id="cb31-47"><a href="Chapter4.html#cb31-47" tabindex="-1"></a></span>
<span id="cb31-48"><a href="Chapter4.html#cb31-48" tabindex="-1"></a></span>
<span id="cb31-49"><a href="Chapter4.html#cb31-49" tabindex="-1"></a><span class="co"># DW extraction </span></span>
<span id="cb31-50"><a href="Chapter4.html#cb31-50" tabindex="-1"></a>kodi<span class="ot">=</span><span class="fu">data.frame</span>(<span class="at">kods=</span><span class="fu">levels</span>(<span class="fu">factor</span>(mitraji<span class="sc">$</span>FNAME)))</span>
<span id="cb31-51"><a href="Chapter4.html#cb31-51" tabindex="-1"></a>dati<span class="ot">=</span>mitraji[<span class="dv">1</span>,]</span>
<span id="cb31-52"><a href="Chapter4.html#cb31-52" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(kodi<span class="sc">$</span>kods)){</span>
<span id="cb31-53"><a href="Chapter4.html#cb31-53" tabindex="-1"></a>  kods<span class="ot">=</span>kodi<span class="sc">$</span>kods[i]</span>
<span id="cb31-54"><a href="Chapter4.html#cb31-54" tabindex="-1"></a>  <span class="fu">set.seed</span>(<span class="dv">0</span>)</span>
<span id="cb31-55"><a href="Chapter4.html#cb31-55" tabindex="-1"></a>  vietas <span class="ot">&lt;-</span> mitraji <span class="sc">%&gt;%</span> <span class="fu">filter</span>(FNAME <span class="sc">==</span> kods)</span>
<span id="cb31-56"><a href="Chapter4.html#cb31-56" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">nrow</span>(vietas) <span class="sc">&lt;</span> <span class="dv">999</span>) {rand_locs <span class="ot">&lt;-</span> vietas} <span class="cf">else</span> {rand_locs <span class="ot">&lt;-</span> vietas <span class="sc">%&gt;%</span> <span class="fu">sample_n</span>(<span class="dv">999</span>)}</span>
<span id="cb31-57"><a href="Chapter4.html#cb31-57" tabindex="-1"></a>  rand_locs <span class="ot">&lt;-</span> rand_locs <span class="sc">%&gt;%</span>  <span class="fu">mutate</span>(<span class="at">id =</span> <span class="fu">row_number</span>())</span>
<span id="cb31-58"><a href="Chapter4.html#cb31-58" tabindex="-1"></a>  </span>
<span id="cb31-59"><a href="Chapter4.html#cb31-59" tabindex="-1"></a>  a<span class="ot">=</span><span class="fu">cbind</span>(rand_locs,<span class="fu">darbiba</span>(AprAug, rand_locs, <span class="st">&quot;AprAug&quot;</span>))</span>
<span id="cb31-60"><a href="Chapter4.html#cb31-60" tabindex="-1"></a>  b<span class="ot">=</span><span class="fu">cbind</span>(rand_locs,<span class="fu">darbiba</span>(AprJul, rand_locs, <span class="st">&quot;AprJul&quot;</span>))</span>
<span id="cb31-61"><a href="Chapter4.html#cb31-61" tabindex="-1"></a>  c<span class="ot">=</span><span class="fu">cbind</span>(rand_locs,<span class="fu">darbiba</span>(AprJun, rand_locs, <span class="st">&quot;AprJun&quot;</span>))</span>
<span id="cb31-62"><a href="Chapter4.html#cb31-62" tabindex="-1"></a>  d<span class="ot">=</span><span class="fu">cbind</span>(rand_locs,<span class="fu">darbiba</span>(AprMay, rand_locs, <span class="st">&quot;AprMay&quot;</span>))</span>
<span id="cb31-63"><a href="Chapter4.html#cb31-63" tabindex="-1"></a>  e<span class="ot">=</span><span class="fu">cbind</span>(rand_locs,<span class="fu">darbiba</span>(JulAug, rand_locs, <span class="st">&quot;JulAug&quot;</span>))</span>
<span id="cb31-64"><a href="Chapter4.html#cb31-64" tabindex="-1"></a>  f<span class="ot">=</span><span class="fu">cbind</span>(rand_locs,<span class="fu">darbiba</span>(JunAug, rand_locs, <span class="st">&quot;JunAug&quot;</span>))</span>
<span id="cb31-65"><a href="Chapter4.html#cb31-65" tabindex="-1"></a>  g<span class="ot">=</span><span class="fu">cbind</span>(rand_locs,<span class="fu">darbiba</span>(JunJul, rand_locs, <span class="st">&quot;JunJul&quot;</span>))</span>
<span id="cb31-66"><a href="Chapter4.html#cb31-66" tabindex="-1"></a>  h<span class="ot">=</span><span class="fu">cbind</span>(rand_locs,<span class="fu">darbiba</span>(MayAug, rand_locs, <span class="st">&quot;MayAug&quot;</span>))</span>
<span id="cb31-67"><a href="Chapter4.html#cb31-67" tabindex="-1"></a>  i<span class="ot">=</span><span class="fu">cbind</span>(rand_locs,<span class="fu">darbiba</span>(MayJul, rand_locs, <span class="st">&quot;MayJul&quot;</span>))</span>
<span id="cb31-68"><a href="Chapter4.html#cb31-68" tabindex="-1"></a>  j<span class="ot">=</span><span class="fu">cbind</span>(rand_locs,<span class="fu">darbiba</span>(MayJun, rand_locs, <span class="st">&quot;MayJun&quot;</span>))</span>
<span id="cb31-69"><a href="Chapter4.html#cb31-69" tabindex="-1"></a>  </span>
<span id="cb31-70"><a href="Chapter4.html#cb31-70" tabindex="-1"></a>  rez<span class="ot">=</span><span class="fu">bind_rows</span>(a,b,c,d,e,f,g,h,i,j)</span>
<span id="cb31-71"><a href="Chapter4.html#cb31-71" tabindex="-1"></a>  dati <span class="ot">&lt;-</span> <span class="fu">bind_rows</span>(dati, rez)</span>
<span id="cb31-72"><a href="Chapter4.html#cb31-72" tabindex="-1"></a>}</span>
<span id="cb31-73"><a href="Chapter4.html#cb31-73" tabindex="-1"></a></span>
<span id="cb31-74"><a href="Chapter4.html#cb31-74" tabindex="-1"></a>dati<span class="ot">=</span>dati <span class="sc">%&gt;%</span> </span>
<span id="cb31-75"><a href="Chapter4.html#cb31-75" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">water=</span>freq_0,</span>
<span id="cb31-76"><a href="Chapter4.html#cb31-76" tabindex="-1"></a>         <span class="at">trees=</span>freq_1,</span>
<span id="cb31-77"><a href="Chapter4.html#cb31-77" tabindex="-1"></a>         <span class="at">grass=</span>freq_2,</span>
<span id="cb31-78"><a href="Chapter4.html#cb31-78" tabindex="-1"></a>         <span class="at">flooded_vegetation=</span>freq_3,</span>
<span id="cb31-79"><a href="Chapter4.html#cb31-79" tabindex="-1"></a>         <span class="at">crops=</span>freq_4,</span>
<span id="cb31-80"><a href="Chapter4.html#cb31-80" tabindex="-1"></a>         <span class="at">shrub_and_scrub=</span>freq_5,</span>
<span id="cb31-81"><a href="Chapter4.html#cb31-81" tabindex="-1"></a>         <span class="at">built=</span>freq_6,</span>
<span id="cb31-82"><a href="Chapter4.html#cb31-82" tabindex="-1"></a>         <span class="at">bare=</span>freq_7,</span>
<span id="cb31-83"><a href="Chapter4.html#cb31-83" tabindex="-1"></a>         <span class="at">snow_and_ice=</span>freq_8)</span>
<span id="cb31-84"><a href="Chapter4.html#cb31-84" tabindex="-1"></a>dati_real<span class="ot">=</span>dati[<span class="sc">-</span><span class="dv">1</span>,]</span>
<span id="cb31-85"><a href="Chapter4.html#cb31-85" tabindex="-1"></a>dati_real[<span class="fu">is.na</span>(dati_real)]<span class="ot">=</span><span class="dv">0</span></span>
<span id="cb31-86"><a href="Chapter4.html#cb31-86" tabindex="-1"></a>dati_real<span class="sc">$</span>area<span class="ot">=</span><span class="fu">as.numeric</span>(<span class="fu">st_area</span>(dati_real))</span>
<span id="cb31-87"><a href="Chapter4.html#cb31-87" tabindex="-1"></a>dati_real<span class="sc">$</span>perimeter<span class="ot">=</span><span class="fu">as.numeric</span>(<span class="fu">st_perimeter</span>(dati_real))</span>
<span id="cb31-88"><a href="Chapter4.html#cb31-88" tabindex="-1"></a></span>
<span id="cb31-89"><a href="Chapter4.html#cb31-89" tabindex="-1"></a>sfarrow<span class="sc">::</span><span class="fu">st_write_parquet</span>(dati_real,<span class="st">&quot;./Q3_TopoMitraji.parquet&quot;</span>)</span>
<span id="cb31-90"><a href="Chapter4.html#cb31-90" tabindex="-1"></a></span>
<span id="cb31-91"><a href="Chapter4.html#cb31-91" tabindex="-1"></a></span>
<span id="cb31-92"><a href="Chapter4.html#cb31-92" tabindex="-1"></a>dati<span class="ot">=</span>sfarrow<span class="sc">::</span><span class="fu">st_read_parquet</span>(<span class="st">&quot;./Q3_TopoMitraji.parquet&quot;</span>)</span>
<span id="cb31-93"><a href="Chapter4.html#cb31-93" tabindex="-1"></a></span>
<span id="cb31-94"><a href="Chapter4.html#cb31-94" tabindex="-1"></a>dati<span class="ot">=</span>dati <span class="sc">%&gt;%</span> </span>
<span id="cb31-95"><a href="Chapter4.html#cb31-95" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">sezona=</span><span class="fu">factor</span>(periods,<span class="at">ordered=</span><span class="cn">TRUE</span>,</span>
<span id="cb31-96"><a href="Chapter4.html#cb31-96" tabindex="-1"></a>                       <span class="at">levels=</span><span class="fu">c</span>(<span class="st">&quot;AprMay&quot;</span>,<span class="st">&quot;AprJun&quot;</span>,<span class="st">&quot;AprJul&quot;</span>,<span class="st">&quot;AprAug&quot;</span>,<span class="st">&quot;MayJun&quot;</span>,</span>
<span id="cb31-97"><a href="Chapter4.html#cb31-97" tabindex="-1"></a>                                <span class="st">&quot;MayJul&quot;</span>,<span class="st">&quot;MayAug&quot;</span>,<span class="st">&quot;JunJul&quot;</span>,<span class="st">&quot;JunAug&quot;</span>,<span class="st">&quot;JulAug&quot;</span>)))</span>
<span id="cb31-98"><a href="Chapter4.html#cb31-98" tabindex="-1"></a></span>
<span id="cb31-99"><a href="Chapter4.html#cb31-99" tabindex="-1"></a></span>
<span id="cb31-100"><a href="Chapter4.html#cb31-100" tabindex="-1"></a>q31data<span class="ot">=</span><span class="fu">data.frame</span>(dati) <span class="sc">%&gt;%</span> </span>
<span id="cb31-101"><a href="Chapter4.html#cb31-101" tabindex="-1"></a>  <span class="fu">select</span>(FNAME,sezona,water<span class="sc">:</span>snow_and_ice) <span class="sc">%&gt;%</span> </span>
<span id="cb31-102"><a href="Chapter4.html#cb31-102" tabindex="-1"></a>  <span class="fu">group_by</span>(FNAME) <span class="sc">%&gt;%</span> </span>
<span id="cb31-103"><a href="Chapter4.html#cb31-103" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">skaits=</span><span class="fu">n</span>()<span class="sc">/</span><span class="dv">10</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb31-104"><a href="Chapter4.html#cb31-104" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb31-105"><a href="Chapter4.html#cb31-105" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols=</span>water<span class="sc">:</span>snow_and_ice,<span class="at">names_to =</span> <span class="st">&quot;klase&quot;</span>,<span class="at">values_to =</span> <span class="st">&quot;proporcija&quot;</span>)</span>
<span id="cb31-106"><a href="Chapter4.html#cb31-106" tabindex="-1"></a></span>
<span id="cb31-107"><a href="Chapter4.html#cb31-107" tabindex="-1"></a>q31_props<span class="ot">=</span><span class="fu">data.frame</span>(dati) <span class="sc">%&gt;%</span> </span>
<span id="cb31-108"><a href="Chapter4.html#cb31-108" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols=</span>water<span class="sc">:</span>snow_and_ice,<span class="at">names_to =</span> <span class="st">&quot;klase&quot;</span>,<span class="at">values_to =</span> <span class="st">&quot;proporcija&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb31-109"><a href="Chapter4.html#cb31-109" tabindex="-1"></a>  <span class="fu">filter</span>(klase <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;flooded_vegetation&quot;</span>,<span class="st">&quot;grass&quot;</span>,<span class="st">&quot;shrub_and_scrub&quot;</span>,<span class="st">&quot;trees&quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb31-110"><a href="Chapter4.html#cb31-110" tabindex="-1"></a>  <span class="fu">group_by</span>(FNAME,sezona,klase) <span class="sc">%&gt;%</span> </span>
<span id="cb31-111"><a href="Chapter4.html#cb31-111" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">proporcija=</span><span class="fu">round</span>(<span class="fu">weighted.mean</span>(proporcija,area)<span class="sc">*</span><span class="dv">100</span>,<span class="dv">0</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb31-112"><a href="Chapter4.html#cb31-112" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span>
<span id="cb31-113"><a href="Chapter4.html#cb31-113" tabindex="-1"></a></span>
<span id="cb31-114"><a href="Chapter4.html#cb31-114" tabindex="-1"></a><span class="fu">ggplot</span>(q31data,<span class="fu">aes</span>(sezona,proporcija,<span class="at">col=</span>klase))<span class="sc">+</span></span>
<span id="cb31-115"><a href="Chapter4.html#cb31-115" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>FNAME,<span class="at">nrow=</span><span class="dv">2</span>)<span class="sc">+</span></span>
<span id="cb31-116"><a href="Chapter4.html#cb31-116" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">position=</span><span class="fu">position_dodge</span>(<span class="at">width=</span><span class="fl">0.75</span>),<span class="at">alpha=</span><span class="fl">0.2</span>)<span class="sc">+</span></span>
<span id="cb31-117"><a href="Chapter4.html#cb31-117" tabindex="-1"></a>  <span class="fu">theme_bw</span>()<span class="sc">+</span></span>
<span id="cb31-118"><a href="Chapter4.html#cb31-118" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="at">data=</span>q31_props[q31_props<span class="sc">$</span>klase<span class="sc">==</span><span class="st">&quot;flooded_vegetation&quot;</span>,],</span>
<span id="cb31-119"><a href="Chapter4.html#cb31-119" tabindex="-1"></a>            <span class="fu">aes</span>(sezona,<span class="at">y=</span><span class="fl">1.25</span>,<span class="at">label=</span>proporcija),<span class="at">size=</span><span class="dv">3</span>)<span class="sc">+</span></span>
<span id="cb31-120"><a href="Chapter4.html#cb31-120" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="at">data=</span>q31_props[q31_props<span class="sc">$</span>klase<span class="sc">==</span><span class="st">&quot;grass&quot;</span>,],</span>
<span id="cb31-121"><a href="Chapter4.html#cb31-121" tabindex="-1"></a>            <span class="fu">aes</span>(sezona,<span class="at">y=</span><span class="fl">1.2</span>,<span class="at">label=</span>proporcija),<span class="at">size=</span><span class="dv">3</span>)<span class="sc">+</span></span>
<span id="cb31-122"><a href="Chapter4.html#cb31-122" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="at">data=</span>q31_props[q31_props<span class="sc">$</span>klase<span class="sc">==</span><span class="st">&quot;shrub_and_scrub&quot;</span>,],</span>
<span id="cb31-123"><a href="Chapter4.html#cb31-123" tabindex="-1"></a>            <span class="fu">aes</span>(sezona,<span class="at">y=</span><span class="fl">1.15</span>,<span class="at">label=</span>proporcija),<span class="at">size=</span><span class="dv">3</span>)<span class="sc">+</span></span>
<span id="cb31-124"><a href="Chapter4.html#cb31-124" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="at">data=</span>q31_props[q31_props<span class="sc">$</span>klase<span class="sc">==</span><span class="st">&quot;trees&quot;</span>,],</span>
<span id="cb31-125"><a href="Chapter4.html#cb31-125" tabindex="-1"></a>            <span class="fu">aes</span>(sezona,<span class="at">y=</span><span class="fl">1.1</span>,<span class="at">label=</span>proporcija),<span class="at">size=</span><span class="dv">3</span>)<span class="sc">+</span></span>
<span id="cb31-126"><a href="Chapter4.html#cb31-126" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle=</span><span class="dv">90</span>,<span class="at">vjust=</span><span class="fl">0.5</span>),</span>
<span id="cb31-127"><a href="Chapter4.html#cb31-127" tabindex="-1"></a>        <span class="at">axis.title.y =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb31-128"><a href="Chapter4.html#cb31-128" tabindex="-1"></a>        <span class="at">legend.title =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb31-129"><a href="Chapter4.html#cb31-129" tabindex="-1"></a>        <span class="at">axis.title =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">14</span>),</span>
<span id="cb31-130"><a href="Chapter4.html#cb31-130" tabindex="-1"></a>        <span class="at">axis.text=</span><span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">12</span>),</span>
<span id="cb31-131"><a href="Chapter4.html#cb31-131" tabindex="-1"></a>        <span class="at">legend.text=</span><span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">12</span>),</span>
<span id="cb31-132"><a href="Chapter4.html#cb31-132" tabindex="-1"></a>        <span class="at">strip.text =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">11</span>))<span class="sc">+</span></span>
<span id="cb31-133"><a href="Chapter4.html#cb31-133" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels=</span>scales<span class="sc">::</span><span class="fu">label_percent</span>(),<span class="at">breaks=</span><span class="fu">seq</span>(<span class="dv">0</span>,<span class="dv">1</span>,<span class="at">by=</span>.<span class="dv">1</span>))<span class="sc">+</span></span>
<span id="cb31-134"><a href="Chapter4.html#cb31-134" tabindex="-1"></a>  <span class="fu">scale_color_viridis_d</span>()<span class="sc">+</span></span>
<span id="cb31-135"><a href="Chapter4.html#cb31-135" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x=</span><span class="st">&quot;Sezona&quot;</span>)</span>
<span id="cb31-136"><a href="Chapter4.html#cb31-136" tabindex="-1"></a></span>
<span id="cb31-137"><a href="Chapter4.html#cb31-137" tabindex="-1"></a><span class="fu">ggview</span>(<span class="at">width=</span><span class="dv">300</span>,<span class="at">height=</span><span class="dv">200</span>,<span class="at">units=</span><span class="st">&quot;mm&quot;</span>,<span class="at">dpi=</span><span class="dv">600</span>,<span class="at">device=</span><span class="st">&quot;png&quot;</span>)</span>
<span id="cb31-138"><a href="Chapter4.html#cb31-138" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="at">filename=</span><span class="st">&quot;./pic_q31.png&quot;</span>,<span class="at">width=</span><span class="dv">300</span>,<span class="at">height=</span><span class="dv">200</span>,<span class="at">units=</span><span class="st">&quot;mm&quot;</span>,<span class="at">dpi=</span><span class="dv">600</span>)</span></code></pre></div>
</div>
<div id="q4-karjeri-kūdras-ieguves-vietas-un-ceļi" class="section level2 hasAnchor" number="5.5">
<h2><span class="header-section-number">5.5</span> Q4: Karjeri, kūdras ieguves vietas un ceļi<a href="Chapter4.html#q4-karjeri-kūdras-ieguves-vietas-un-ceļi" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Arī šeit izmantojām 2018. gada DW rezultātus. Ceļu gadījumā, protams, ir lielas pārmaiņas, jo sevišķi LVM apsaimniekotajās zemēs, bet šajā izpētes līmeni būs pietiekoši tikai ar topogrāfiskās kartes datiem.</p>
<p>Izmantotas slāņa LandUse laukumi (lyr=“landus_A”) klases:</p>
<ul>
<li><p>poligons_Grants (n=5);</p></li>
<li><p>poligons_Kūdra (n=1227);</p></li>
<li><p>poligons_Smiltājs (n=885).</p></li>
</ul>
<p>Ceļu laukumi (lyr=“road_A”) - ir trīs grupas, tās arī izpētījām. Itkā jau ir arī līniju slāņi ar smalkākām kategorijām, bet laukuma ģeometrijas labāk iederas šajā analīzē.</p>
<p>Ceļi ir samērā šauri objekti un DW tiecās tos nepamanīt - sekojošajā attēlā <a href="Chapter4.html#fig:DWq41">5.23</a> augšējā rindā klašu sadalījums lielā mērā atspoguļo piegulošās teritorijas. Tas nozīmē, ka bez ārējas informācijas par ceļiem iztikt nevarēs. Attiecībā uz liedagiem un dažādiem karjeriem (kūdras, grants, smilšu u.tml.), situācija ir nedaudz labāka - visur, kur ir kaut vai skraja veģetācija, tā dominē pār ar atklātu augsni saistāmo klasi. Pats par sevi tas nav nekas pārsteidzošs, tomēr, veidojot ekoģeogrāfiskos mainīgos tas jāņem vērā un ir jābūt piesardzīgiem analīžu rezultātu interpretācijā.</p>
<div class="figure"><span style="display:block;" id="fig:DWq41"></span>
<img src="Atteli/ch004_q41.png" alt="Topogrāfiskās kartes atklātās augsnes un ceļu plankumu saistība ar DW klasēm." width="100%" />
<p class="caption">
Figure 5.23: Topogrāfiskās kartes atklātās augsnes un ceļu plankumu saistība ar DW klasēm.
</p>
</div>
<p>Komandu rindas attēlu sagatavošanas un veiktās analīzes reproducēšanai (tiek izmantoti <a href="Chapter3.html#Chapter3.1.3">LĢIA topogrāfiskā karte</a> dati):</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="Chapter4.html#cb32-1" tabindex="-1"></a><span class="co"># libs</span></span>
<span id="cb32-2"><a href="Chapter4.html#cb32-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb32-3"><a href="Chapter4.html#cb32-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb32-4"><a href="Chapter4.html#cb32-4" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(arrow)) {<span class="fu">install.packages</span>(<span class="st">&quot;arrow&quot;</span>); <span class="fu">require</span>(arrow)}</span>
<span id="cb32-5"><a href="Chapter4.html#cb32-5" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(sf)) {<span class="fu">install.packages</span>(<span class="st">&quot;sf&quot;</span>); <span class="fu">require</span>(sf)}</span>
<span id="cb32-6"><a href="Chapter4.html#cb32-6" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(sfarrow)) {<span class="fu">install.packages</span>(<span class="st">&quot;sfarrow&quot;</span>); <span class="fu">require</span>(sfarrow)}</span>
<span id="cb32-7"><a href="Chapter4.html#cb32-7" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(exactextractr)) {<span class="fu">install.packages</span>(<span class="st">&quot;exactextractr&quot;</span>); <span class="fu">require</span>(exactextractr)}</span>
<span id="cb32-8"><a href="Chapter4.html#cb32-8" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(ggview)) {<span class="fu">install.packages</span>(<span class="st">&quot;ggview&quot;</span>); <span class="fu">require</span>(ggview)}</span>
<span id="cb32-9"><a href="Chapter4.html#cb32-9" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb32-10"><a href="Chapter4.html#cb32-10" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(ggrepel)) {<span class="fu">install.packages</span>(<span class="st">&quot;ggrepel&quot;</span>); <span class="fu">require</span>(ggrepel)}</span>
<span id="cb32-11"><a href="Chapter4.html#cb32-11" tabindex="-1"></a></span>
<span id="cb32-12"><a href="Chapter4.html#cb32-12" tabindex="-1"></a><span class="co"># topogrāfiskās kartes dati</span></span>
<span id="cb32-13"><a href="Chapter4.html#cb32-13" tabindex="-1"></a>topo<span class="ot">=</span>sfarrow<span class="sc">::</span><span class="fu">st_read_parquet</span>(<span class="st">&quot;./Topo_landus_A.parquet&quot;</span>)</span>
<span id="cb32-14"><a href="Chapter4.html#cb32-14" tabindex="-1"></a>atvertie<span class="ot">=</span>topo <span class="sc">%&gt;%</span> </span>
<span id="cb32-15"><a href="Chapter4.html#cb32-15" tabindex="-1"></a>  <span class="fu">filter</span>(FNAME <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;poligons_Grants&quot;</span>,<span class="st">&quot;poligons_Kūdra&quot;</span>,<span class="st">&quot;poligons_Smiltājs&quot;</span>))</span>
<span id="cb32-16"><a href="Chapter4.html#cb32-16" tabindex="-1"></a>celi<span class="ot">=</span>sfarrow<span class="sc">::</span><span class="fu">st_read_parquet</span>(<span class="st">&quot;./Topo_road_A.parquet&quot;</span>)</span>
<span id="cb32-17"><a href="Chapter4.html#cb32-17" tabindex="-1"></a>abi<span class="ot">=</span><span class="fu">rbind</span>(atvertie,celi)</span>
<span id="cb32-18"><a href="Chapter4.html#cb32-18" tabindex="-1"></a></span>
<span id="cb32-19"><a href="Chapter4.html#cb32-19" tabindex="-1"></a><span class="co"># DW</span></span>
<span id="cb32-20"><a href="Chapter4.html#cb32-20" tabindex="-1"></a>AprAug <span class="ot">&lt;-</span> <span class="fu">rast</span>(<span class="st">&quot;./DW_2023_apraug.tif&quot;</span>)</span>
<span id="cb32-21"><a href="Chapter4.html#cb32-21" tabindex="-1"></a>AprJul <span class="ot">&lt;-</span> <span class="fu">rast</span>(<span class="st">&quot;./DW_2023_aprjul.tif&quot;</span>)</span>
<span id="cb32-22"><a href="Chapter4.html#cb32-22" tabindex="-1"></a>AprJun <span class="ot">&lt;-</span> <span class="fu">rast</span>(<span class="st">&quot;./DW_2023_aprjun.tif&quot;</span>)</span>
<span id="cb32-23"><a href="Chapter4.html#cb32-23" tabindex="-1"></a>AprMay <span class="ot">&lt;-</span> <span class="fu">rast</span>(<span class="st">&quot;./DW_2023_aprmay.tif&quot;</span>)</span>
<span id="cb32-24"><a href="Chapter4.html#cb32-24" tabindex="-1"></a>JulAug <span class="ot">&lt;-</span> <span class="fu">rast</span>(<span class="st">&quot;./DW_2023_julaug.tif&quot;</span>)</span>
<span id="cb32-25"><a href="Chapter4.html#cb32-25" tabindex="-1"></a>JunAug <span class="ot">&lt;-</span> <span class="fu">rast</span>(<span class="st">&quot;./DW_2023_julaug.tif&quot;</span>)</span>
<span id="cb32-26"><a href="Chapter4.html#cb32-26" tabindex="-1"></a>JunJul <span class="ot">&lt;-</span> <span class="fu">rast</span>(<span class="st">&quot;./DW_2023_junjul.tif&quot;</span>)</span>
<span id="cb32-27"><a href="Chapter4.html#cb32-27" tabindex="-1"></a>MayAug <span class="ot">&lt;-</span> <span class="fu">rast</span>(<span class="st">&quot;./DW_2023_mayaug.tif&quot;</span>)</span>
<span id="cb32-28"><a href="Chapter4.html#cb32-28" tabindex="-1"></a>MayJul <span class="ot">&lt;-</span> <span class="fu">rast</span>(<span class="st">&quot;./DW_2023_mayjul.tif&quot;</span>)</span>
<span id="cb32-29"><a href="Chapter4.html#cb32-29" tabindex="-1"></a>MayJun <span class="ot">&lt;-</span> <span class="fu">rast</span>(<span class="st">&quot;./DW_2023_mayjun.tif&quot;</span>)</span>
<span id="cb32-30"><a href="Chapter4.html#cb32-30" tabindex="-1"></a></span>
<span id="cb32-31"><a href="Chapter4.html#cb32-31" tabindex="-1"></a><span class="co"># utility </span></span>
<span id="cb32-32"><a href="Chapter4.html#cb32-32" tabindex="-1"></a>darbiba <span class="ot">&lt;-</span> <span class="cf">function</span>(raster, vector, period) {</span>
<span id="cb32-33"><a href="Chapter4.html#cb32-33" tabindex="-1"></a>  <span class="fu">exact_extract</span>(raster, vector, <span class="cf">function</span>(value, coverage_fraction) {</span>
<span id="cb32-34"><a href="Chapter4.html#cb32-34" tabindex="-1"></a>    <span class="fu">data.frame</span>(<span class="at">value =</span> value,</span>
<span id="cb32-35"><a href="Chapter4.html#cb32-35" tabindex="-1"></a>               <span class="at">frac =</span> coverage_fraction <span class="sc">/</span> <span class="fu">sum</span>(coverage_fraction, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb32-36"><a href="Chapter4.html#cb32-36" tabindex="-1"></a>      <span class="fu">group_by</span>(value) <span class="sc">%&gt;%</span></span>
<span id="cb32-37"><a href="Chapter4.html#cb32-37" tabindex="-1"></a>      <span class="fu">summarize</span>(<span class="at">freq =</span> <span class="fu">sum</span>(frac, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="at">.groups =</span> <span class="st">&#39;drop&#39;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb32-38"><a href="Chapter4.html#cb32-38" tabindex="-1"></a>      <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> <span class="st">&#39;value&#39;</span>,</span>
<span id="cb32-39"><a href="Chapter4.html#cb32-39" tabindex="-1"></a>                  <span class="at">names_prefix =</span> <span class="st">&#39;freq_&#39;</span>,</span>
<span id="cb32-40"><a href="Chapter4.html#cb32-40" tabindex="-1"></a>                  <span class="at">values_from =</span> <span class="st">&#39;freq&#39;</span>)</span>
<span id="cb32-41"><a href="Chapter4.html#cb32-41" tabindex="-1"></a>  }) <span class="sc">%&gt;%</span></span>
<span id="cb32-42"><a href="Chapter4.html#cb32-42" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">starts_with</span>(<span class="st">&#39;freq&#39;</span>), <span class="sc">~</span><span class="fu">replace_na</span>(., <span class="dv">0</span>))) <span class="sc">%&gt;%</span></span>
<span id="cb32-43"><a href="Chapter4.html#cb32-43" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">periods =</span> period) </span>
<span id="cb32-44"><a href="Chapter4.html#cb32-44" tabindex="-1"></a>}</span>
<span id="cb32-45"><a href="Chapter4.html#cb32-45" tabindex="-1"></a></span>
<span id="cb32-46"><a href="Chapter4.html#cb32-46" tabindex="-1"></a></span>
<span id="cb32-47"><a href="Chapter4.html#cb32-47" tabindex="-1"></a><span class="co"># DW extraction </span></span>
<span id="cb32-48"><a href="Chapter4.html#cb32-48" tabindex="-1"></a>kodi<span class="ot">=</span><span class="fu">data.frame</span>(<span class="at">kods=</span><span class="fu">levels</span>(<span class="fu">factor</span>(abi<span class="sc">$</span>FNAME)))</span>
<span id="cb32-49"><a href="Chapter4.html#cb32-49" tabindex="-1"></a>dati<span class="ot">=</span>abi[<span class="dv">1</span>,]</span>
<span id="cb32-50"><a href="Chapter4.html#cb32-50" tabindex="-1"></a></span>
<span id="cb32-51"><a href="Chapter4.html#cb32-51" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(kodi<span class="sc">$</span>kods)){</span>
<span id="cb32-52"><a href="Chapter4.html#cb32-52" tabindex="-1"></a>  kods<span class="ot">=</span>kodi<span class="sc">$</span>kods[i]</span>
<span id="cb32-53"><a href="Chapter4.html#cb32-53" tabindex="-1"></a>  <span class="fu">set.seed</span>(<span class="dv">0</span>)</span>
<span id="cb32-54"><a href="Chapter4.html#cb32-54" tabindex="-1"></a>  vietas <span class="ot">&lt;-</span> abi <span class="sc">%&gt;%</span> <span class="fu">filter</span>(FNAME <span class="sc">==</span> kods)</span>
<span id="cb32-55"><a href="Chapter4.html#cb32-55" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">nrow</span>(vietas) <span class="sc">&lt;</span> <span class="dv">999</span>) {rand_locs <span class="ot">&lt;-</span> vietas} <span class="cf">else</span> {rand_locs <span class="ot">&lt;-</span> vietas <span class="sc">%&gt;%</span> <span class="fu">sample_n</span>(<span class="dv">999</span>)}</span>
<span id="cb32-56"><a href="Chapter4.html#cb32-56" tabindex="-1"></a>  rand_locs <span class="ot">&lt;-</span> rand_locs <span class="sc">%&gt;%</span>  <span class="fu">mutate</span>(<span class="at">id =</span> <span class="fu">row_number</span>())</span>
<span id="cb32-57"><a href="Chapter4.html#cb32-57" tabindex="-1"></a>  </span>
<span id="cb32-58"><a href="Chapter4.html#cb32-58" tabindex="-1"></a>  a<span class="ot">=</span><span class="fu">cbind</span>(rand_locs,<span class="fu">darbiba</span>(AprAug, rand_locs, <span class="st">&quot;AprAug&quot;</span>))</span>
<span id="cb32-59"><a href="Chapter4.html#cb32-59" tabindex="-1"></a>  b<span class="ot">=</span><span class="fu">cbind</span>(rand_locs,<span class="fu">darbiba</span>(AprJul, rand_locs, <span class="st">&quot;AprJul&quot;</span>))</span>
<span id="cb32-60"><a href="Chapter4.html#cb32-60" tabindex="-1"></a>  c<span class="ot">=</span><span class="fu">cbind</span>(rand_locs,<span class="fu">darbiba</span>(AprJun, rand_locs, <span class="st">&quot;AprJun&quot;</span>))</span>
<span id="cb32-61"><a href="Chapter4.html#cb32-61" tabindex="-1"></a>  d<span class="ot">=</span><span class="fu">cbind</span>(rand_locs,<span class="fu">darbiba</span>(AprMay, rand_locs, <span class="st">&quot;AprMay&quot;</span>))</span>
<span id="cb32-62"><a href="Chapter4.html#cb32-62" tabindex="-1"></a>  e<span class="ot">=</span><span class="fu">cbind</span>(rand_locs,<span class="fu">darbiba</span>(JulAug, rand_locs, <span class="st">&quot;JulAug&quot;</span>))</span>
<span id="cb32-63"><a href="Chapter4.html#cb32-63" tabindex="-1"></a>  f<span class="ot">=</span><span class="fu">cbind</span>(rand_locs,<span class="fu">darbiba</span>(JunAug, rand_locs, <span class="st">&quot;JunAug&quot;</span>))</span>
<span id="cb32-64"><a href="Chapter4.html#cb32-64" tabindex="-1"></a>  g<span class="ot">=</span><span class="fu">cbind</span>(rand_locs,<span class="fu">darbiba</span>(JunJul, rand_locs, <span class="st">&quot;JunJul&quot;</span>))</span>
<span id="cb32-65"><a href="Chapter4.html#cb32-65" tabindex="-1"></a>  h<span class="ot">=</span><span class="fu">cbind</span>(rand_locs,<span class="fu">darbiba</span>(MayAug, rand_locs, <span class="st">&quot;MayAug&quot;</span>))</span>
<span id="cb32-66"><a href="Chapter4.html#cb32-66" tabindex="-1"></a>  i<span class="ot">=</span><span class="fu">cbind</span>(rand_locs,<span class="fu">darbiba</span>(MayJul, rand_locs, <span class="st">&quot;MayJul&quot;</span>))</span>
<span id="cb32-67"><a href="Chapter4.html#cb32-67" tabindex="-1"></a>  j<span class="ot">=</span><span class="fu">cbind</span>(rand_locs,<span class="fu">darbiba</span>(MayJun, rand_locs, <span class="st">&quot;MayJun&quot;</span>))</span>
<span id="cb32-68"><a href="Chapter4.html#cb32-68" tabindex="-1"></a>  </span>
<span id="cb32-69"><a href="Chapter4.html#cb32-69" tabindex="-1"></a>  rez<span class="ot">=</span><span class="fu">bind_rows</span>(a,b,c,d,e,f,g,h,i,j)</span>
<span id="cb32-70"><a href="Chapter4.html#cb32-70" tabindex="-1"></a>  dati <span class="ot">&lt;-</span> <span class="fu">bind_rows</span>(dati, rez)</span>
<span id="cb32-71"><a href="Chapter4.html#cb32-71" tabindex="-1"></a>}</span>
<span id="cb32-72"><a href="Chapter4.html#cb32-72" tabindex="-1"></a></span>
<span id="cb32-73"><a href="Chapter4.html#cb32-73" tabindex="-1"></a>dati<span class="ot">=</span>dati <span class="sc">%&gt;%</span> </span>
<span id="cb32-74"><a href="Chapter4.html#cb32-74" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">water=</span>freq_0,</span>
<span id="cb32-75"><a href="Chapter4.html#cb32-75" tabindex="-1"></a>         <span class="at">trees=</span>freq_1,</span>
<span id="cb32-76"><a href="Chapter4.html#cb32-76" tabindex="-1"></a>         <span class="at">grass=</span>freq_2,</span>
<span id="cb32-77"><a href="Chapter4.html#cb32-77" tabindex="-1"></a>         <span class="at">flooded_vegetation=</span>freq_3,</span>
<span id="cb32-78"><a href="Chapter4.html#cb32-78" tabindex="-1"></a>         <span class="at">crops=</span>freq_4,</span>
<span id="cb32-79"><a href="Chapter4.html#cb32-79" tabindex="-1"></a>         <span class="at">shrub_and_scrub=</span>freq_5,</span>
<span id="cb32-80"><a href="Chapter4.html#cb32-80" tabindex="-1"></a>         <span class="at">built=</span>freq_6,</span>
<span id="cb32-81"><a href="Chapter4.html#cb32-81" tabindex="-1"></a>         <span class="at">bare=</span>freq_7,</span>
<span id="cb32-82"><a href="Chapter4.html#cb32-82" tabindex="-1"></a>         <span class="at">snow_and_ice=</span>freq_8)</span>
<span id="cb32-83"><a href="Chapter4.html#cb32-83" tabindex="-1"></a>dati_real<span class="ot">=</span>dati[<span class="sc">-</span><span class="dv">1</span>,]</span>
<span id="cb32-84"><a href="Chapter4.html#cb32-84" tabindex="-1"></a>dati_real[<span class="fu">is.na</span>(dati_real)]<span class="ot">=</span><span class="dv">0</span></span>
<span id="cb32-85"><a href="Chapter4.html#cb32-85" tabindex="-1"></a>dati_real<span class="sc">$</span>area<span class="ot">=</span><span class="fu">as.numeric</span>(<span class="fu">st_area</span>(dati_real))</span>
<span id="cb32-86"><a href="Chapter4.html#cb32-86" tabindex="-1"></a>dati_real<span class="sc">$</span>perimeter<span class="ot">=</span><span class="fu">as.numeric</span>(<span class="fu">st_perimeter</span>(dati_real))</span>
<span id="cb32-87"><a href="Chapter4.html#cb32-87" tabindex="-1"></a></span>
<span id="cb32-88"><a href="Chapter4.html#cb32-88" tabindex="-1"></a>sfarrow<span class="sc">::</span><span class="fu">st_write_parquet</span>(dati_real,<span class="st">&quot;./Q4_TopoAtvertie.parquet&quot;</span>)</span>
<span id="cb32-89"><a href="Chapter4.html#cb32-89" tabindex="-1"></a></span>
<span id="cb32-90"><a href="Chapter4.html#cb32-90" tabindex="-1"></a>dati<span class="ot">=</span>sfarrow<span class="sc">::</span><span class="fu">st_read_parquet</span>(<span class="st">&quot;./Q4_TopoAtvertie.parquet&quot;</span>)</span>
<span id="cb32-91"><a href="Chapter4.html#cb32-91" tabindex="-1"></a></span>
<span id="cb32-92"><a href="Chapter4.html#cb32-92" tabindex="-1"></a>dati<span class="ot">=</span>dati <span class="sc">%&gt;%</span> </span>
<span id="cb32-93"><a href="Chapter4.html#cb32-93" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">sezona=</span><span class="fu">factor</span>(periods,<span class="at">ordered=</span><span class="cn">TRUE</span>,</span>
<span id="cb32-94"><a href="Chapter4.html#cb32-94" tabindex="-1"></a>                       <span class="at">levels=</span><span class="fu">c</span>(<span class="st">&quot;AprMay&quot;</span>,<span class="st">&quot;AprJun&quot;</span>,<span class="st">&quot;AprJul&quot;</span>,<span class="st">&quot;AprAug&quot;</span>,<span class="st">&quot;MayJun&quot;</span>,</span>
<span id="cb32-95"><a href="Chapter4.html#cb32-95" tabindex="-1"></a>                                <span class="st">&quot;MayJul&quot;</span>,<span class="st">&quot;MayAug&quot;</span>,<span class="st">&quot;JunJul&quot;</span>,<span class="st">&quot;JunAug&quot;</span>,<span class="st">&quot;JulAug&quot;</span>)))</span>
<span id="cb32-96"><a href="Chapter4.html#cb32-96" tabindex="-1"></a></span>
<span id="cb32-97"><a href="Chapter4.html#cb32-97" tabindex="-1"></a>q41data<span class="ot">=</span><span class="fu">data.frame</span>(dati) <span class="sc">%&gt;%</span> </span>
<span id="cb32-98"><a href="Chapter4.html#cb32-98" tabindex="-1"></a>  <span class="fu">select</span>(FNAME,sezona,water<span class="sc">:</span>snow_and_ice) <span class="sc">%&gt;%</span> </span>
<span id="cb32-99"><a href="Chapter4.html#cb32-99" tabindex="-1"></a>  <span class="fu">group_by</span>(FNAME) <span class="sc">%&gt;%</span> </span>
<span id="cb32-100"><a href="Chapter4.html#cb32-100" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">skaits=</span><span class="fu">n</span>()<span class="sc">/</span><span class="dv">10</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb32-101"><a href="Chapter4.html#cb32-101" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb32-102"><a href="Chapter4.html#cb32-102" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols=</span>water<span class="sc">:</span>snow_and_ice,<span class="at">names_to =</span> <span class="st">&quot;klase&quot;</span>,<span class="at">values_to =</span> <span class="st">&quot;proporcija&quot;</span>)</span>
<span id="cb32-103"><a href="Chapter4.html#cb32-103" tabindex="-1"></a></span>
<span id="cb32-104"><a href="Chapter4.html#cb32-104" tabindex="-1"></a>q41_props<span class="ot">=</span><span class="fu">data.frame</span>(dati) <span class="sc">%&gt;%</span> </span>
<span id="cb32-105"><a href="Chapter4.html#cb32-105" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols=</span>water<span class="sc">:</span>snow_and_ice,<span class="at">names_to =</span> <span class="st">&quot;klase&quot;</span>,<span class="at">values_to =</span> <span class="st">&quot;proporcija&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb32-106"><a href="Chapter4.html#cb32-106" tabindex="-1"></a>  <span class="fu">filter</span>(klase <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;bare&quot;</span>,<span class="st">&quot;built&quot;</span>,<span class="st">&quot;crops&quot;</span>,<span class="st">&quot;grass&quot;</span>,<span class="st">&quot;shrub_and_scrub&quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb32-107"><a href="Chapter4.html#cb32-107" tabindex="-1"></a>  <span class="fu">group_by</span>(FNAME,sezona,klase) <span class="sc">%&gt;%</span> </span>
<span id="cb32-108"><a href="Chapter4.html#cb32-108" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">proporcija=</span><span class="fu">round</span>(<span class="fu">weighted.mean</span>(proporcija,area)<span class="sc">*</span><span class="dv">100</span>,<span class="dv">0</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb32-109"><a href="Chapter4.html#cb32-109" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span>
<span id="cb32-110"><a href="Chapter4.html#cb32-110" tabindex="-1"></a></span>
<span id="cb32-111"><a href="Chapter4.html#cb32-111" tabindex="-1"></a><span class="fu">ggplot</span>(q41data,<span class="fu">aes</span>(sezona,proporcija,<span class="at">col=</span>klase))<span class="sc">+</span></span>
<span id="cb32-112"><a href="Chapter4.html#cb32-112" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>FNAME,<span class="at">nrow=</span><span class="dv">2</span>)<span class="sc">+</span></span>
<span id="cb32-113"><a href="Chapter4.html#cb32-113" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">position=</span><span class="fu">position_dodge</span>(<span class="at">width=</span><span class="fl">0.75</span>),<span class="at">alpha=</span><span class="fl">0.2</span>)<span class="sc">+</span></span>
<span id="cb32-114"><a href="Chapter4.html#cb32-114" tabindex="-1"></a>  <span class="fu">theme_bw</span>()<span class="sc">+</span></span>
<span id="cb32-115"><a href="Chapter4.html#cb32-115" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="at">data=</span>q41_props[q41_props<span class="sc">$</span>klase<span class="sc">==</span><span class="st">&quot;bare&quot;</span>,],</span>
<span id="cb32-116"><a href="Chapter4.html#cb32-116" tabindex="-1"></a>            <span class="fu">aes</span>(sezona,<span class="at">y=</span><span class="fl">1.25</span>,<span class="at">label=</span>proporcija),<span class="at">size=</span><span class="dv">3</span>)<span class="sc">+</span></span>
<span id="cb32-117"><a href="Chapter4.html#cb32-117" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="at">data=</span>q41_props[q41_props<span class="sc">$</span>klase<span class="sc">==</span><span class="st">&quot;built&quot;</span>,],</span>
<span id="cb32-118"><a href="Chapter4.html#cb32-118" tabindex="-1"></a>            <span class="fu">aes</span>(sezona,<span class="at">y=</span><span class="fl">1.2</span>,<span class="at">label=</span>proporcija),<span class="at">size=</span><span class="dv">3</span>)<span class="sc">+</span></span>
<span id="cb32-119"><a href="Chapter4.html#cb32-119" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="at">data=</span>q41_props[q41_props<span class="sc">$</span>klase<span class="sc">==</span><span class="st">&quot;crops&quot;</span>,],</span>
<span id="cb32-120"><a href="Chapter4.html#cb32-120" tabindex="-1"></a>            <span class="fu">aes</span>(sezona,<span class="at">y=</span><span class="fl">1.15</span>,<span class="at">label=</span>proporcija),<span class="at">size=</span><span class="dv">3</span>)<span class="sc">+</span></span>
<span id="cb32-121"><a href="Chapter4.html#cb32-121" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="at">data=</span>q41_props[q41_props<span class="sc">$</span>klase<span class="sc">==</span><span class="st">&quot;grass&quot;</span>,],</span>
<span id="cb32-122"><a href="Chapter4.html#cb32-122" tabindex="-1"></a>            <span class="fu">aes</span>(sezona,<span class="at">y=</span><span class="fl">1.1</span>,<span class="at">label=</span>proporcija),<span class="at">size=</span><span class="dv">3</span>)<span class="sc">+</span></span>
<span id="cb32-123"><a href="Chapter4.html#cb32-123" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="at">data=</span>q41_props[q41_props<span class="sc">$</span>klase<span class="sc">==</span><span class="st">&quot;shrub_and_scrub&quot;</span>,],</span>
<span id="cb32-124"><a href="Chapter4.html#cb32-124" tabindex="-1"></a>            <span class="fu">aes</span>(sezona,<span class="at">y=</span><span class="fl">1.05</span>,<span class="at">label=</span>proporcija),<span class="at">size=</span><span class="dv">3</span>)<span class="sc">+</span></span>
<span id="cb32-125"><a href="Chapter4.html#cb32-125" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle=</span><span class="dv">90</span>,<span class="at">vjust=</span><span class="fl">0.5</span>),</span>
<span id="cb32-126"><a href="Chapter4.html#cb32-126" tabindex="-1"></a>        <span class="at">axis.title.y =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb32-127"><a href="Chapter4.html#cb32-127" tabindex="-1"></a>        <span class="at">legend.title =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb32-128"><a href="Chapter4.html#cb32-128" tabindex="-1"></a>        <span class="at">axis.title =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">14</span>),</span>
<span id="cb32-129"><a href="Chapter4.html#cb32-129" tabindex="-1"></a>        <span class="at">axis.text=</span><span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">12</span>),</span>
<span id="cb32-130"><a href="Chapter4.html#cb32-130" tabindex="-1"></a>        <span class="at">legend.text=</span><span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">12</span>),</span>
<span id="cb32-131"><a href="Chapter4.html#cb32-131" tabindex="-1"></a>        <span class="at">strip.text =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">11</span>))<span class="sc">+</span></span>
<span id="cb32-132"><a href="Chapter4.html#cb32-132" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels=</span>scales<span class="sc">::</span><span class="fu">label_percent</span>(),<span class="at">breaks=</span><span class="fu">seq</span>(<span class="dv">0</span>,<span class="dv">1</span>,<span class="at">by=</span>.<span class="dv">1</span>))<span class="sc">+</span></span>
<span id="cb32-133"><a href="Chapter4.html#cb32-133" tabindex="-1"></a>  <span class="fu">scale_color_viridis_d</span>()<span class="sc">+</span></span>
<span id="cb32-134"><a href="Chapter4.html#cb32-134" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x=</span><span class="st">&quot;Sezona&quot;</span>)</span>
<span id="cb32-135"><a href="Chapter4.html#cb32-135" tabindex="-1"></a></span>
<span id="cb32-136"><a href="Chapter4.html#cb32-136" tabindex="-1"></a><span class="fu">ggview</span>(<span class="at">width=</span><span class="dv">300</span>,<span class="at">height=</span><span class="dv">200</span>,<span class="at">units=</span><span class="st">&quot;mm&quot;</span>,<span class="at">dpi=</span><span class="dv">600</span>,<span class="at">device=</span><span class="st">&quot;png&quot;</span>)</span>
<span id="cb32-137"><a href="Chapter4.html#cb32-137" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="at">filename=</span><span class="st">&quot;./pic_q41.png&quot;</span>,<span class="at">width=</span><span class="dv">300</span>,<span class="at">height=</span><span class="dv">200</span>,<span class="at">units=</span><span class="st">&quot;mm&quot;</span>,<span class="at">dpi=</span><span class="dv">600</span>)</span></code></pre></div>
</div>
<div id="q5-izcirtuma-izmērs-un-forma" class="section level2 hasAnchor" number="5.6">
<h2><span class="header-section-number">5.6</span> Q5: Izcirtuma izmērs un forma<a href="Chapter4.html#q5-izcirtuma-izmērs-un-forma" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Šo aplūkojām divās daļās:</p>
<ul>
<li><p>nesen veidoti izcirtumi, papētot dažādus ciršanas veidus;</p></li>
<li><p>senāki izcirtumi, bet tikai kailcirtes, lai labāk saprastu pārmaiņas.</p></li>
</ul>
<p>Visos gadījumos salīdzinājumi pret 2023. gada DW slāņiem.</p>
<div id="q5.1-2022.-gada-izcirtumi" class="section level3 hasAnchor" number="5.6.1">
<h3><span class="header-section-number">5.6.1</span> Q5.1: 2022. gada izcirtumi<a href="Chapter4.html#q5.1-2022.-gada-izcirtumi" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Tā kā mums ir 2024.gada janvāra MVR, bet 2023. gadā reģistrēta pēdējā ciršana var būt jebkad 2023. gadā notikusi, par kritēriju izmantoju pēdējo ciršanu (<code>p_cirg</code>) 2022. gadā. Šāda atlase rada visai lielu burzmu ar dažādiem pēdējās ciršanas paņēmieniem (<code>p_cirp</code>), tādēļ atlasi papildinu arī ar kritēriju, ka pēdējais ciršanas paņēmiens ir:</p>
<ul>
<li><p>kailcirte (p_cirp==“11”; n=28878);</p></li>
<li><p>kailcirte pēc caurmēra (p_cirp==“17”; n=5051);</p></li>
<li><p>cirte pēc VMD sanitārā atzinuma (p_cirp==“31”; n=2741);</p></li>
<li><p>atmežošanas cirte (p_cirp==“81”; n=304).</p></li>
</ul>
<p>Meža nogabalos, kuriem zemes kategorija ir izcirtums, biežāk reģistrētā klase ir “trees” (<a href="Chapter4.html#fig:DWq51">5.24</a> att.).</p>
<div class="figure"><span style="display:block;" id="fig:DWq51"></span>
<img src="Atteli/ch004_q51.png" alt="2023. gada DW klases dažādos 2022. gada izcirtumos." width="100%" />
<p class="caption">
Figure 5.24: 2023. gada DW klases dažādos 2022. gada izcirtumos.
</p>
</div>
<p>Līdzīgi kā iepriekš, šīs klases uzpūstās vērtības ir saistītas ar blakus esošajiem nogabaliem (uz ko norāda pozitīvā perimetra-laukuma attiecība), saglabāto koku efektiem un paša nogabala izmēru (<a href="Chapter4.html#fig:DWq51b">5.25</a> att.).</p>
<div class="figure"><span style="display:block;" id="fig:DWq51b"></span>
<img src="Atteli/ch004_q51b.png" alt="Ar platību svērtā 2023. gada DW klases &quot;koki&quot; sastapšanas varbūtība dažādos 2022. gada izcirtumos, atkarībā no to perimetra-laukuma attiecības." width="100%" />
<p class="caption">
Figure 5.25: Ar platību svērtā 2023. gada DW klases “koki” sastapšanas varbūtība dažādos 2022. gada izcirtumos, atkarībā no to perimetra-laukuma attiecības.
</p>
</div>
<p>Zemāk esošais attēls (<a href="Chapter4.html#fig:DWq51c">5.26</a> att.) demonstrē precīzāku klasifikāciju lielākiem nogabaliem.</p>
<div class="figure"><span style="display:block;" id="fig:DWq51c"></span>
<img src="Atteli/ch004_q51c.png" alt="Ar platību svērtā 2023. gada DW klases &quot;koki&quot; sastapšanas varbūtība dažādos 2022. gada izcirtumos, atkarībā no to platības." width="100%" />
<p class="caption">
Figure 5.26: Ar platību svērtā 2023. gada DW klases “koki” sastapšanas varbūtība dažādos 2022. gada izcirtumos, atkarībā no to platības.
</p>
</div>
<p><br></p>
<p>Komandu rindas attēlu sagatavošanas un veiktās analīzes reproducēšanai (tiek izmantoti <a href="Chapter3.html#Chapter3.1.1">Meža Valsts reģistrs</a> dati):</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="Chapter4.html#cb33-1" tabindex="-1"></a><span class="co"># libs</span></span>
<span id="cb33-2"><a href="Chapter4.html#cb33-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb33-3"><a href="Chapter4.html#cb33-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb33-4"><a href="Chapter4.html#cb33-4" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(arrow)) {<span class="fu">install.packages</span>(<span class="st">&quot;arrow&quot;</span>); <span class="fu">require</span>(arrow)}</span>
<span id="cb33-5"><a href="Chapter4.html#cb33-5" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(sf)) {<span class="fu">install.packages</span>(<span class="st">&quot;sf&quot;</span>); <span class="fu">require</span>(sf)}</span>
<span id="cb33-6"><a href="Chapter4.html#cb33-6" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(sfarrow)) {<span class="fu">install.packages</span>(<span class="st">&quot;sfarrow&quot;</span>); <span class="fu">require</span>(sfarrow)}</span>
<span id="cb33-7"><a href="Chapter4.html#cb33-7" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(exactextractr)) {<span class="fu">install.packages</span>(<span class="st">&quot;exactextractr&quot;</span>); <span class="fu">require</span>(exactextractr)}</span>
<span id="cb33-8"><a href="Chapter4.html#cb33-8" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(ggview)) {<span class="fu">install.packages</span>(<span class="st">&quot;ggview&quot;</span>); <span class="fu">require</span>(ggview)}</span>
<span id="cb33-9"><a href="Chapter4.html#cb33-9" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb33-10"><a href="Chapter4.html#cb33-10" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(ggrepel)) {<span class="fu">install.packages</span>(<span class="st">&quot;ggrepel&quot;</span>); <span class="fu">require</span>(ggrepel)}</span>
<span id="cb33-11"><a href="Chapter4.html#cb33-11" tabindex="-1"></a></span>
<span id="cb33-12"><a href="Chapter4.html#cb33-12" tabindex="-1"></a><span class="co"># meža dati</span></span>
<span id="cb33-13"><a href="Chapter4.html#cb33-13" tabindex="-1"></a>MVR <span class="ot">&lt;-</span> <span class="fu">st_read_parquet</span>(<span class="st">&quot;./IevadesDati/MVR/nogabali_2024janv.parquet&quot;</span>)</span>
<span id="cb33-14"><a href="Chapter4.html#cb33-14" tabindex="-1"></a>mvr<span class="ot">=</span>MVR <span class="sc">%&gt;%</span> </span>
<span id="cb33-15"><a href="Chapter4.html#cb33-15" tabindex="-1"></a>  <span class="fu">filter</span>(zkat<span class="sc">==</span><span class="st">&quot;14&quot;</span><span class="sc">&amp;</span>(p_cirp<span class="sc">==</span><span class="st">&quot;11&quot;</span><span class="sc">|</span>p_cirp<span class="sc">==</span><span class="st">&quot;17&quot;</span><span class="sc">|</span>p_cirp<span class="sc">==</span><span class="st">&quot;31&quot;</span><span class="sc">|</span>p_cirp<span class="sc">==</span><span class="st">&quot;81&quot;</span>)<span class="sc">&amp;</span>p_cirg<span class="sc">==</span><span class="dv">2021</span>)</span>
<span id="cb33-16"><a href="Chapter4.html#cb33-16" tabindex="-1"></a></span>
<span id="cb33-17"><a href="Chapter4.html#cb33-17" tabindex="-1"></a></span>
<span id="cb33-18"><a href="Chapter4.html#cb33-18" tabindex="-1"></a><span class="co"># DW</span></span>
<span id="cb33-19"><a href="Chapter4.html#cb33-19" tabindex="-1"></a>AprAug <span class="ot">&lt;-</span> <span class="fu">rast</span>(<span class="st">&quot;./DW_2023_apraug.tif&quot;</span>)</span>
<span id="cb33-20"><a href="Chapter4.html#cb33-20" tabindex="-1"></a>AprJul <span class="ot">&lt;-</span> <span class="fu">rast</span>(<span class="st">&quot;./DW_2023_aprjul.tif&quot;</span>)</span>
<span id="cb33-21"><a href="Chapter4.html#cb33-21" tabindex="-1"></a>AprJun <span class="ot">&lt;-</span> <span class="fu">rast</span>(<span class="st">&quot;./DW_2023_aprjun.tif&quot;</span>)</span>
<span id="cb33-22"><a href="Chapter4.html#cb33-22" tabindex="-1"></a>AprMay <span class="ot">&lt;-</span> <span class="fu">rast</span>(<span class="st">&quot;./DW_2023_aprmay.tif&quot;</span>)</span>
<span id="cb33-23"><a href="Chapter4.html#cb33-23" tabindex="-1"></a>JulAug <span class="ot">&lt;-</span> <span class="fu">rast</span>(<span class="st">&quot;./DW_2023_julaug.tif&quot;</span>)</span>
<span id="cb33-24"><a href="Chapter4.html#cb33-24" tabindex="-1"></a>JunAug <span class="ot">&lt;-</span> <span class="fu">rast</span>(<span class="st">&quot;./DW_2023_julaug.tif&quot;</span>)</span>
<span id="cb33-25"><a href="Chapter4.html#cb33-25" tabindex="-1"></a>JunJul <span class="ot">&lt;-</span> <span class="fu">rast</span>(<span class="st">&quot;./DW_2023_junjul.tif&quot;</span>)</span>
<span id="cb33-26"><a href="Chapter4.html#cb33-26" tabindex="-1"></a>MayAug <span class="ot">&lt;-</span> <span class="fu">rast</span>(<span class="st">&quot;./DW_2023_mayaug.tif&quot;</span>)</span>
<span id="cb33-27"><a href="Chapter4.html#cb33-27" tabindex="-1"></a>MayJul <span class="ot">&lt;-</span> <span class="fu">rast</span>(<span class="st">&quot;./DW_2023_mayjul.tif&quot;</span>)</span>
<span id="cb33-28"><a href="Chapter4.html#cb33-28" tabindex="-1"></a>MayJun <span class="ot">&lt;-</span> <span class="fu">rast</span>(<span class="st">&quot;./DW_2023_mayjun.tif&quot;</span>)</span>
<span id="cb33-29"><a href="Chapter4.html#cb33-29" tabindex="-1"></a></span>
<span id="cb33-30"><a href="Chapter4.html#cb33-30" tabindex="-1"></a><span class="co"># utility </span></span>
<span id="cb33-31"><a href="Chapter4.html#cb33-31" tabindex="-1"></a>darbiba <span class="ot">&lt;-</span> <span class="cf">function</span>(raster, vector, period) {</span>
<span id="cb33-32"><a href="Chapter4.html#cb33-32" tabindex="-1"></a>  <span class="fu">exact_extract</span>(raster, vector, <span class="cf">function</span>(value, coverage_fraction) {</span>
<span id="cb33-33"><a href="Chapter4.html#cb33-33" tabindex="-1"></a>    <span class="fu">data.frame</span>(<span class="at">value =</span> value,</span>
<span id="cb33-34"><a href="Chapter4.html#cb33-34" tabindex="-1"></a>               <span class="at">frac =</span> coverage_fraction <span class="sc">/</span> <span class="fu">sum</span>(coverage_fraction, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb33-35"><a href="Chapter4.html#cb33-35" tabindex="-1"></a>      <span class="fu">group_by</span>(value) <span class="sc">%&gt;%</span></span>
<span id="cb33-36"><a href="Chapter4.html#cb33-36" tabindex="-1"></a>      <span class="fu">summarize</span>(<span class="at">freq =</span> <span class="fu">sum</span>(frac, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="at">.groups =</span> <span class="st">&#39;drop&#39;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb33-37"><a href="Chapter4.html#cb33-37" tabindex="-1"></a>      <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> <span class="st">&#39;value&#39;</span>,</span>
<span id="cb33-38"><a href="Chapter4.html#cb33-38" tabindex="-1"></a>                  <span class="at">names_prefix =</span> <span class="st">&#39;freq_&#39;</span>,</span>
<span id="cb33-39"><a href="Chapter4.html#cb33-39" tabindex="-1"></a>                  <span class="at">values_from =</span> <span class="st">&#39;freq&#39;</span>)</span>
<span id="cb33-40"><a href="Chapter4.html#cb33-40" tabindex="-1"></a>  }) <span class="sc">%&gt;%</span></span>
<span id="cb33-41"><a href="Chapter4.html#cb33-41" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">starts_with</span>(<span class="st">&#39;freq&#39;</span>), <span class="sc">~</span><span class="fu">replace_na</span>(., <span class="dv">0</span>))) <span class="sc">%&gt;%</span></span>
<span id="cb33-42"><a href="Chapter4.html#cb33-42" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">periods =</span> period) </span>
<span id="cb33-43"><a href="Chapter4.html#cb33-43" tabindex="-1"></a>}</span>
<span id="cb33-44"><a href="Chapter4.html#cb33-44" tabindex="-1"></a></span>
<span id="cb33-45"><a href="Chapter4.html#cb33-45" tabindex="-1"></a></span>
<span id="cb33-46"><a href="Chapter4.html#cb33-46" tabindex="-1"></a><span class="co"># DW extraction </span></span>
<span id="cb33-47"><a href="Chapter4.html#cb33-47" tabindex="-1"></a>kodi<span class="ot">=</span><span class="fu">data.frame</span>(<span class="at">kods=</span><span class="fu">levels</span>(<span class="fu">factor</span>(mvr<span class="sc">$</span>p_cirp)))</span>
<span id="cb33-48"><a href="Chapter4.html#cb33-48" tabindex="-1"></a></span>
<span id="cb33-49"><a href="Chapter4.html#cb33-49" tabindex="-1"></a>dati<span class="ot">=</span>mvr[<span class="dv">1</span>,]</span>
<span id="cb33-50"><a href="Chapter4.html#cb33-50" tabindex="-1"></a></span>
<span id="cb33-51"><a href="Chapter4.html#cb33-51" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(kodi<span class="sc">$</span>kods)){</span>
<span id="cb33-52"><a href="Chapter4.html#cb33-52" tabindex="-1"></a>  kods<span class="ot">=</span>kodi<span class="sc">$</span>kods[i]</span>
<span id="cb33-53"><a href="Chapter4.html#cb33-53" tabindex="-1"></a>  <span class="fu">print</span>(kods)</span>
<span id="cb33-54"><a href="Chapter4.html#cb33-54" tabindex="-1"></a>  </span>
<span id="cb33-55"><a href="Chapter4.html#cb33-55" tabindex="-1"></a>  <span class="fu">set.seed</span>(<span class="dv">0</span>)</span>
<span id="cb33-56"><a href="Chapter4.html#cb33-56" tabindex="-1"></a>  vietas <span class="ot">&lt;-</span> mvr <span class="sc">%&gt;%</span> <span class="fu">filter</span>(p_cirp <span class="sc">==</span> kods)</span>
<span id="cb33-57"><a href="Chapter4.html#cb33-57" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">nrow</span>(vietas) <span class="sc">&lt;</span> <span class="dv">999</span>) {rand_locs <span class="ot">&lt;-</span> vietas} <span class="cf">else</span> {rand_locs <span class="ot">&lt;-</span> vietas <span class="sc">%&gt;%</span> <span class="fu">sample_n</span>(<span class="dv">999</span>)}</span>
<span id="cb33-58"><a href="Chapter4.html#cb33-58" tabindex="-1"></a>  </span>
<span id="cb33-59"><a href="Chapter4.html#cb33-59" tabindex="-1"></a>  rand_locs <span class="ot">&lt;-</span> rand_locs <span class="sc">%&gt;%</span>  <span class="fu">mutate</span>(<span class="at">id =</span> <span class="fu">row_number</span>())</span>
<span id="cb33-60"><a href="Chapter4.html#cb33-60" tabindex="-1"></a>  </span>
<span id="cb33-61"><a href="Chapter4.html#cb33-61" tabindex="-1"></a>  a<span class="ot">=</span><span class="fu">cbind</span>(rand_locs,<span class="fu">darbiba</span>(AprAug, rand_locs, <span class="st">&quot;AprAug&quot;</span>))</span>
<span id="cb33-62"><a href="Chapter4.html#cb33-62" tabindex="-1"></a>  b<span class="ot">=</span><span class="fu">cbind</span>(rand_locs,<span class="fu">darbiba</span>(AprJul, rand_locs, <span class="st">&quot;AprJul&quot;</span>))</span>
<span id="cb33-63"><a href="Chapter4.html#cb33-63" tabindex="-1"></a>  c<span class="ot">=</span><span class="fu">cbind</span>(rand_locs,<span class="fu">darbiba</span>(AprJun, rand_locs, <span class="st">&quot;AprJun&quot;</span>))</span>
<span id="cb33-64"><a href="Chapter4.html#cb33-64" tabindex="-1"></a>  d<span class="ot">=</span><span class="fu">cbind</span>(rand_locs,<span class="fu">darbiba</span>(AprMay, rand_locs, <span class="st">&quot;AprMay&quot;</span>))</span>
<span id="cb33-65"><a href="Chapter4.html#cb33-65" tabindex="-1"></a>  e<span class="ot">=</span><span class="fu">cbind</span>(rand_locs,<span class="fu">darbiba</span>(JulAug, rand_locs, <span class="st">&quot;JulAug&quot;</span>))</span>
<span id="cb33-66"><a href="Chapter4.html#cb33-66" tabindex="-1"></a>  f<span class="ot">=</span><span class="fu">cbind</span>(rand_locs,<span class="fu">darbiba</span>(JunAug, rand_locs, <span class="st">&quot;JunAug&quot;</span>))</span>
<span id="cb33-67"><a href="Chapter4.html#cb33-67" tabindex="-1"></a>  g<span class="ot">=</span><span class="fu">cbind</span>(rand_locs,<span class="fu">darbiba</span>(JunJul, rand_locs, <span class="st">&quot;JunJul&quot;</span>))</span>
<span id="cb33-68"><a href="Chapter4.html#cb33-68" tabindex="-1"></a>  h<span class="ot">=</span><span class="fu">cbind</span>(rand_locs,<span class="fu">darbiba</span>(MayAug, rand_locs, <span class="st">&quot;MayAug&quot;</span>))</span>
<span id="cb33-69"><a href="Chapter4.html#cb33-69" tabindex="-1"></a>  i<span class="ot">=</span><span class="fu">cbind</span>(rand_locs,<span class="fu">darbiba</span>(MayJul, rand_locs, <span class="st">&quot;MayJul&quot;</span>))</span>
<span id="cb33-70"><a href="Chapter4.html#cb33-70" tabindex="-1"></a>  j<span class="ot">=</span><span class="fu">cbind</span>(rand_locs,<span class="fu">darbiba</span>(MayJun, rand_locs, <span class="st">&quot;MayJun&quot;</span>))</span>
<span id="cb33-71"><a href="Chapter4.html#cb33-71" tabindex="-1"></a>  </span>
<span id="cb33-72"><a href="Chapter4.html#cb33-72" tabindex="-1"></a>  </span>
<span id="cb33-73"><a href="Chapter4.html#cb33-73" tabindex="-1"></a>  rez<span class="ot">=</span><span class="fu">bind_rows</span>(a,b,c,d,e,f,g,h,i,j)</span>
<span id="cb33-74"><a href="Chapter4.html#cb33-74" tabindex="-1"></a>  dati <span class="ot">&lt;-</span> <span class="fu">bind_rows</span>(dati, rez)</span>
<span id="cb33-75"><a href="Chapter4.html#cb33-75" tabindex="-1"></a>}</span>
<span id="cb33-76"><a href="Chapter4.html#cb33-76" tabindex="-1"></a></span>
<span id="cb33-77"><a href="Chapter4.html#cb33-77" tabindex="-1"></a>dati<span class="ot">=</span>dati <span class="sc">%&gt;%</span> </span>
<span id="cb33-78"><a href="Chapter4.html#cb33-78" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">water=</span>freq_0,</span>
<span id="cb33-79"><a href="Chapter4.html#cb33-79" tabindex="-1"></a>         <span class="at">trees=</span>freq_1,</span>
<span id="cb33-80"><a href="Chapter4.html#cb33-80" tabindex="-1"></a>         <span class="at">grass=</span>freq_2,</span>
<span id="cb33-81"><a href="Chapter4.html#cb33-81" tabindex="-1"></a>         <span class="at">flooded_vegetation=</span>freq_3,</span>
<span id="cb33-82"><a href="Chapter4.html#cb33-82" tabindex="-1"></a>         <span class="at">crops=</span>freq_4,</span>
<span id="cb33-83"><a href="Chapter4.html#cb33-83" tabindex="-1"></a>         <span class="at">shrub_and_scrub=</span>freq_5,</span>
<span id="cb33-84"><a href="Chapter4.html#cb33-84" tabindex="-1"></a>         <span class="at">built=</span>freq_6,</span>
<span id="cb33-85"><a href="Chapter4.html#cb33-85" tabindex="-1"></a>         <span class="at">bare=</span>freq_7,</span>
<span id="cb33-86"><a href="Chapter4.html#cb33-86" tabindex="-1"></a>         <span class="at">snow_and_ice=</span>freq_8)</span>
<span id="cb33-87"><a href="Chapter4.html#cb33-87" tabindex="-1"></a>dati_real<span class="ot">=</span>dati[<span class="sc">-</span><span class="dv">1</span>,]</span>
<span id="cb33-88"><a href="Chapter4.html#cb33-88" tabindex="-1"></a></span>
<span id="cb33-89"><a href="Chapter4.html#cb33-89" tabindex="-1"></a>dati_real[<span class="fu">is.na</span>(dati_real)]<span class="ot">=</span><span class="dv">0</span></span>
<span id="cb33-90"><a href="Chapter4.html#cb33-90" tabindex="-1"></a>dati_real<span class="sc">$</span>area<span class="ot">=</span><span class="fu">as.numeric</span>(<span class="fu">st_area</span>(dati_real))</span>
<span id="cb33-91"><a href="Chapter4.html#cb33-91" tabindex="-1"></a>dati_real<span class="sc">$</span>perimeter<span class="ot">=</span><span class="fu">as.numeric</span>(<span class="fu">st_perimeter</span>(dati_real))</span>
<span id="cb33-92"><a href="Chapter4.html#cb33-92" tabindex="-1"></a></span>
<span id="cb33-93"><a href="Chapter4.html#cb33-93" tabindex="-1"></a>sfarrow<span class="sc">::</span><span class="fu">st_write_parquet</span>(dati_real,<span class="st">&quot;./Q51_Izcirtumi.parquet&quot;</span>)</span>
<span id="cb33-94"><a href="Chapter4.html#cb33-94" tabindex="-1"></a></span>
<span id="cb33-95"><a href="Chapter4.html#cb33-95" tabindex="-1"></a>dati<span class="ot">=</span>sfarrow<span class="sc">::</span><span class="fu">st_read_parquet</span>(<span class="st">&quot;./Q51_Izcirtumi.parquet&quot;</span>)</span>
<span id="cb33-96"><a href="Chapter4.html#cb33-96" tabindex="-1"></a></span>
<span id="cb33-97"><a href="Chapter4.html#cb33-97" tabindex="-1"></a>dati<span class="ot">=</span>dati <span class="sc">%&gt;%</span> </span>
<span id="cb33-98"><a href="Chapter4.html#cb33-98" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">sezona=</span><span class="fu">factor</span>(periods,<span class="at">ordered=</span><span class="cn">TRUE</span>,</span>
<span id="cb33-99"><a href="Chapter4.html#cb33-99" tabindex="-1"></a>                       <span class="at">levels=</span><span class="fu">c</span>(<span class="st">&quot;AprMay&quot;</span>,<span class="st">&quot;AprJun&quot;</span>,<span class="st">&quot;AprJul&quot;</span>,<span class="st">&quot;AprAug&quot;</span>,<span class="st">&quot;MayJun&quot;</span>,</span>
<span id="cb33-100"><a href="Chapter4.html#cb33-100" tabindex="-1"></a>                                <span class="st">&quot;MayJul&quot;</span>,<span class="st">&quot;MayAug&quot;</span>,<span class="st">&quot;JunJul&quot;</span>,<span class="st">&quot;JunAug&quot;</span>,<span class="st">&quot;JulAug&quot;</span>))) <span class="sc">%&gt;%</span> </span>
<span id="cb33-101"><a href="Chapter4.html#cb33-101" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">veids=</span><span class="fu">if_else</span>(p_cirp<span class="sc">==</span><span class="st">&quot;11&quot;</span>,<span class="st">&quot;kailcirte&quot;</span>,</span>
<span id="cb33-102"><a href="Chapter4.html#cb33-102" tabindex="-1"></a>                       <span class="fu">if_else</span>(p_cirp<span class="sc">==</span><span class="st">&quot;17&quot;</span>,<span class="st">&quot;kailcirte pēc caurmēra&quot;</span>,</span>
<span id="cb33-103"><a href="Chapter4.html#cb33-103" tabindex="-1"></a>                               <span class="fu">if_else</span>(p_cirp<span class="sc">==</span><span class="st">&quot;31&quot;</span>,<span class="st">&quot;cirte pēc</span><span class="sc">\n</span><span class="st">VMD sanitārā atzinuma&quot;</span>,</span>
<span id="cb33-104"><a href="Chapter4.html#cb33-104" tabindex="-1"></a>                                       <span class="fu">if_else</span>(p_cirp<span class="sc">==</span><span class="st">&quot;81&quot;</span>,<span class="st">&quot;atmežošanas cirte&quot;</span>,<span class="st">&quot;draza&quot;</span>)))))</span>
<span id="cb33-105"><a href="Chapter4.html#cb33-105" tabindex="-1"></a>q51data<span class="ot">=</span><span class="fu">data.frame</span>(dati) <span class="sc">%&gt;%</span> </span>
<span id="cb33-106"><a href="Chapter4.html#cb33-106" tabindex="-1"></a>  <span class="fu">select</span>(veids,sezona,water<span class="sc">:</span>snow_and_ice) <span class="sc">%&gt;%</span> </span>
<span id="cb33-107"><a href="Chapter4.html#cb33-107" tabindex="-1"></a>  <span class="fu">group_by</span>(veids) <span class="sc">%&gt;%</span> </span>
<span id="cb33-108"><a href="Chapter4.html#cb33-108" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">skaits=</span><span class="fu">n</span>()<span class="sc">/</span><span class="dv">10</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb33-109"><a href="Chapter4.html#cb33-109" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb33-110"><a href="Chapter4.html#cb33-110" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols=</span>water<span class="sc">:</span>snow_and_ice,<span class="at">names_to =</span> <span class="st">&quot;klase&quot;</span>,</span>
<span id="cb33-111"><a href="Chapter4.html#cb33-111" tabindex="-1"></a>               <span class="at">values_to =</span> <span class="st">&quot;proporcija&quot;</span>)</span>
<span id="cb33-112"><a href="Chapter4.html#cb33-112" tabindex="-1"></a></span>
<span id="cb33-113"><a href="Chapter4.html#cb33-113" tabindex="-1"></a>q51_props<span class="ot">=</span><span class="fu">data.frame</span>(dati) <span class="sc">%&gt;%</span> </span>
<span id="cb33-114"><a href="Chapter4.html#cb33-114" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols=</span>water<span class="sc">:</span>snow_and_ice,<span class="at">names_to =</span> <span class="st">&quot;klase&quot;</span>,</span>
<span id="cb33-115"><a href="Chapter4.html#cb33-115" tabindex="-1"></a>               <span class="at">values_to =</span> <span class="st">&quot;proporcija&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb33-116"><a href="Chapter4.html#cb33-116" tabindex="-1"></a>  <span class="fu">filter</span>(klase <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;crops&quot;</span>,<span class="st">&quot;grass&quot;</span>,<span class="st">&quot;shrub_and_scrub&quot;</span>,<span class="st">&quot;trees&quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb33-117"><a href="Chapter4.html#cb33-117" tabindex="-1"></a>  <span class="fu">group_by</span>(veids,sezona,klase) <span class="sc">%&gt;%</span> </span>
<span id="cb33-118"><a href="Chapter4.html#cb33-118" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">proporcija=</span><span class="fu">round</span>(<span class="fu">weighted.mean</span>(proporcija,area)<span class="sc">*</span><span class="dv">100</span>,<span class="dv">0</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb33-119"><a href="Chapter4.html#cb33-119" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span>
<span id="cb33-120"><a href="Chapter4.html#cb33-120" tabindex="-1"></a></span>
<span id="cb33-121"><a href="Chapter4.html#cb33-121" tabindex="-1"></a><span class="fu">ggplot</span>(q51data,<span class="fu">aes</span>(sezona,proporcija,<span class="at">col=</span>klase))<span class="sc">+</span></span>
<span id="cb33-122"><a href="Chapter4.html#cb33-122" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>veids,<span class="at">nrow=</span><span class="dv">2</span>)<span class="sc">+</span></span>
<span id="cb33-123"><a href="Chapter4.html#cb33-123" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">position=</span><span class="fu">position_dodge</span>(<span class="at">width=</span><span class="fl">0.75</span>),<span class="at">alpha=</span><span class="fl">0.2</span>)<span class="sc">+</span></span>
<span id="cb33-124"><a href="Chapter4.html#cb33-124" tabindex="-1"></a>  <span class="fu">theme_bw</span>()<span class="sc">+</span></span>
<span id="cb33-125"><a href="Chapter4.html#cb33-125" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="at">data=</span>q51_props[q51_props<span class="sc">$</span>klase<span class="sc">==</span><span class="st">&quot;crops&quot;</span>,],</span>
<span id="cb33-126"><a href="Chapter4.html#cb33-126" tabindex="-1"></a>            <span class="fu">aes</span>(sezona,<span class="at">y=</span><span class="fl">1.2</span>,<span class="at">label=</span>proporcija),<span class="at">size=</span><span class="dv">3</span>)<span class="sc">+</span></span>
<span id="cb33-127"><a href="Chapter4.html#cb33-127" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="at">data=</span>q51_props[q51_props<span class="sc">$</span>klase<span class="sc">==</span><span class="st">&quot;grass&quot;</span>,],</span>
<span id="cb33-128"><a href="Chapter4.html#cb33-128" tabindex="-1"></a>            <span class="fu">aes</span>(sezona,<span class="at">y=</span><span class="fl">1.15</span>,<span class="at">label=</span>proporcija),<span class="at">size=</span><span class="dv">3</span>)<span class="sc">+</span></span>
<span id="cb33-129"><a href="Chapter4.html#cb33-129" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="at">data=</span>q51_props[q51_props<span class="sc">$</span>klase<span class="sc">==</span><span class="st">&quot;shrub_and_scrub&quot;</span>,],</span>
<span id="cb33-130"><a href="Chapter4.html#cb33-130" tabindex="-1"></a>            <span class="fu">aes</span>(sezona,<span class="at">y=</span><span class="fl">1.1</span>,<span class="at">label=</span>proporcija),<span class="at">size=</span><span class="dv">3</span>)<span class="sc">+</span></span>
<span id="cb33-131"><a href="Chapter4.html#cb33-131" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="at">data=</span>q51_props[q51_props<span class="sc">$</span>klase<span class="sc">==</span><span class="st">&quot;trees&quot;</span>,],</span>
<span id="cb33-132"><a href="Chapter4.html#cb33-132" tabindex="-1"></a>            <span class="fu">aes</span>(sezona,<span class="at">y=</span><span class="fl">1.05</span>,<span class="at">label=</span>proporcija),<span class="at">size=</span><span class="dv">3</span>)<span class="sc">+</span></span>
<span id="cb33-133"><a href="Chapter4.html#cb33-133" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle=</span><span class="dv">90</span>,<span class="at">vjust=</span><span class="fl">0.5</span>),</span>
<span id="cb33-134"><a href="Chapter4.html#cb33-134" tabindex="-1"></a>        <span class="at">axis.title.y =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb33-135"><a href="Chapter4.html#cb33-135" tabindex="-1"></a>        <span class="at">legend.title =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb33-136"><a href="Chapter4.html#cb33-136" tabindex="-1"></a>        <span class="at">axis.title =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">14</span>),</span>
<span id="cb33-137"><a href="Chapter4.html#cb33-137" tabindex="-1"></a>        <span class="at">axis.text=</span><span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">12</span>),</span>
<span id="cb33-138"><a href="Chapter4.html#cb33-138" tabindex="-1"></a>        <span class="at">legend.text=</span><span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">12</span>),</span>
<span id="cb33-139"><a href="Chapter4.html#cb33-139" tabindex="-1"></a>        <span class="at">strip.text =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">11</span>))<span class="sc">+</span></span>
<span id="cb33-140"><a href="Chapter4.html#cb33-140" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels=</span>scales<span class="sc">::</span><span class="fu">label_percent</span>(),<span class="at">breaks=</span><span class="fu">seq</span>(<span class="dv">0</span>,<span class="dv">1</span>,<span class="at">by=</span>.<span class="dv">1</span>))<span class="sc">+</span></span>
<span id="cb33-141"><a href="Chapter4.html#cb33-141" tabindex="-1"></a>  <span class="fu">scale_color_viridis_d</span>()<span class="sc">+</span></span>
<span id="cb33-142"><a href="Chapter4.html#cb33-142" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x=</span><span class="st">&quot;Sezona&quot;</span>)</span>
<span id="cb33-143"><a href="Chapter4.html#cb33-143" tabindex="-1"></a></span>
<span id="cb33-144"><a href="Chapter4.html#cb33-144" tabindex="-1"></a><span class="fu">ggview</span>(<span class="at">width=</span><span class="dv">300</span>,<span class="at">height=</span><span class="dv">250</span>,<span class="at">units=</span><span class="st">&quot;mm&quot;</span>,<span class="at">dpi=</span><span class="dv">600</span>,<span class="at">device=</span><span class="st">&quot;png&quot;</span>)</span>
<span id="cb33-145"><a href="Chapter4.html#cb33-145" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="at">filename=</span><span class="st">&quot;./pic_q51.png&quot;</span>,<span class="at">width=</span><span class="dv">300</span>,<span class="at">height=</span><span class="dv">250</span>,<span class="at">units=</span><span class="st">&quot;mm&quot;</span>,<span class="at">dpi=</span><span class="dv">600</span>)</span>
<span id="cb33-146"><a href="Chapter4.html#cb33-146" tabindex="-1"></a></span>
<span id="cb33-147"><a href="Chapter4.html#cb33-147" tabindex="-1"></a></span>
<span id="cb33-148"><a href="Chapter4.html#cb33-148" tabindex="-1"></a>q51b<span class="ot">=</span><span class="fu">data.frame</span>(dati) <span class="sc">%&gt;%</span> </span>
<span id="cb33-149"><a href="Chapter4.html#cb33-149" tabindex="-1"></a>  <span class="fu">select</span>(veids,sezona,trees,perimeter,area) <span class="sc">%&gt;%</span> </span>
<span id="cb33-150"><a href="Chapter4.html#cb33-150" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">PAr=</span><span class="fu">round</span>(perimeter<span class="sc">/</span>area,<span class="dv">3</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb33-151"><a href="Chapter4.html#cb33-151" tabindex="-1"></a>  <span class="fu">group_by</span>(veids,sezona,PAr) <span class="sc">%&gt;%</span> </span>
<span id="cb33-152"><a href="Chapter4.html#cb33-152" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">propocija=</span><span class="fu">weighted.mean</span>(trees,area))</span>
<span id="cb33-153"><a href="Chapter4.html#cb33-153" tabindex="-1"></a></span>
<span id="cb33-154"><a href="Chapter4.html#cb33-154" tabindex="-1"></a><span class="fu">ggplot</span>(q51b,<span class="fu">aes</span>(PAr,propocija,<span class="at">col=</span>sezona))<span class="sc">+</span></span>
<span id="cb33-155"><a href="Chapter4.html#cb33-155" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>veids,<span class="at">nrow=</span><span class="dv">2</span>)<span class="sc">+</span></span>
<span id="cb33-156"><a href="Chapter4.html#cb33-156" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">alpha=</span><span class="fl">0.1</span>)<span class="sc">+</span></span>
<span id="cb33-157"><a href="Chapter4.html#cb33-157" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method=</span><span class="st">&quot;loess&quot;</span>,<span class="at">se=</span><span class="cn">FALSE</span>)<span class="sc">+</span></span>
<span id="cb33-158"><a href="Chapter4.html#cb33-158" tabindex="-1"></a>  <span class="fu">theme_bw</span>()<span class="sc">+</span></span>
<span id="cb33-159"><a href="Chapter4.html#cb33-159" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.title =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb33-160"><a href="Chapter4.html#cb33-160" tabindex="-1"></a>        <span class="at">axis.title =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">14</span>),</span>
<span id="cb33-161"><a href="Chapter4.html#cb33-161" tabindex="-1"></a>        <span class="at">axis.text=</span><span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">12</span>),</span>
<span id="cb33-162"><a href="Chapter4.html#cb33-162" tabindex="-1"></a>        <span class="at">legend.text=</span><span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">12</span>),</span>
<span id="cb33-163"><a href="Chapter4.html#cb33-163" tabindex="-1"></a>        <span class="at">strip.text =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">11</span>))<span class="sc">+</span></span>
<span id="cb33-164"><a href="Chapter4.html#cb33-164" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels=</span>scales<span class="sc">::</span><span class="fu">label_percent</span>(),<span class="at">breaks=</span><span class="fu">seq</span>(<span class="dv">0</span>,<span class="dv">1</span>,<span class="at">by=</span>.<span class="dv">1</span>))<span class="sc">+</span></span>
<span id="cb33-165"><a href="Chapter4.html#cb33-165" tabindex="-1"></a>  <span class="fu">scale_color_viridis_d</span>()<span class="sc">+</span></span>
<span id="cb33-166"><a href="Chapter4.html#cb33-166" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x=</span><span class="st">&quot;Perimetra-laukuma attiecība&quot;</span>,</span>
<span id="cb33-167"><a href="Chapter4.html#cb33-167" tabindex="-1"></a>       <span class="at">y=</span><span class="st">&quot;Ar laukumu svērtā vidējā proporcija (%) klasei &#39;trees&#39;&quot;</span>)<span class="sc">+</span></span>
<span id="cb33-168"><a href="Chapter4.html#cb33-168" tabindex="-1"></a>  <span class="fu">coord_cartesian</span>(<span class="at">xlim=</span><span class="fu">c</span>(<span class="dv">0</span>,<span class="fl">0.25</span>))</span>
<span id="cb33-169"><a href="Chapter4.html#cb33-169" tabindex="-1"></a></span>
<span id="cb33-170"><a href="Chapter4.html#cb33-170" tabindex="-1"></a><span class="fu">ggview</span>(<span class="at">width=</span><span class="dv">300</span>,<span class="at">height=</span><span class="dv">150</span>,<span class="at">units=</span><span class="st">&quot;mm&quot;</span>,<span class="at">dpi=</span><span class="dv">600</span>,<span class="at">device=</span><span class="st">&quot;png&quot;</span>)</span>
<span id="cb33-171"><a href="Chapter4.html#cb33-171" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="at">filename=</span><span class="st">&quot;./pic_q51b.png&quot;</span>,<span class="at">width=</span><span class="dv">300</span>,<span class="at">height=</span><span class="dv">150</span>,<span class="at">units=</span><span class="st">&quot;mm&quot;</span>,<span class="at">dpi=</span><span class="dv">600</span>)</span>
<span id="cb33-172"><a href="Chapter4.html#cb33-172" tabindex="-1"></a></span>
<span id="cb33-173"><a href="Chapter4.html#cb33-173" tabindex="-1"></a></span>
<span id="cb33-174"><a href="Chapter4.html#cb33-174" tabindex="-1"></a>q51c<span class="ot">=</span><span class="fu">data.frame</span>(dati) <span class="sc">%&gt;%</span> </span>
<span id="cb33-175"><a href="Chapter4.html#cb33-175" tabindex="-1"></a>  <span class="fu">select</span>(veids,sezona,trees,perimeter,area) <span class="sc">%&gt;%</span> </span>
<span id="cb33-176"><a href="Chapter4.html#cb33-176" tabindex="-1"></a>  <span class="fu">group_by</span>(veids,sezona,area) <span class="sc">%&gt;%</span> </span>
<span id="cb33-177"><a href="Chapter4.html#cb33-177" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">proporcija=</span><span class="fu">weighted.mean</span>(trees,area))</span>
<span id="cb33-178"><a href="Chapter4.html#cb33-178" tabindex="-1"></a></span>
<span id="cb33-179"><a href="Chapter4.html#cb33-179" tabindex="-1"></a><span class="fu">ggplot</span>(q51c,<span class="fu">aes</span>(area,proporcija,<span class="at">col=</span>sezona))<span class="sc">+</span></span>
<span id="cb33-180"><a href="Chapter4.html#cb33-180" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">alpha=</span><span class="fl">0.1</span>)<span class="sc">+</span></span>
<span id="cb33-181"><a href="Chapter4.html#cb33-181" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method=</span><span class="st">&quot;loess&quot;</span>,<span class="at">se=</span><span class="cn">FALSE</span>)<span class="sc">+</span></span>
<span id="cb33-182"><a href="Chapter4.html#cb33-182" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>veids,<span class="at">nrow=</span><span class="dv">2</span>)<span class="sc">+</span></span>
<span id="cb33-183"><a href="Chapter4.html#cb33-183" tabindex="-1"></a>  <span class="fu">theme_bw</span>()<span class="sc">+</span></span>
<span id="cb33-184"><a href="Chapter4.html#cb33-184" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.title =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb33-185"><a href="Chapter4.html#cb33-185" tabindex="-1"></a>        <span class="at">axis.title =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">14</span>),</span>
<span id="cb33-186"><a href="Chapter4.html#cb33-186" tabindex="-1"></a>        <span class="at">axis.text=</span><span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">12</span>),</span>
<span id="cb33-187"><a href="Chapter4.html#cb33-187" tabindex="-1"></a>        <span class="at">legend.text=</span><span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">12</span>),</span>
<span id="cb33-188"><a href="Chapter4.html#cb33-188" tabindex="-1"></a>        <span class="at">strip.text =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">11</span>))<span class="sc">+</span></span>
<span id="cb33-189"><a href="Chapter4.html#cb33-189" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels=</span>scales<span class="sc">::</span><span class="fu">label_percent</span>(),<span class="at">breaks=</span><span class="fu">seq</span>(<span class="dv">0</span>,<span class="dv">1</span>,<span class="at">by=</span>.<span class="dv">1</span>))<span class="sc">+</span></span>
<span id="cb33-190"><a href="Chapter4.html#cb33-190" tabindex="-1"></a>  <span class="fu">scale_color_viridis_d</span>()<span class="sc">+</span></span>
<span id="cb33-191"><a href="Chapter4.html#cb33-191" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x=</span><span class="fu">expression</span>(<span class="fu">paste</span>(<span class="st">&quot;Platība, &quot;</span>,m<span class="sc">^</span><span class="dv">2</span>)),<span class="at">y=</span><span class="st">&quot;Proporcija (%) klasei &#39;trees&#39;&quot;</span>)<span class="sc">+</span></span>
<span id="cb33-192"><a href="Chapter4.html#cb33-192" tabindex="-1"></a>  <span class="fu">coord_cartesian</span>(<span class="at">xlim=</span><span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">75000</span>))</span>
<span id="cb33-193"><a href="Chapter4.html#cb33-193" tabindex="-1"></a><span class="fu">ggview</span>(<span class="at">width=</span><span class="dv">300</span>,<span class="at">height=</span><span class="dv">150</span>,<span class="at">units=</span><span class="st">&quot;mm&quot;</span>,<span class="at">dpi=</span><span class="dv">600</span>,<span class="at">device=</span><span class="st">&quot;png&quot;</span>)</span>
<span id="cb33-194"><a href="Chapter4.html#cb33-194" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="at">filename=</span><span class="st">&quot;./pic_q51c.png&quot;</span>,<span class="at">width=</span><span class="dv">300</span>,<span class="at">height=</span><span class="dv">150</span>,<span class="at">units=</span><span class="st">&quot;mm&quot;</span>,<span class="at">dpi=</span><span class="dv">600</span>)</span></code></pre></div>
</div>
<div id="q5.2-senākas-kailcirtes-bet-vēl-joprojām-izcirtumi" class="section level3 hasAnchor" number="5.6.2">
<h3><span class="header-section-number">5.6.2</span> Q5.2: senākas kailcirtes, bet vēl joprojām izcirtumi<a href="Chapter4.html#q5.2-senākas-kailcirtes-bet-vēl-joprojām-izcirtumi" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Nogabali, kuros pēdējā ciršana ir kailcirtē (p_cirp==“11”) un pēdējās darbības veids ir koku ciršana (p_darbv==“1”) ar nejaušu izlozi nogabaliem kopš 2013. gada, kad ik gadu ir vismaz 300 nogabali.</p>
<p>Šīs analīzes rezultāti (<a href="Chapter4.html#fig:DWq52">5.27</a> att.) saistās ar iepriekšējām - ir izteikti malas efekti, kur blakus esošās mežaudzes ietekmē izpētes audžu klasifikācijas rezultātu un pārspīlētā koku sastopamība, kas ir izpaudusies jau vairākkārt - tikko mežaudzēs ir vismaz 0.1 m augsti kokaugi vai sastopamie augstie lakstaugi, tās klasificētas kā ‘trees’.</p>
<p>Augstā koku sastopamība šo resursu padara par otršķirīgu vidi raksturojošu ekoģeogrāfisko mainīgo sagatavošanā. Tomēr vides pārmaiņu analīzē (novērojumu atlasē) to varētu lietot, lai samazinātu (bet ne pilnībā izskaustu) novērojumus vietās, kurās notikušas vides pārmaiņas.</p>
<div class="figure"><span style="display:block;" id="fig:DWq52"></span>
<img src="Atteli/ch004_q52.png" alt="Ar platību svērtā 2023. gada DW klašu sastopamība kopš 2013. gada veiktās kailcirtēs." width="100%" />
<p class="caption">
Figure 5.27: Ar platību svērtā 2023. gada DW klašu sastopamība kopš 2013. gada veiktās kailcirtēs.
</p>
</div>
<p><br></p>
<p>Komandu rindas attēlu sagatavošanas un veiktās analīzes reproducēšanai (tiek izmantoti <a href="Chapter3.html#Chapter3.1.1">Meža Valsts reģistrs</a> dati):</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="Chapter4.html#cb34-1" tabindex="-1"></a><span class="co"># libs</span></span>
<span id="cb34-2"><a href="Chapter4.html#cb34-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb34-3"><a href="Chapter4.html#cb34-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb34-4"><a href="Chapter4.html#cb34-4" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(arrow)) {<span class="fu">install.packages</span>(<span class="st">&quot;arrow&quot;</span>); <span class="fu">require</span>(arrow)}</span>
<span id="cb34-5"><a href="Chapter4.html#cb34-5" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(sf)) {<span class="fu">install.packages</span>(<span class="st">&quot;sf&quot;</span>); <span class="fu">require</span>(sf)}</span>
<span id="cb34-6"><a href="Chapter4.html#cb34-6" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(sfarrow)) {<span class="fu">install.packages</span>(<span class="st">&quot;sfarrow&quot;</span>); <span class="fu">require</span>(sfarrow)}</span>
<span id="cb34-7"><a href="Chapter4.html#cb34-7" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(exactextractr)) {<span class="fu">install.packages</span>(<span class="st">&quot;exactextractr&quot;</span>); <span class="fu">require</span>(exactextractr)}</span>
<span id="cb34-8"><a href="Chapter4.html#cb34-8" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(ggview)) {<span class="fu">install.packages</span>(<span class="st">&quot;ggview&quot;</span>); <span class="fu">require</span>(ggview)}</span>
<span id="cb34-9"><a href="Chapter4.html#cb34-9" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb34-10"><a href="Chapter4.html#cb34-10" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(ggrepel)) {<span class="fu">install.packages</span>(<span class="st">&quot;ggrepel&quot;</span>); <span class="fu">require</span>(ggrepel)}</span>
<span id="cb34-11"><a href="Chapter4.html#cb34-11" tabindex="-1"></a></span>
<span id="cb34-12"><a href="Chapter4.html#cb34-12" tabindex="-1"></a><span class="co"># meža dati</span></span>
<span id="cb34-13"><a href="Chapter4.html#cb34-13" tabindex="-1"></a>MVR <span class="ot">&lt;-</span> <span class="fu">st_read_parquet</span>(<span class="st">&quot;./IevadesDati/MVR/nogabali_2024janv.parquet&quot;</span>)</span>
<span id="cb34-14"><a href="Chapter4.html#cb34-14" tabindex="-1"></a>mvr<span class="ot">=</span>MVR <span class="sc">%&gt;%</span> </span>
<span id="cb34-15"><a href="Chapter4.html#cb34-15" tabindex="-1"></a>  <span class="fu">filter</span>(p_cirp<span class="sc">==</span><span class="st">&quot;11&quot;</span><span class="sc">&amp;</span>p_cirg<span class="sc">&gt;=</span><span class="dv">2013</span><span class="sc">&amp;</span>p_darbv<span class="sc">==</span><span class="st">&quot;1&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb34-16"><a href="Chapter4.html#cb34-16" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">p_cirg=</span><span class="fu">as.character</span>(p_cirg))</span>
<span id="cb34-17"><a href="Chapter4.html#cb34-17" tabindex="-1"></a></span>
<span id="cb34-18"><a href="Chapter4.html#cb34-18" tabindex="-1"></a></span>
<span id="cb34-19"><a href="Chapter4.html#cb34-19" tabindex="-1"></a><span class="co"># DW</span></span>
<span id="cb34-20"><a href="Chapter4.html#cb34-20" tabindex="-1"></a>AprAug <span class="ot">&lt;-</span> <span class="fu">rast</span>(<span class="st">&quot;./DW_2023_apraug.tif&quot;</span>)</span>
<span id="cb34-21"><a href="Chapter4.html#cb34-21" tabindex="-1"></a>AprJul <span class="ot">&lt;-</span> <span class="fu">rast</span>(<span class="st">&quot;./DW_2023_aprjul.tif&quot;</span>)</span>
<span id="cb34-22"><a href="Chapter4.html#cb34-22" tabindex="-1"></a>AprJun <span class="ot">&lt;-</span> <span class="fu">rast</span>(<span class="st">&quot;./DW_2023_aprjun.tif&quot;</span>)</span>
<span id="cb34-23"><a href="Chapter4.html#cb34-23" tabindex="-1"></a>AprMay <span class="ot">&lt;-</span> <span class="fu">rast</span>(<span class="st">&quot;./DW_2023_aprmay.tif&quot;</span>)</span>
<span id="cb34-24"><a href="Chapter4.html#cb34-24" tabindex="-1"></a>JulAug <span class="ot">&lt;-</span> <span class="fu">rast</span>(<span class="st">&quot;./DW_2023_julaug.tif&quot;</span>)</span>
<span id="cb34-25"><a href="Chapter4.html#cb34-25" tabindex="-1"></a>JunAug <span class="ot">&lt;-</span> <span class="fu">rast</span>(<span class="st">&quot;./DW_2023_julaug.tif&quot;</span>)</span>
<span id="cb34-26"><a href="Chapter4.html#cb34-26" tabindex="-1"></a>JunJul <span class="ot">&lt;-</span> <span class="fu">rast</span>(<span class="st">&quot;./DW_2023_junjul.tif&quot;</span>)</span>
<span id="cb34-27"><a href="Chapter4.html#cb34-27" tabindex="-1"></a>MayAug <span class="ot">&lt;-</span> <span class="fu">rast</span>(<span class="st">&quot;./DW_2023_mayaug.tif&quot;</span>)</span>
<span id="cb34-28"><a href="Chapter4.html#cb34-28" tabindex="-1"></a>MayJul <span class="ot">&lt;-</span> <span class="fu">rast</span>(<span class="st">&quot;./DW_2023_mayjul.tif&quot;</span>)</span>
<span id="cb34-29"><a href="Chapter4.html#cb34-29" tabindex="-1"></a>MayJun <span class="ot">&lt;-</span> <span class="fu">rast</span>(<span class="st">&quot;./DW_2023_mayjun.tif&quot;</span>)</span>
<span id="cb34-30"><a href="Chapter4.html#cb34-30" tabindex="-1"></a></span>
<span id="cb34-31"><a href="Chapter4.html#cb34-31" tabindex="-1"></a><span class="co"># utility </span></span>
<span id="cb34-32"><a href="Chapter4.html#cb34-32" tabindex="-1"></a>darbiba <span class="ot">&lt;-</span> <span class="cf">function</span>(raster, vector, period) {</span>
<span id="cb34-33"><a href="Chapter4.html#cb34-33" tabindex="-1"></a>  <span class="fu">exact_extract</span>(raster, vector, <span class="cf">function</span>(value, coverage_fraction) {</span>
<span id="cb34-34"><a href="Chapter4.html#cb34-34" tabindex="-1"></a>    <span class="fu">data.frame</span>(<span class="at">value =</span> value,</span>
<span id="cb34-35"><a href="Chapter4.html#cb34-35" tabindex="-1"></a>               <span class="at">frac =</span> coverage_fraction <span class="sc">/</span> <span class="fu">sum</span>(coverage_fraction, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb34-36"><a href="Chapter4.html#cb34-36" tabindex="-1"></a>      <span class="fu">group_by</span>(value) <span class="sc">%&gt;%</span></span>
<span id="cb34-37"><a href="Chapter4.html#cb34-37" tabindex="-1"></a>      <span class="fu">summarize</span>(<span class="at">freq =</span> <span class="fu">sum</span>(frac, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="at">.groups =</span> <span class="st">&#39;drop&#39;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb34-38"><a href="Chapter4.html#cb34-38" tabindex="-1"></a>      <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> <span class="st">&#39;value&#39;</span>,</span>
<span id="cb34-39"><a href="Chapter4.html#cb34-39" tabindex="-1"></a>                  <span class="at">names_prefix =</span> <span class="st">&#39;freq_&#39;</span>,</span>
<span id="cb34-40"><a href="Chapter4.html#cb34-40" tabindex="-1"></a>                  <span class="at">values_from =</span> <span class="st">&#39;freq&#39;</span>)</span>
<span id="cb34-41"><a href="Chapter4.html#cb34-41" tabindex="-1"></a>  }) <span class="sc">%&gt;%</span></span>
<span id="cb34-42"><a href="Chapter4.html#cb34-42" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">starts_with</span>(<span class="st">&#39;freq&#39;</span>), <span class="sc">~</span><span class="fu">replace_na</span>(., <span class="dv">0</span>))) <span class="sc">%&gt;%</span></span>
<span id="cb34-43"><a href="Chapter4.html#cb34-43" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">periods =</span> period) </span>
<span id="cb34-44"><a href="Chapter4.html#cb34-44" tabindex="-1"></a>}</span>
<span id="cb34-45"><a href="Chapter4.html#cb34-45" tabindex="-1"></a></span>
<span id="cb34-46"><a href="Chapter4.html#cb34-46" tabindex="-1"></a></span>
<span id="cb34-47"><a href="Chapter4.html#cb34-47" tabindex="-1"></a><span class="co"># DW extraction </span></span>
<span id="cb34-48"><a href="Chapter4.html#cb34-48" tabindex="-1"></a>kodi<span class="ot">=</span><span class="fu">data.frame</span>(<span class="at">kods=</span><span class="fu">levels</span>(<span class="fu">factor</span>(mvr<span class="sc">$</span>p_cirg)))</span>
<span id="cb34-49"><a href="Chapter4.html#cb34-49" tabindex="-1"></a>dati<span class="ot">=</span>mvr[<span class="dv">1</span>,]</span>
<span id="cb34-50"><a href="Chapter4.html#cb34-50" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(kodi<span class="sc">$</span>kods)){</span>
<span id="cb34-51"><a href="Chapter4.html#cb34-51" tabindex="-1"></a>  kods<span class="ot">=</span>kodi<span class="sc">$</span>kods[i]</span>
<span id="cb34-52"><a href="Chapter4.html#cb34-52" tabindex="-1"></a>  <span class="fu">set.seed</span>(<span class="dv">0</span>)</span>
<span id="cb34-53"><a href="Chapter4.html#cb34-53" tabindex="-1"></a>  vietas <span class="ot">&lt;-</span> mvr <span class="sc">%&gt;%</span> <span class="fu">filter</span>(p_cirg <span class="sc">==</span> kods)</span>
<span id="cb34-54"><a href="Chapter4.html#cb34-54" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">nrow</span>(vietas) <span class="sc">&lt;</span> <span class="dv">999</span>) {rand_locs <span class="ot">&lt;-</span> vietas} <span class="cf">else</span> {rand_locs <span class="ot">&lt;-</span> vietas <span class="sc">%&gt;%</span> <span class="fu">sample_n</span>(<span class="dv">999</span>)}</span>
<span id="cb34-55"><a href="Chapter4.html#cb34-55" tabindex="-1"></a>  rand_locs <span class="ot">&lt;-</span> rand_locs <span class="sc">%&gt;%</span>  <span class="fu">mutate</span>(<span class="at">id =</span> <span class="fu">row_number</span>())</span>
<span id="cb34-56"><a href="Chapter4.html#cb34-56" tabindex="-1"></a>  </span>
<span id="cb34-57"><a href="Chapter4.html#cb34-57" tabindex="-1"></a>  a<span class="ot">=</span><span class="fu">cbind</span>(rand_locs,<span class="fu">darbiba</span>(AprAug, rand_locs, <span class="st">&quot;AprAug&quot;</span>))</span>
<span id="cb34-58"><a href="Chapter4.html#cb34-58" tabindex="-1"></a>  b<span class="ot">=</span><span class="fu">cbind</span>(rand_locs,<span class="fu">darbiba</span>(AprJul, rand_locs, <span class="st">&quot;AprJul&quot;</span>))</span>
<span id="cb34-59"><a href="Chapter4.html#cb34-59" tabindex="-1"></a>  c<span class="ot">=</span><span class="fu">cbind</span>(rand_locs,<span class="fu">darbiba</span>(AprJun, rand_locs, <span class="st">&quot;AprJun&quot;</span>))</span>
<span id="cb34-60"><a href="Chapter4.html#cb34-60" tabindex="-1"></a>  d<span class="ot">=</span><span class="fu">cbind</span>(rand_locs,<span class="fu">darbiba</span>(AprMay, rand_locs, <span class="st">&quot;AprMay&quot;</span>))</span>
<span id="cb34-61"><a href="Chapter4.html#cb34-61" tabindex="-1"></a>  e<span class="ot">=</span><span class="fu">cbind</span>(rand_locs,<span class="fu">darbiba</span>(JulAug, rand_locs, <span class="st">&quot;JulAug&quot;</span>))</span>
<span id="cb34-62"><a href="Chapter4.html#cb34-62" tabindex="-1"></a>  f<span class="ot">=</span><span class="fu">cbind</span>(rand_locs,<span class="fu">darbiba</span>(JunAug, rand_locs, <span class="st">&quot;JunAug&quot;</span>))</span>
<span id="cb34-63"><a href="Chapter4.html#cb34-63" tabindex="-1"></a>  g<span class="ot">=</span><span class="fu">cbind</span>(rand_locs,<span class="fu">darbiba</span>(JunJul, rand_locs, <span class="st">&quot;JunJul&quot;</span>))</span>
<span id="cb34-64"><a href="Chapter4.html#cb34-64" tabindex="-1"></a>  h<span class="ot">=</span><span class="fu">cbind</span>(rand_locs,<span class="fu">darbiba</span>(MayAug, rand_locs, <span class="st">&quot;MayAug&quot;</span>))</span>
<span id="cb34-65"><a href="Chapter4.html#cb34-65" tabindex="-1"></a>  i<span class="ot">=</span><span class="fu">cbind</span>(rand_locs,<span class="fu">darbiba</span>(MayJul, rand_locs, <span class="st">&quot;MayJul&quot;</span>))</span>
<span id="cb34-66"><a href="Chapter4.html#cb34-66" tabindex="-1"></a>  j<span class="ot">=</span><span class="fu">cbind</span>(rand_locs,<span class="fu">darbiba</span>(MayJun, rand_locs, <span class="st">&quot;MayJun&quot;</span>))</span>
<span id="cb34-67"><a href="Chapter4.html#cb34-67" tabindex="-1"></a></span>
<span id="cb34-68"><a href="Chapter4.html#cb34-68" tabindex="-1"></a>  rez<span class="ot">=</span><span class="fu">bind_rows</span>(a,b,c,d,e,f,g,h,i,j)</span>
<span id="cb34-69"><a href="Chapter4.html#cb34-69" tabindex="-1"></a>  dati <span class="ot">&lt;-</span> <span class="fu">bind_rows</span>(dati, rez)</span>
<span id="cb34-70"><a href="Chapter4.html#cb34-70" tabindex="-1"></a>}</span>
<span id="cb34-71"><a href="Chapter4.html#cb34-71" tabindex="-1"></a>dati<span class="ot">=</span>dati <span class="sc">%&gt;%</span> </span>
<span id="cb34-72"><a href="Chapter4.html#cb34-72" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">water=</span>freq_0,</span>
<span id="cb34-73"><a href="Chapter4.html#cb34-73" tabindex="-1"></a>         <span class="at">trees=</span>freq_1,</span>
<span id="cb34-74"><a href="Chapter4.html#cb34-74" tabindex="-1"></a>         <span class="at">grass=</span>freq_2,</span>
<span id="cb34-75"><a href="Chapter4.html#cb34-75" tabindex="-1"></a>         <span class="at">flooded_vegetation=</span>freq_3,</span>
<span id="cb34-76"><a href="Chapter4.html#cb34-76" tabindex="-1"></a>         <span class="at">crops=</span>freq_4,</span>
<span id="cb34-77"><a href="Chapter4.html#cb34-77" tabindex="-1"></a>         <span class="at">shrub_and_scrub=</span>freq_5,</span>
<span id="cb34-78"><a href="Chapter4.html#cb34-78" tabindex="-1"></a>         <span class="at">built=</span>freq_6,</span>
<span id="cb34-79"><a href="Chapter4.html#cb34-79" tabindex="-1"></a>         <span class="at">bare=</span>freq_7,</span>
<span id="cb34-80"><a href="Chapter4.html#cb34-80" tabindex="-1"></a>         <span class="at">snow_and_ice=</span>freq_8)</span>
<span id="cb34-81"><a href="Chapter4.html#cb34-81" tabindex="-1"></a>dati_real<span class="ot">=</span>dati[<span class="sc">-</span><span class="dv">1</span>,]</span>
<span id="cb34-82"><a href="Chapter4.html#cb34-82" tabindex="-1"></a>dati_real[<span class="fu">is.na</span>(dati_real)]<span class="ot">=</span><span class="dv">0</span></span>
<span id="cb34-83"><a href="Chapter4.html#cb34-83" tabindex="-1"></a>dati_real<span class="sc">$</span>area<span class="ot">=</span><span class="fu">as.numeric</span>(<span class="fu">st_area</span>(dati_real))</span>
<span id="cb34-84"><a href="Chapter4.html#cb34-84" tabindex="-1"></a>dati_real<span class="sc">$</span>perimeter<span class="ot">=</span><span class="fu">as.numeric</span>(<span class="fu">st_perimeter</span>(dati_real))</span>
<span id="cb34-85"><a href="Chapter4.html#cb34-85" tabindex="-1"></a>sfarrow<span class="sc">::</span><span class="fu">st_write_parquet</span>(dati_real,<span class="st">&quot;./Q52_Izcirtumi.parquet&quot;</span>)</span>
<span id="cb34-86"><a href="Chapter4.html#cb34-86" tabindex="-1"></a></span>
<span id="cb34-87"><a href="Chapter4.html#cb34-87" tabindex="-1"></a>dati<span class="ot">=</span>sfarrow<span class="sc">::</span><span class="fu">st_read_parquet</span>(<span class="st">&quot;./Q52_Izcirtumi.parquet&quot;</span>)</span>
<span id="cb34-88"><a href="Chapter4.html#cb34-88" tabindex="-1"></a></span>
<span id="cb34-89"><a href="Chapter4.html#cb34-89" tabindex="-1"></a>dati<span class="ot">=</span>dati <span class="sc">%&gt;%</span> </span>
<span id="cb34-90"><a href="Chapter4.html#cb34-90" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">sezona=</span><span class="fu">factor</span>(periods,<span class="at">ordered=</span><span class="cn">TRUE</span>,</span>
<span id="cb34-91"><a href="Chapter4.html#cb34-91" tabindex="-1"></a>                       <span class="at">levels=</span><span class="fu">c</span>(<span class="st">&quot;AprMay&quot;</span>,<span class="st">&quot;AprJun&quot;</span>,<span class="st">&quot;AprJul&quot;</span>,<span class="st">&quot;AprAug&quot;</span>,<span class="st">&quot;MayJun&quot;</span>,</span>
<span id="cb34-92"><a href="Chapter4.html#cb34-92" tabindex="-1"></a>                                <span class="st">&quot;MayJul&quot;</span>,<span class="st">&quot;MayAug&quot;</span>,<span class="st">&quot;JunJul&quot;</span>,<span class="st">&quot;JunAug&quot;</span>,<span class="st">&quot;JulAug&quot;</span>)))</span>
<span id="cb34-93"><a href="Chapter4.html#cb34-93" tabindex="-1"></a></span>
<span id="cb34-94"><a href="Chapter4.html#cb34-94" tabindex="-1"></a>q52data<span class="ot">=</span><span class="fu">data.frame</span>(dati) <span class="sc">%&gt;%</span> </span>
<span id="cb34-95"><a href="Chapter4.html#cb34-95" tabindex="-1"></a>  <span class="fu">select</span>(p_cirg,sezona,perimeter,area,water<span class="sc">:</span>snow_and_ice) <span class="sc">%&gt;%</span> </span>
<span id="cb34-96"><a href="Chapter4.html#cb34-96" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols=</span>water<span class="sc">:</span>snow_and_ice,<span class="at">names_to =</span> <span class="st">&quot;klase&quot;</span>,<span class="at">values_to =</span> <span class="st">&quot;proporcija&quot;</span>)</span>
<span id="cb34-97"><a href="Chapter4.html#cb34-97" tabindex="-1"></a>  </span>
<span id="cb34-98"><a href="Chapter4.html#cb34-98" tabindex="-1"></a>q52_props<span class="ot">=</span><span class="fu">data.frame</span>(dati) <span class="sc">%&gt;%</span> </span>
<span id="cb34-99"><a href="Chapter4.html#cb34-99" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols=</span>water<span class="sc">:</span>snow_and_ice,<span class="at">names_to =</span> <span class="st">&quot;klase&quot;</span>,<span class="at">values_to =</span> <span class="st">&quot;proporcija&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb34-100"><a href="Chapter4.html#cb34-100" tabindex="-1"></a>  <span class="fu">filter</span>(klase <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;crops&quot;</span>,<span class="st">&quot;grass&quot;</span>,<span class="st">&quot;shrub_and_scrub&quot;</span>,<span class="st">&quot;trees&quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb34-101"><a href="Chapter4.html#cb34-101" tabindex="-1"></a>  <span class="fu">group_by</span>(p_cirg,sezona,klase) <span class="sc">%&gt;%</span> </span>
<span id="cb34-102"><a href="Chapter4.html#cb34-102" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">proporcija=</span><span class="fu">round</span>(<span class="fu">weighted.mean</span>(proporcija,area)<span class="sc">*</span><span class="dv">100</span>,<span class="dv">0</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb34-103"><a href="Chapter4.html#cb34-103" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span>
<span id="cb34-104"><a href="Chapter4.html#cb34-104" tabindex="-1"></a></span>
<span id="cb34-105"><a href="Chapter4.html#cb34-105" tabindex="-1"></a><span class="fu">ggplot</span>(q52data,<span class="fu">aes</span>(sezona,proporcija,<span class="at">col=</span>klase))<span class="sc">+</span></span>
<span id="cb34-106"><a href="Chapter4.html#cb34-106" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>p_cirg,<span class="at">nrow=</span><span class="dv">2</span>)<span class="sc">+</span></span>
<span id="cb34-107"><a href="Chapter4.html#cb34-107" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">position=</span><span class="fu">position_dodge</span>(<span class="at">width=</span><span class="fl">0.75</span>),<span class="at">alpha=</span><span class="fl">0.2</span>)<span class="sc">+</span></span>
<span id="cb34-108"><a href="Chapter4.html#cb34-108" tabindex="-1"></a>  <span class="fu">theme_bw</span>()<span class="sc">+</span></span>
<span id="cb34-109"><a href="Chapter4.html#cb34-109" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="at">data=</span>q52_props[q52_props<span class="sc">$</span>klase<span class="sc">==</span><span class="st">&quot;crops&quot;</span>,],</span>
<span id="cb34-110"><a href="Chapter4.html#cb34-110" tabindex="-1"></a>            <span class="fu">aes</span>(sezona,<span class="at">y=</span><span class="fl">1.2</span>,<span class="at">label=</span>proporcija),<span class="at">size=</span><span class="dv">3</span>)<span class="sc">+</span></span>
<span id="cb34-111"><a href="Chapter4.html#cb34-111" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="at">data=</span>q52_props[q52_props<span class="sc">$</span>klase<span class="sc">==</span><span class="st">&quot;grass&quot;</span>,],</span>
<span id="cb34-112"><a href="Chapter4.html#cb34-112" tabindex="-1"></a>            <span class="fu">aes</span>(sezona,<span class="at">y=</span><span class="fl">1.15</span>,<span class="at">label=</span>proporcija),<span class="at">size=</span><span class="dv">3</span>)<span class="sc">+</span></span>
<span id="cb34-113"><a href="Chapter4.html#cb34-113" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="at">data=</span>q52_props[q52_props<span class="sc">$</span>klase<span class="sc">==</span><span class="st">&quot;shrub_and_scrub&quot;</span>,],</span>
<span id="cb34-114"><a href="Chapter4.html#cb34-114" tabindex="-1"></a>            <span class="fu">aes</span>(sezona,<span class="at">y=</span><span class="fl">1.1</span>,<span class="at">label=</span>proporcija),<span class="at">size=</span><span class="dv">3</span>)<span class="sc">+</span></span>
<span id="cb34-115"><a href="Chapter4.html#cb34-115" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="at">data=</span>q52_props[q52_props<span class="sc">$</span>klase<span class="sc">==</span><span class="st">&quot;trees&quot;</span>,],</span>
<span id="cb34-116"><a href="Chapter4.html#cb34-116" tabindex="-1"></a>            <span class="fu">aes</span>(sezona,<span class="at">y=</span><span class="fl">1.05</span>,<span class="at">label=</span>proporcija),<span class="at">size=</span><span class="dv">3</span>)<span class="sc">+</span></span>
<span id="cb34-117"><a href="Chapter4.html#cb34-117" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle=</span><span class="dv">90</span>,<span class="at">vjust=</span><span class="fl">0.5</span>),</span>
<span id="cb34-118"><a href="Chapter4.html#cb34-118" tabindex="-1"></a>        <span class="at">axis.title.y =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb34-119"><a href="Chapter4.html#cb34-119" tabindex="-1"></a>        <span class="at">legend.title =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb34-120"><a href="Chapter4.html#cb34-120" tabindex="-1"></a>        <span class="at">axis.title =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">14</span>),</span>
<span id="cb34-121"><a href="Chapter4.html#cb34-121" tabindex="-1"></a>        <span class="at">axis.text=</span><span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">12</span>),</span>
<span id="cb34-122"><a href="Chapter4.html#cb34-122" tabindex="-1"></a>        <span class="at">legend.text=</span><span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">12</span>),</span>
<span id="cb34-123"><a href="Chapter4.html#cb34-123" tabindex="-1"></a>        <span class="at">strip.text =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">11</span>))<span class="sc">+</span></span>
<span id="cb34-124"><a href="Chapter4.html#cb34-124" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels=</span>scales<span class="sc">::</span><span class="fu">label_percent</span>(),<span class="at">breaks=</span><span class="fu">seq</span>(<span class="dv">0</span>,<span class="dv">1</span>,<span class="at">by=</span>.<span class="dv">1</span>))<span class="sc">+</span></span>
<span id="cb34-125"><a href="Chapter4.html#cb34-125" tabindex="-1"></a>  <span class="fu">scale_color_viridis_d</span>()<span class="sc">+</span></span>
<span id="cb34-126"><a href="Chapter4.html#cb34-126" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x=</span><span class="st">&quot;Sezona&quot;</span>)</span>
<span id="cb34-127"><a href="Chapter4.html#cb34-127" tabindex="-1"></a></span>
<span id="cb34-128"><a href="Chapter4.html#cb34-128" tabindex="-1"></a><span class="fu">ggview</span>(<span class="at">width=</span><span class="dv">300</span>,<span class="at">height=</span><span class="dv">200</span>,<span class="at">units=</span><span class="st">&quot;mm&quot;</span>,<span class="at">dpi=</span><span class="dv">600</span>,<span class="at">device=</span><span class="st">&quot;png&quot;</span>)</span>
<span id="cb34-129"><a href="Chapter4.html#cb34-129" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="at">filename=</span><span class="st">&quot;./pic_q52.png&quot;</span>,<span class="at">width=</span><span class="dv">300</span>,<span class="at">height=</span><span class="dv">200</span>,<span class="at">units=</span><span class="st">&quot;mm&quot;</span>,<span class="at">dpi=</span><span class="dv">600</span>)</span></code></pre></div>
</div>
</div>
<div id="q6-zālāju-transformācija-uz-aramzemēm" class="section level2 hasAnchor" number="5.7">
<h2><span class="header-section-number">5.7</span> Q6: Zālāju transformācija uz aramzemēm<a href="Chapter4.html#q6-zālāju-transformācija-uz-aramzemēm" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Projekta komandai nav pieejami 2022. gada LAD lauku informācija, bet ir 2013.-2020. gadu dati. Izmantojām 2017. un 2018. gadu LAD datus, tos atteicinot pret 2018. gada DW sezonālajiem slāņiem.</p>
<p>Lauku atlasē izmantojām tos laukus, kuros 2017. gadā bija reģistrēti ilglaicīgie zālāji (PIETEIKTAIS_KULTURAS_KODS==“710”), bet 2018. gadā tam pašam numuram reģistrēts kāds no sekojošajiem:</p>
<ul>
<li><p>rudzi (PIETEIKTAIS_KULTURAS_KODS==“121”);</p></li>
<li><p>ziemas mieži (PIETEIKTAIS_KULTURAS_KODS==“132”);</p></li>
<li><p>ziemas kvieši (PIETEIKTAIS_KULTURAS_KODS==“112”);</p></li>
<li><p>ziemas tritikāle (PIETEIKTAIS_KULTURAS_KODS==“151”);</p></li>
<li><p>ziemas rapsis (PIETEIKTAIS_KULTURAS_KODS==“212”);</p></li>
<li><p>vasaras mieži (PIETEIKTAIS_KULTURAS_KODS==“131”);</p></li>
<li><p>vasaras kvieši (PIETEIKTAIS_KULTURAS_KODS==“111”);</p></li>
<li><p>vasaras tritikāle (PIETEIKTAIS_KULTURAS_KODS==“150”);</p></li>
<li><p>vasaras rapsis (PIETEIKTAIS_KULTURAS_KODS==“211”).</p></li>
</ul>
<p>Šāda atlase atgriež 2828 laukus. Lai samazinātu malas efektus, atlasījām tikai tos, kuriem laukums ir lielāks par mediānu un perimetra-laukuma attiecība ir mazāka par mediānu - šāda atlase atgriež 1255 laukus, kuri saglabāti analīzei.</p>
<p>Atlasītajās vietās izteikti dominē klase ‘crops’ (<a href="Chapter4.html#fig:DWq6">5.28</a> att.), kas atspoguļo sagaidāmo rezultātu, apstiprinot iespējas šo resursu izmantot vides pārmaiņu analīzē.</p>
<div class="figure"><span style="display:block;" id="fig:DWq6"></span>
<img src="Atteli/ch004_q6.png" alt="Ar platību svērtā 2018. gada DW klašu sastopamība 2018. gadā par aramzemēm kļuvušajos ilggadīgajos zālājos." width="100%" />
<p class="caption">
Figure 5.28: Ar platību svērtā 2018. gada DW klašu sastopamība 2018. gadā par aramzemēm kļuvušajos ilggadīgajos zālājos.
</p>
</div>
<p><br></p>
<p>Komandu rindas attēlu sagatavošanas un veiktās analīzes reproducēšanai (tiek izmantoti <a href="Chapter3.html#Chapter3.1.1">Meža Valsts reģistrs</a> dati):</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb35-1"><a href="Chapter4.html#cb35-1" tabindex="-1"></a><span class="co"># libs</span></span>
<span id="cb35-2"><a href="Chapter4.html#cb35-2" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(terra)) {<span class="fu">install.packages</span>(<span class="st">&quot;terra&quot;</span>); <span class="fu">require</span>(terra)}</span>
<span id="cb35-3"><a href="Chapter4.html#cb35-3" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(tidyverse)) {<span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>); <span class="fu">require</span>(tidyverse)}</span>
<span id="cb35-4"><a href="Chapter4.html#cb35-4" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(arrow)) {<span class="fu">install.packages</span>(<span class="st">&quot;arrow&quot;</span>); <span class="fu">require</span>(arrow)}</span>
<span id="cb35-5"><a href="Chapter4.html#cb35-5" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(sf)) {<span class="fu">install.packages</span>(<span class="st">&quot;sf&quot;</span>); <span class="fu">require</span>(sf)}</span>
<span id="cb35-6"><a href="Chapter4.html#cb35-6" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(sfarrow)) {<span class="fu">install.packages</span>(<span class="st">&quot;sfarrow&quot;</span>); <span class="fu">require</span>(sfarrow)}</span>
<span id="cb35-7"><a href="Chapter4.html#cb35-7" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(exactextractr)) {<span class="fu">install.packages</span>(<span class="st">&quot;exactextractr&quot;</span>); <span class="fu">require</span>(exactextractr)}</span>
<span id="cb35-8"><a href="Chapter4.html#cb35-8" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(ggview)) {<span class="fu">install.packages</span>(<span class="st">&quot;ggview&quot;</span>); <span class="fu">require</span>(ggview)}</span>
<span id="cb35-9"><a href="Chapter4.html#cb35-9" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(readxl)) {<span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>); <span class="fu">require</span>(readxl)}</span>
<span id="cb35-10"><a href="Chapter4.html#cb35-10" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(ggrepel)) {<span class="fu">install.packages</span>(<span class="st">&quot;ggrepel&quot;</span>); <span class="fu">require</span>(ggrepel)}</span>
<span id="cb35-11"><a href="Chapter4.html#cb35-11" tabindex="-1"></a></span>
<span id="cb35-12"><a href="Chapter4.html#cb35-12" tabindex="-1"></a><span class="co"># lauku dati</span></span>
<span id="cb35-13"><a href="Chapter4.html#cb35-13" tabindex="-1"></a>lauki_old<span class="ot">=</span><span class="fu">st_read</span>(<span class="st">&quot;LAUKI_2012-2020.gdb/&quot;</span>,<span class="at">layer=</span><span class="st">&quot;LRGIS_LAUKI&quot;</span>) </span>
<span id="cb35-14"><a href="Chapter4.html#cb35-14" tabindex="-1"></a>lauki_old<span class="ot">=</span>lauki_old <span class="sc">%&gt;%</span> </span>
<span id="cb35-15"><a href="Chapter4.html#cb35-15" tabindex="-1"></a>  <span class="fu">filter</span>(PIETEIKUMA_GADS<span class="sc">==</span><span class="st">&quot;2017&quot;</span><span class="sc">|</span>PIETEIKUMA_GADS<span class="sc">==</span><span class="st">&quot;2018&quot;</span>)</span>
<span id="cb35-16"><a href="Chapter4.html#cb35-16" tabindex="-1"></a>lauki17<span class="ot">=</span>lauki_old  <span class="sc">%&gt;%</span> </span>
<span id="cb35-17"><a href="Chapter4.html#cb35-17" tabindex="-1"></a>  <span class="fu">filter</span>(PIETEIKUMA_GADS<span class="sc">==</span><span class="st">&quot;2017&quot;</span>)<span class="sc">%&gt;%</span> </span>
<span id="cb35-18"><a href="Chapter4.html#cb35-18" tabindex="-1"></a>  <span class="fu">filter</span>(PIETEIKTAIS_KULTURAS_KODS<span class="sc">==</span><span class="st">&quot;710&quot;</span>)</span>
<span id="cb35-19"><a href="Chapter4.html#cb35-19" tabindex="-1"></a>lauki17_pts<span class="ot">=</span><span class="fu">st_centroid</span>(lauki17)</span>
<span id="cb35-20"><a href="Chapter4.html#cb35-20" tabindex="-1"></a>lauki18<span class="ot">=</span>lauki_old <span class="sc">%&gt;%</span> </span>
<span id="cb35-21"><a href="Chapter4.html#cb35-21" tabindex="-1"></a>  <span class="fu">filter</span>(PIETEIKUMA_GADS<span class="sc">==</span><span class="st">&quot;2018&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb35-22"><a href="Chapter4.html#cb35-22" tabindex="-1"></a>  <span class="fu">filter</span>(PIETEIKTAIS_KULTURAS_KODS<span class="sc">==</span><span class="st">&quot;121&quot;</span><span class="sc">|</span></span>
<span id="cb35-23"><a href="Chapter4.html#cb35-23" tabindex="-1"></a>           PIETEIKTAIS_KULTURAS_KODS<span class="sc">==</span><span class="st">&quot;132&quot;</span><span class="sc">|</span></span>
<span id="cb35-24"><a href="Chapter4.html#cb35-24" tabindex="-1"></a>           PIETEIKTAIS_KULTURAS_KODS<span class="sc">==</span><span class="st">&quot;112&quot;</span><span class="sc">|</span></span>
<span id="cb35-25"><a href="Chapter4.html#cb35-25" tabindex="-1"></a>           PIETEIKTAIS_KULTURAS_KODS<span class="sc">==</span><span class="st">&quot;151&quot;</span><span class="sc">|</span></span>
<span id="cb35-26"><a href="Chapter4.html#cb35-26" tabindex="-1"></a>           PIETEIKTAIS_KULTURAS_KODS<span class="sc">==</span><span class="st">&quot;212&quot;</span><span class="sc">|</span></span>
<span id="cb35-27"><a href="Chapter4.html#cb35-27" tabindex="-1"></a>           PIETEIKTAIS_KULTURAS_KODS<span class="sc">==</span><span class="st">&quot;131&quot;</span><span class="sc">|</span></span>
<span id="cb35-28"><a href="Chapter4.html#cb35-28" tabindex="-1"></a>           PIETEIKTAIS_KULTURAS_KODS<span class="sc">==</span><span class="st">&quot;111&quot;</span><span class="sc">|</span></span>
<span id="cb35-29"><a href="Chapter4.html#cb35-29" tabindex="-1"></a>           PIETEIKTAIS_KULTURAS_KODS<span class="sc">==</span><span class="st">&quot;150&quot;</span><span class="sc">|</span></span>
<span id="cb35-30"><a href="Chapter4.html#cb35-30" tabindex="-1"></a>           PIETEIKTAIS_KULTURAS_KODS<span class="sc">==</span><span class="st">&quot;211&quot;</span>)</span>
<span id="cb35-31"><a href="Chapter4.html#cb35-31" tabindex="-1"></a>lauki_parbaudei<span class="ot">=</span>lauki18[lauki17_pts,,]</span>
<span id="cb35-32"><a href="Chapter4.html#cb35-32" tabindex="-1"></a>lauki_parbaudei<span class="sc">$</span>PAr<span class="ot">=</span>lauki_parbaudei<span class="sc">$</span>SHAPE_Length<span class="sc">/</span>lauki_parbaudei<span class="sc">$</span>SHAPE_Area</span>
<span id="cb35-33"><a href="Chapter4.html#cb35-33" tabindex="-1"></a>lauki_parbaudei2<span class="ot">=</span>lauki_parbaudei <span class="sc">%&gt;%</span> </span>
<span id="cb35-34"><a href="Chapter4.html#cb35-34" tabindex="-1"></a>  <span class="fu">filter</span>(SHAPE_Area<span class="sc">&gt;</span><span class="fu">median</span>(SHAPE_Area)<span class="sc">&amp;</span>PAr<span class="sc">&lt;</span><span class="fu">median</span>(PAr))</span>
<span id="cb35-35"><a href="Chapter4.html#cb35-35" tabindex="-1"></a><span class="fu">st_write</span>(lauki_parbaudei2,<span class="st">&quot;./zalaju_parmainam.gpkg&quot;</span>)</span>
<span id="cb35-36"><a href="Chapter4.html#cb35-36" tabindex="-1"></a></span>
<span id="cb35-37"><a href="Chapter4.html#cb35-37" tabindex="-1"></a><span class="co"># DW</span></span>
<span id="cb35-38"><a href="Chapter4.html#cb35-38" tabindex="-1"></a>AprAug <span class="ot">&lt;-</span> <span class="fu">rast</span>(<span class="st">&quot;./DW_2023_apraug.tif&quot;</span>)</span>
<span id="cb35-39"><a href="Chapter4.html#cb35-39" tabindex="-1"></a>AprJul <span class="ot">&lt;-</span> <span class="fu">rast</span>(<span class="st">&quot;./DW_2023_aprjul.tif&quot;</span>)</span>
<span id="cb35-40"><a href="Chapter4.html#cb35-40" tabindex="-1"></a>AprJun <span class="ot">&lt;-</span> <span class="fu">rast</span>(<span class="st">&quot;./DW_2023_aprjun.tif&quot;</span>)</span>
<span id="cb35-41"><a href="Chapter4.html#cb35-41" tabindex="-1"></a>AprMay <span class="ot">&lt;-</span> <span class="fu">rast</span>(<span class="st">&quot;./DW_2023_aprmay.tif&quot;</span>)</span>
<span id="cb35-42"><a href="Chapter4.html#cb35-42" tabindex="-1"></a>JulAug <span class="ot">&lt;-</span> <span class="fu">rast</span>(<span class="st">&quot;./DW_2023_julaug.tif&quot;</span>)</span>
<span id="cb35-43"><a href="Chapter4.html#cb35-43" tabindex="-1"></a>JunAug <span class="ot">&lt;-</span> <span class="fu">rast</span>(<span class="st">&quot;./DW_2023_julaug.tif&quot;</span>)</span>
<span id="cb35-44"><a href="Chapter4.html#cb35-44" tabindex="-1"></a>JunJul <span class="ot">&lt;-</span> <span class="fu">rast</span>(<span class="st">&quot;./DW_2023_junjul.tif&quot;</span>)</span>
<span id="cb35-45"><a href="Chapter4.html#cb35-45" tabindex="-1"></a>MayAug <span class="ot">&lt;-</span> <span class="fu">rast</span>(<span class="st">&quot;./DW_2023_mayaug.tif&quot;</span>)</span>
<span id="cb35-46"><a href="Chapter4.html#cb35-46" tabindex="-1"></a>MayJul <span class="ot">&lt;-</span> <span class="fu">rast</span>(<span class="st">&quot;./DW_2023_mayjul.tif&quot;</span>)</span>
<span id="cb35-47"><a href="Chapter4.html#cb35-47" tabindex="-1"></a>MayJun <span class="ot">&lt;-</span> <span class="fu">rast</span>(<span class="st">&quot;./DW_2023_mayjun.tif&quot;</span>)</span>
<span id="cb35-48"><a href="Chapter4.html#cb35-48" tabindex="-1"></a></span>
<span id="cb35-49"><a href="Chapter4.html#cb35-49" tabindex="-1"></a><span class="co"># utility </span></span>
<span id="cb35-50"><a href="Chapter4.html#cb35-50" tabindex="-1"></a>darbiba <span class="ot">&lt;-</span> <span class="cf">function</span>(raster, vector, period) {</span>
<span id="cb35-51"><a href="Chapter4.html#cb35-51" tabindex="-1"></a>  <span class="fu">exact_extract</span>(raster, vector, <span class="cf">function</span>(value, coverage_fraction) {</span>
<span id="cb35-52"><a href="Chapter4.html#cb35-52" tabindex="-1"></a>    <span class="fu">data.frame</span>(<span class="at">value =</span> value,</span>
<span id="cb35-53"><a href="Chapter4.html#cb35-53" tabindex="-1"></a>               <span class="at">frac =</span> coverage_fraction <span class="sc">/</span> <span class="fu">sum</span>(coverage_fraction, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb35-54"><a href="Chapter4.html#cb35-54" tabindex="-1"></a>      <span class="fu">group_by</span>(value) <span class="sc">%&gt;%</span></span>
<span id="cb35-55"><a href="Chapter4.html#cb35-55" tabindex="-1"></a>      <span class="fu">summarize</span>(<span class="at">freq =</span> <span class="fu">sum</span>(frac, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="at">.groups =</span> <span class="st">&#39;drop&#39;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb35-56"><a href="Chapter4.html#cb35-56" tabindex="-1"></a>      <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> <span class="st">&#39;value&#39;</span>,</span>
<span id="cb35-57"><a href="Chapter4.html#cb35-57" tabindex="-1"></a>                  <span class="at">names_prefix =</span> <span class="st">&#39;freq_&#39;</span>,</span>
<span id="cb35-58"><a href="Chapter4.html#cb35-58" tabindex="-1"></a>                  <span class="at">values_from =</span> <span class="st">&#39;freq&#39;</span>)</span>
<span id="cb35-59"><a href="Chapter4.html#cb35-59" tabindex="-1"></a>  }) <span class="sc">%&gt;%</span></span>
<span id="cb35-60"><a href="Chapter4.html#cb35-60" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">starts_with</span>(<span class="st">&#39;freq&#39;</span>), <span class="sc">~</span><span class="fu">replace_na</span>(., <span class="dv">0</span>))) <span class="sc">%&gt;%</span></span>
<span id="cb35-61"><a href="Chapter4.html#cb35-61" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">periods =</span> period) </span>
<span id="cb35-62"><a href="Chapter4.html#cb35-62" tabindex="-1"></a>}</span>
<span id="cb35-63"><a href="Chapter4.html#cb35-63" tabindex="-1"></a></span>
<span id="cb35-64"><a href="Chapter4.html#cb35-64" tabindex="-1"></a><span class="co"># DW extraction </span></span>
<span id="cb35-65"><a href="Chapter4.html#cb35-65" tabindex="-1"></a>dati<span class="ot">=</span>lauki_parbaudei2[<span class="dv">1</span>,]</span>
<span id="cb35-66"><a href="Chapter4.html#cb35-66" tabindex="-1"></a>rand_locs <span class="ot">&lt;-</span> lauki_parbaudei2 <span class="sc">%&gt;%</span>  <span class="fu">mutate</span>(<span class="at">id =</span> <span class="fu">row_number</span>())</span>
<span id="cb35-67"><a href="Chapter4.html#cb35-67" tabindex="-1"></a>a<span class="ot">=</span><span class="fu">cbind</span>(rand_locs,<span class="fu">darbiba</span>(AprAug, rand_locs, <span class="st">&quot;AprAug&quot;</span>))</span>
<span id="cb35-68"><a href="Chapter4.html#cb35-68" tabindex="-1"></a>b<span class="ot">=</span><span class="fu">cbind</span>(rand_locs,<span class="fu">darbiba</span>(AprJul, rand_locs, <span class="st">&quot;AprJul&quot;</span>))</span>
<span id="cb35-69"><a href="Chapter4.html#cb35-69" tabindex="-1"></a>c<span class="ot">=</span><span class="fu">cbind</span>(rand_locs,<span class="fu">darbiba</span>(AprJun, rand_locs, <span class="st">&quot;AprJun&quot;</span>))</span>
<span id="cb35-70"><a href="Chapter4.html#cb35-70" tabindex="-1"></a>d<span class="ot">=</span><span class="fu">cbind</span>(rand_locs,<span class="fu">darbiba</span>(AprMay, rand_locs, <span class="st">&quot;AprMay&quot;</span>))</span>
<span id="cb35-71"><a href="Chapter4.html#cb35-71" tabindex="-1"></a>e<span class="ot">=</span><span class="fu">cbind</span>(rand_locs,<span class="fu">darbiba</span>(JulAug, rand_locs, <span class="st">&quot;JulAug&quot;</span>))</span>
<span id="cb35-72"><a href="Chapter4.html#cb35-72" tabindex="-1"></a>f<span class="ot">=</span><span class="fu">cbind</span>(rand_locs,<span class="fu">darbiba</span>(JunAug, rand_locs, <span class="st">&quot;JunAug&quot;</span>))</span>
<span id="cb35-73"><a href="Chapter4.html#cb35-73" tabindex="-1"></a>g<span class="ot">=</span><span class="fu">cbind</span>(rand_locs,<span class="fu">darbiba</span>(JunJul, rand_locs, <span class="st">&quot;JunJul&quot;</span>))</span>
<span id="cb35-74"><a href="Chapter4.html#cb35-74" tabindex="-1"></a>h<span class="ot">=</span><span class="fu">cbind</span>(rand_locs,<span class="fu">darbiba</span>(MayAug, rand_locs, <span class="st">&quot;MayAug&quot;</span>))</span>
<span id="cb35-75"><a href="Chapter4.html#cb35-75" tabindex="-1"></a>i<span class="ot">=</span><span class="fu">cbind</span>(rand_locs,<span class="fu">darbiba</span>(MayJul, rand_locs, <span class="st">&quot;MayJul&quot;</span>))</span>
<span id="cb35-76"><a href="Chapter4.html#cb35-76" tabindex="-1"></a>j<span class="ot">=</span><span class="fu">cbind</span>(rand_locs,<span class="fu">darbiba</span>(MayJun, rand_locs, <span class="st">&quot;MayJun&quot;</span>))</span>
<span id="cb35-77"><a href="Chapter4.html#cb35-77" tabindex="-1"></a></span>
<span id="cb35-78"><a href="Chapter4.html#cb35-78" tabindex="-1"></a>rez<span class="ot">=</span><span class="fu">bind_rows</span>(a,b,c,d,e,f,g,h,i,j)</span>
<span id="cb35-79"><a href="Chapter4.html#cb35-79" tabindex="-1"></a>  dati <span class="ot">&lt;-</span> <span class="fu">bind_rows</span>(dati, rez)</span>
<span id="cb35-80"><a href="Chapter4.html#cb35-80" tabindex="-1"></a>dati<span class="ot">=</span>dati <span class="sc">%&gt;%</span> </span>
<span id="cb35-81"><a href="Chapter4.html#cb35-81" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">water=</span>freq_0,</span>
<span id="cb35-82"><a href="Chapter4.html#cb35-82" tabindex="-1"></a>         <span class="at">trees=</span>freq_1,</span>
<span id="cb35-83"><a href="Chapter4.html#cb35-83" tabindex="-1"></a>         <span class="at">grass=</span>freq_2,</span>
<span id="cb35-84"><a href="Chapter4.html#cb35-84" tabindex="-1"></a>         <span class="at">flooded_vegetation=</span>freq_3,</span>
<span id="cb35-85"><a href="Chapter4.html#cb35-85" tabindex="-1"></a>         <span class="at">crops=</span>freq_4,</span>
<span id="cb35-86"><a href="Chapter4.html#cb35-86" tabindex="-1"></a>         <span class="at">shrub_and_scrub=</span>freq_5,</span>
<span id="cb35-87"><a href="Chapter4.html#cb35-87" tabindex="-1"></a>         <span class="at">built=</span>freq_6,</span>
<span id="cb35-88"><a href="Chapter4.html#cb35-88" tabindex="-1"></a>         <span class="at">bare=</span>freq_7,</span>
<span id="cb35-89"><a href="Chapter4.html#cb35-89" tabindex="-1"></a>         <span class="at">snow_and_ice=</span>freq_8)</span>
<span id="cb35-90"><a href="Chapter4.html#cb35-90" tabindex="-1"></a>dati_real<span class="ot">=</span>dati[<span class="sc">-</span><span class="dv">1</span>,]</span>
<span id="cb35-91"><a href="Chapter4.html#cb35-91" tabindex="-1"></a>dati_real[<span class="fu">is.na</span>(dati_real)]<span class="ot">=</span><span class="dv">0</span></span>
<span id="cb35-92"><a href="Chapter4.html#cb35-92" tabindex="-1"></a>dati_real<span class="sc">$</span>area<span class="ot">=</span><span class="fu">as.numeric</span>(<span class="fu">st_area</span>(dati_real))</span>
<span id="cb35-93"><a href="Chapter4.html#cb35-93" tabindex="-1"></a>dati_real<span class="sc">$</span>perimeter<span class="ot">=</span><span class="fu">as.numeric</span>(<span class="fu">st_perimeter</span>(dati_real))</span>
<span id="cb35-94"><a href="Chapter4.html#cb35-94" tabindex="-1"></a>sfarrow<span class="sc">::</span><span class="fu">st_write_parquet</span>(dati_real,<span class="st">&quot;./Q6_ZalajuTransformacijas.parquet&quot;</span>)</span>
<span id="cb35-95"><a href="Chapter4.html#cb35-95" tabindex="-1"></a></span>
<span id="cb35-96"><a href="Chapter4.html#cb35-96" tabindex="-1"></a><span class="co"># DW klases pārmaiņu vietās</span></span>
<span id="cb35-97"><a href="Chapter4.html#cb35-97" tabindex="-1"></a>dati<span class="ot">=</span>sfarrow<span class="sc">::</span><span class="fu">st_read_parquet</span>(<span class="st">&quot;./Q6_ZalajuTransformacijas.parquet&quot;</span>)</span>
<span id="cb35-98"><a href="Chapter4.html#cb35-98" tabindex="-1"></a>dati<span class="ot">=</span>dati <span class="sc">%&gt;%</span> </span>
<span id="cb35-99"><a href="Chapter4.html#cb35-99" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">sezona=</span><span class="fu">factor</span>(periods,<span class="at">ordered=</span><span class="cn">TRUE</span>,</span>
<span id="cb35-100"><a href="Chapter4.html#cb35-100" tabindex="-1"></a>                       <span class="at">levels=</span><span class="fu">c</span>(<span class="st">&quot;AprMay&quot;</span>,<span class="st">&quot;AprJun&quot;</span>,<span class="st">&quot;AprJul&quot;</span>,<span class="st">&quot;AprAug&quot;</span>,<span class="st">&quot;MayJun&quot;</span>,</span>
<span id="cb35-101"><a href="Chapter4.html#cb35-101" tabindex="-1"></a>                                <span class="st">&quot;MayJul&quot;</span>,<span class="st">&quot;MayAug&quot;</span>,<span class="st">&quot;JunJul&quot;</span>,<span class="st">&quot;JunAug&quot;</span>,<span class="st">&quot;JulAug&quot;</span>)))</span>
<span id="cb35-102"><a href="Chapter4.html#cb35-102" tabindex="-1"></a>q6data<span class="ot">=</span><span class="fu">data.frame</span>(dati) <span class="sc">%&gt;%</span> </span>
<span id="cb35-103"><a href="Chapter4.html#cb35-103" tabindex="-1"></a>  <span class="fu">select</span>(sezona,perimeter,area,water<span class="sc">:</span>snow_and_ice) <span class="sc">%&gt;%</span> </span>
<span id="cb35-104"><a href="Chapter4.html#cb35-104" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols=</span>water<span class="sc">:</span>snow_and_ice,<span class="at">names_to =</span> <span class="st">&quot;klase&quot;</span>,</span>
<span id="cb35-105"><a href="Chapter4.html#cb35-105" tabindex="-1"></a>               <span class="at">values_to =</span> <span class="st">&quot;proporcija&quot;</span>)</span>
<span id="cb35-106"><a href="Chapter4.html#cb35-106" tabindex="-1"></a></span>
<span id="cb35-107"><a href="Chapter4.html#cb35-107" tabindex="-1"></a>q6_props<span class="ot">=</span><span class="fu">data.frame</span>(dati) <span class="sc">%&gt;%</span> </span>
<span id="cb35-108"><a href="Chapter4.html#cb35-108" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols=</span>water<span class="sc">:</span>snow_and_ice,<span class="at">names_to =</span> <span class="st">&quot;klase&quot;</span>,</span>
<span id="cb35-109"><a href="Chapter4.html#cb35-109" tabindex="-1"></a>               <span class="at">values_to =</span> <span class="st">&quot;proporcija&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb35-110"><a href="Chapter4.html#cb35-110" tabindex="-1"></a>  <span class="fu">filter</span>(klase <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;crops&quot;</span>,<span class="st">&quot;grass&quot;</span>,<span class="st">&quot;shrub_and_scrub&quot;</span>,<span class="st">&quot;trees&quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb35-111"><a href="Chapter4.html#cb35-111" tabindex="-1"></a>  <span class="fu">group_by</span>(sezona,klase) <span class="sc">%&gt;%</span> </span>
<span id="cb35-112"><a href="Chapter4.html#cb35-112" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">proporcija=</span><span class="fu">round</span>(<span class="fu">weighted.mean</span>(proporcija,area)<span class="sc">*</span><span class="dv">100</span>,<span class="dv">0</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb35-113"><a href="Chapter4.html#cb35-113" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span>
<span id="cb35-114"><a href="Chapter4.html#cb35-114" tabindex="-1"></a></span>
<span id="cb35-115"><a href="Chapter4.html#cb35-115" tabindex="-1"></a><span class="fu">ggplot</span>(q6data,<span class="fu">aes</span>(sezona,proporcija,<span class="at">col=</span>klase))<span class="sc">+</span></span>
<span id="cb35-116"><a href="Chapter4.html#cb35-116" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">position=</span><span class="fu">position_dodge</span>(<span class="at">width=</span><span class="fl">0.75</span>),<span class="at">alpha=</span><span class="fl">0.2</span>)<span class="sc">+</span></span>
<span id="cb35-117"><a href="Chapter4.html#cb35-117" tabindex="-1"></a>  <span class="fu">theme_bw</span>()<span class="sc">+</span></span>
<span id="cb35-118"><a href="Chapter4.html#cb35-118" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="at">data=</span>q6_props[q6_props<span class="sc">$</span>klase<span class="sc">==</span><span class="st">&quot;crops&quot;</span>,],</span>
<span id="cb35-119"><a href="Chapter4.html#cb35-119" tabindex="-1"></a>            <span class="fu">aes</span>(sezona,<span class="at">y=</span><span class="fl">1.2</span>,<span class="at">label=</span>proporcija),<span class="at">size=</span><span class="dv">3</span>)<span class="sc">+</span></span>
<span id="cb35-120"><a href="Chapter4.html#cb35-120" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="at">data=</span>q6_props[q6_props<span class="sc">$</span>klase<span class="sc">==</span><span class="st">&quot;grass&quot;</span>,],</span>
<span id="cb35-121"><a href="Chapter4.html#cb35-121" tabindex="-1"></a>            <span class="fu">aes</span>(sezona,<span class="at">y=</span><span class="fl">1.15</span>,<span class="at">label=</span>proporcija),<span class="at">size=</span><span class="dv">3</span>)<span class="sc">+</span></span>
<span id="cb35-122"><a href="Chapter4.html#cb35-122" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="at">data=</span>q6_props[q6_props<span class="sc">$</span>klase<span class="sc">==</span><span class="st">&quot;shrub_and_scrub&quot;</span>,],</span>
<span id="cb35-123"><a href="Chapter4.html#cb35-123" tabindex="-1"></a>            <span class="fu">aes</span>(sezona,<span class="at">y=</span><span class="fl">1.1</span>,<span class="at">label=</span>proporcija),<span class="at">size=</span><span class="dv">3</span>)<span class="sc">+</span></span>
<span id="cb35-124"><a href="Chapter4.html#cb35-124" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="at">data=</span>q6_props[q6_props<span class="sc">$</span>klase<span class="sc">==</span><span class="st">&quot;trees&quot;</span>,],</span>
<span id="cb35-125"><a href="Chapter4.html#cb35-125" tabindex="-1"></a>            <span class="fu">aes</span>(sezona,<span class="at">y=</span><span class="fl">1.05</span>,<span class="at">label=</span>proporcija),<span class="at">size=</span><span class="dv">3</span>)<span class="sc">+</span></span>
<span id="cb35-126"><a href="Chapter4.html#cb35-126" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle=</span><span class="dv">90</span>,<span class="at">vjust=</span><span class="fl">0.5</span>),</span>
<span id="cb35-127"><a href="Chapter4.html#cb35-127" tabindex="-1"></a>        <span class="at">axis.title.y =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb35-128"><a href="Chapter4.html#cb35-128" tabindex="-1"></a>        <span class="at">legend.title =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb35-129"><a href="Chapter4.html#cb35-129" tabindex="-1"></a>        <span class="at">axis.title =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">14</span>),</span>
<span id="cb35-130"><a href="Chapter4.html#cb35-130" tabindex="-1"></a>        <span class="at">axis.text=</span><span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">12</span>),</span>
<span id="cb35-131"><a href="Chapter4.html#cb35-131" tabindex="-1"></a>        <span class="at">legend.text=</span><span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">12</span>),</span>
<span id="cb35-132"><a href="Chapter4.html#cb35-132" tabindex="-1"></a>        <span class="at">strip.text =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">11</span>))<span class="sc">+</span></span>
<span id="cb35-133"><a href="Chapter4.html#cb35-133" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels=</span>scales<span class="sc">::</span><span class="fu">label_percent</span>(),<span class="at">breaks=</span><span class="fu">seq</span>(<span class="dv">0</span>,<span class="dv">1</span>,<span class="at">by=</span>.<span class="dv">1</span>))<span class="sc">+</span></span>
<span id="cb35-134"><a href="Chapter4.html#cb35-134" tabindex="-1"></a>  <span class="fu">scale_color_viridis_d</span>()<span class="sc">+</span></span>
<span id="cb35-135"><a href="Chapter4.html#cb35-135" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x=</span><span class="st">&quot;Sezona&quot;</span>)</span>
<span id="cb35-136"><a href="Chapter4.html#cb35-136" tabindex="-1"></a></span>
<span id="cb35-137"><a href="Chapter4.html#cb35-137" tabindex="-1"></a><span class="fu">ggview</span>(<span class="at">width=</span><span class="dv">300</span>,<span class="at">height=</span><span class="dv">150</span>,<span class="at">units=</span><span class="st">&quot;mm&quot;</span>,<span class="at">dpi=</span><span class="dv">600</span>,<span class="at">device=</span><span class="st">&quot;png&quot;</span>)</span>
<span id="cb35-138"><a href="Chapter4.html#cb35-138" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="at">filename=</span><span class="st">&quot;./pic_q6.png&quot;</span>,<span class="at">width=</span><span class="dv">300</span>,<span class="at">height=</span><span class="dv">150</span>,<span class="at">units=</span><span class="st">&quot;mm&quot;</span>,<span class="at">dpi=</span><span class="dv">600</span>)</span></code></pre></div>
</div>
<div id="secinājumi" class="section level2 hasAnchor" number="5.8">
<h2><span class="header-section-number">5.8</span> Secinājumi<a href="Chapter4.html#secinājumi" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<ol style="list-style-type: decimal">
<li><p>Kā sagaidāms, DW izteikti pārspīlē vertikāli strukturēto klašu (piemēram, ‘trees’ un ‘built’, kura šajā analīzē nav sevišķi uzsvērta) sastopamību. Sevišķi izteikti tas parādās jaunaudžu un izcirtumu analīzēs. Tas nozīmē, ka, izmantojot tikai šo resursu vides raksturošanai, ir sagaidāma krietns troksnis visiem parametriem, kas saistās ar kokiem. To varētu risināt, pārskatot varbūtību sliekšņus katrai no klasēm, lai optimizētu Latvijas apstākļiem un sugu izplatības modelēšanas mērķim. Tomēr tas pieprasa liela apjoma specifisku analīzi, kas šī darba ietvaros netiks veikta.</p></li>
<li><p>Mitrāji, kas definēti topogrāfiskajā kartē, visai slikti uzrādās DW, galvenokārt augsto lakstaugu, kas klasificēti kā ‘trees’ dēļ. Tā kā daudzām ar mitrājiem saistītajām sugām koku klātbūtne ir uzskatāma par nozīmīgu negatīvi ietekmējošu mainīgo, paļauties uz DW viltus pozitīvo koku klātbūtni nozīmētu samazināt dzīvotņu piemērotības modeļu skaidrojamību un potenciāli arī projekciju uzticamību. Šo nāksies risināt kombinējot dažādākus slāņus, piemēram <em>Global Forest Watch</em> un <em>PALSAR</em> klasifikāciju informācijai par kokiem - šie resursi un to uzticamība Latvijai ir jau pētīti (piemēram, <span class="citation">(<a href="#ref-PucuPlans">Avotiņš, 2019a</a>)</span> un <span class="citation">(<a href="#ref-Avotins_LU2019">Avotiņš, 2019b</a>)</span>).</p></li>
<li><p>Lai gan vides klasifikāciju nevar balstīt tikai DW rezultātos, tie pietiekoši labi demonstrē zālāju transformāciju un vismaz lielāka mēroga koku vainagu seguma izzušanu. Tā kā arī apbūves teritoriju klases sastopamības troksnis ir līdzīgs koku klasei, tas pietiekoši aptver nozīmīgākās pārmaiņas vidē, lai varētu izmantot novērojumu atlasē.</p></li>
<li><p>Tikai vasaras mēnešu izmantošana sniedz zemāko atbalstu sagaidāmajiem rezultātiem. Nedaudz zemāks atbalsts par pārējām klasēm ir tikai pavasara mēnešiem. Tādēļ pārmaiņu analīzē izmantojama sezona, kas aptver gan pavasara, gan vasaras mēnešus. Tā kā atlikušajos sezonas griezumos Dynamic World rezultātos ir tikai marginālas atšķirības, analīzēm izmantosim Aprīļa-Augusta klašu vidējās varbūtības, jo šis periods sniedz klasifikācijas labāko telpisko pārklājumu (<a href="Chapter4.html#fig:DWq00">5.1</a> att.).</p></li>
</ol>

</div>
</div>
<h3>References<a href="references-1.html#references-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="refs" class="references csl-bib-body hanging-indent" entry-spacing="0">
<div id="ref-PucuPlans" class="csl-entry">
Avotiņš, A., 2019a. Apodziņa <span>Glaucidium</span> passerinum, bikšainā apoga <span>Aegolius</span> funereus, meža pūces <span>Strix</span> aluco, urālpūces <span>Strix</span> uralensis, ausainās pūces <span>Asio</span> otus un ūpja <span>Bubo</span> bubo aizsardzības plāns. Latvijas Ornitoloģijas biedrība, Rīga, Latvija.
</div>
<div id="ref-Avotins_LU2019" class="csl-entry">
Avotiņš, A., 2019b. Aizsargājamās dabas teritorijas, mežsaimniecības aprobežojumi un <span>Aichi</span> biodaudzveidības mērķi mežos: Trūkumi dabas teritorijās un iespējas valsts līmeņa plānošanā ar dzīvotņu piemērotības modelēšanu, LU 77th International scientific conference.
</div>
<div id="ref-DynWorld" class="csl-entry">
Brown, C.F., Brumby, S.P., Guzder-Williams, B., Birch, T., Hyde, S.B., Mazzariello, J., Czerwinski, W., Pasquarella, V.J., Haertel, R., Ilyushchenko, S., Schwehr, K., Weisse, M., Stolle, F., Hanson, C., Guinan, O., Moore, R., Tait, A.M., 2022. <span>Dynamic</span> <span>World</span>, <span>Near</span> real-time global 10 m land use land cover mapping, Scientific Data. <a href="https://doi.org/10.1038/s41597-022-01307-4">https://doi.org/10.1038/s41597-022-01307-4</a>
</div>
<div id="ref-CropMap2022" class="csl-entry">
Ghassemi, B., Izquierdo-Verdiguier, E., Verhegghen, A., Yordanov, M., Lemoine, G., Martínez, Á.M., Marchi, D.D., Velde, M. van der, Vuolo, F., d’Andrimont, R., 2024. <span>European</span> <span>Union</span> crop map 2022: <span>Earth</span> observation’s 10-meter dive into <span class="nocase">Europe’s</span> crop tapestry, Scientific Data. <a href="https://doi.org/10.1038/s41597-024-03884-y">https://doi.org/10.1038/s41597-024-03884-y</a>
</div>
<div id="ref-GEEpaper" class="csl-entry">
Gorelick, N., Hancher, M., Dixon, M., Ilyushchenko, S., Thau, D., Moore, R., 2017. <span>Google</span> <span>Earth</span> <span>Engine</span>: <span class="nocase">Planetary-scale</span> geospatial analysis for everyone, Remote Sensing of Environment. <a href="https://doi.org/10.1016/j.rse.2017.06.031">https://doi.org/10.1016/j.rse.2017.06.031</a>
</div>
<div id="ref-ELULC10" class="csl-entry">
Mirmazloumi, S.M., Kakooei, M., Mohseni, F., Ghorbanian, A., Amani, M., Crosetto, M., Monserrat, O., 2022. ELULC-10, a 10 m <span>European</span> land use and land cover map using <span>Sentinel</span> and <span>Landsat</span> data in <span>Google</span> <span>Earth</span> <span>Engine</span>, Remote Sensing. <a href="https://doi.org/10.3390/rs14133041">https://doi.org/10.3390/rs14133041</a>
</div>
<div id="ref-LULC10salidzinajums_Venter" class="csl-entry">
Venter, Z.S., Barton, D.N., Chakraborty, T., Simensen, T., Singh, G., 2022. Global 10 m <span>Land</span> <span>Use</span> <span>Land</span> <span>Cover</span> datasets: A comparison of <span>Dynamic</span> <span>World</span>, <span>World</span> <span>Cover</span> and <span>Esri</span> <span>Land</span> <span>Cover</span>, Remote Sensing. <a href="https://doi.org/10.3390/rs14164101">https://doi.org/10.3390/rs14164101</a>
</div>
<div id="ref-LULC10salidzinajums_Xu" class="csl-entry">
Xu, P., Tsendbazar, N.-E., Herold, M., Bruin, S. de, Koopmans, M., Birch, T., Carter, S., Fritz, S., Lesiv, M., Mazur, E., Pickens, A., Potapov, P., Stolle, F., Tyukavina, A., Kerchove, R.V.D., Zanaga, D., 2024. Comparative validation of recent 10 m-resolution global land cover maps, Remote Sensing of Environment. <a href="https://doi.org/10.1016/j.rse.2024.114316">https://doi.org/10.1016/j.rse.2024.114316</a>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="Chapter3.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="Chapter5.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/aavotins/PutnuSDMs_gramata/edit/BRANCH/004-DynamicWorld.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["PutnuSDMs-gramata.pdf", "PutnuSDMs-gramata.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
